<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pagus</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Crect width='64' height='64' rx='10' fill='%232c3e50'/%3E%3Crect x='2' y='2' width='60' height='60' rx='8' fill='none' stroke='%23C9A962' stroke-width='1.5'/%3E%3Cpath d='M22 14h12c6.627 0 12 4.477 12 10s-5.373 10-12 10H28v16h-6V14z M28 19.5v9h6c3.314 0 6-2.015 6-4.5s-2.686-4.5-6-4.5h-6z' fill='%23C9A962'/%3E%3C/svg%3E">
    <meta name="description" content="Premium wholesale menswear from Turkey. Ceremonial, Formal & Casual Wear.">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://www.gstatic.com https://apis.google.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https://*.googleusercontent.com; connect-src 'self' https://*.googleapis.com https://*.firebaseio.com https://*.firebaseapp.com https://identitytoolkit.googleapis.com https://securetoken.googleapis.com; frame-src https://*.firebaseapp.com https://accounts.google.com;">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Montserrat:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root { --color-black: #1a1a1a; --color-gold: #c9a962; --color-noble: #2c3e50; --font-display: 'Playfair Display', serif; --font-body: 'Montserrat', sans-serif; --site-max-width: 1400px; }
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { font-family: var(--font-body); color: var(--color-black); background: #FAFAFA; overflow-x: hidden; zoom: 1.1; }
        .header { position: sticky; top: 0; width: 100%; z-index: 900; background: #FFFFFF; box-shadow: 0 2px 15px rgba(0,0,0,0.06); }
        .header-inner { max-width: var(--site-max-width); margin: 0 auto; padding: 0 40px; }
        .brand-bar { text-align: center; padding: 20px 0 14px; border-bottom: 1px solid rgba(0,0,0,0.06); }
        .brand-bar a { font-family: var(--font-display); font-size: 2.2rem; color: var(--color-noble); font-weight: 700; text-transform: uppercase; letter-spacing: 6px; text-decoration: none; }
        .brand-bar a .brand-p { font-size: 110%; }
        .toolbar-row { display: flex; justify-content: space-between; align-items: center; padding: 14px 0; }
        .toolbar-right { display: flex; gap: 12px; align-items: center; }
        .soc-icons { display: flex; gap: 12px; align-items: center; }
        .soc-icons .social-icon { display: flex; align-items: center; justify-content: center; }
        .soc-icons .social-icon svg { width: 22px; height: 22px; fill: rgba(0,0,0,0.35); transition: 0.3s; }
        .soc-icons .social-icon:hover svg { fill: var(--color-gold); }
        .nav-list { display: flex; gap: 25px; list-style: none; border-top: 1px solid rgba(0,0,0,0.06); padding: 14px 0; width: 100%; justify-content: center; flex-wrap: wrap; }
        .nav-list a { color: var(--color-noble); font-size: 1.1rem; font-weight: 700; text-transform: uppercase; letter-spacing: 2px; transition: 0.3s; text-decoration: none; white-space: nowrap; padding: 10px 5px; }
        .nav-list a:hover { color: var(--color-gold); }
        .search-area { display: flex; align-items: center; gap: 8px; position: relative; }
        .search-icon-btn { width: 46px; height: 46px; border-radius: 50%; background: rgba(0,0,0,0.05); border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: 0.3s; flex-shrink: 0; }
        .search-icon-btn:hover { background: var(--color-gold); }
        .search-icon-btn svg { width: 22px; height: 22px; fill: var(--color-noble); transition: 0.3s; }
        .search-icon-btn:hover svg { fill: #fff; }
        .search-expand { display: flex; align-items: center; background: rgba(0,0,0,0.04); border-radius: 25px; overflow: hidden; max-width: 0; opacity: 0; transition: max-width 0.35s ease, opacity 0.25s ease, padding 0.3s; padding: 0; }
        .search-expand.open { max-width: 300px; opacity: 1; padding: 0 0 0 15px; }
        .search-expand input { background: transparent; border: none; color: var(--color-noble); font-size: 1rem; width: 200px; outline: none; padding: 11px 0; font-family: var(--font-body); }
        .search-expand input::placeholder { color: rgba(0,0,0,0.35); }
        .search-expand .search-go { background: var(--color-gold); border: none; padding: 10px 16px; cursor: pointer; transition: 0.3s; display: flex; align-items: center; justify-content: center; border-radius: 0 25px 25px 0; }
        .search-expand .search-go:hover { background: #d4b366; }
        .search-expand .search-go svg { width: 16px; height: 16px; fill: var(--color-noble); }
        .adv-search-btn { background: transparent; border: 1px solid rgba(0,0,0,0.15); color: rgba(0,0,0,0.5); padding: 10px 18px; font-size: 0.85rem; font-weight: 700; text-transform: uppercase; letter-spacing: 1.5px; cursor: pointer; transition: 0.3s; font-family: var(--font-body); border-radius: 20px; white-space: nowrap; }
        .adv-search-btn:hover { border-color: var(--color-gold); color: var(--color-gold); }
        /* Advanced Search Panel */
        .adv-panel-overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.6); backdrop-filter: blur(4px); z-index: 3000; }
        .adv-panel-overlay.visible { display: flex; justify-content: center; align-items: flex-start; padding-top: 90px; }
        .adv-panel { background: #fff; width: 600px; max-width: 94vw; border-radius: 12px; box-shadow: 0 25px 60px rgba(0,0,0,0.35); animation: advSlideDown 0.3s ease; max-height: 80vh; display: flex; flex-direction: column; }
        @keyframes advSlideDown { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }
        .adv-panel-header { background: var(--color-noble); padding: 22px 28px; border-radius: 12px 12px 0 0; display: flex; justify-content: space-between; align-items: center; flex-shrink: 0; }
        .adv-panel-header h3 { font-family: var(--font-display); color: #fff; font-size: 1.2rem; margin: 0; }
        .adv-panel-close { background: none; border: none; color: rgba(255,255,255,0.6); font-size: 1.6rem; cursor: pointer; line-height: 1; padding: 5px; }
        .adv-panel-close:hover { color: #fff; }
        .adv-panel-body { padding: 25px 28px; overflow-y: auto; flex: 1; }
        .adv-section { margin-bottom: 22px; }
        .adv-section-title { font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 1.5px; color: var(--color-noble); margin-bottom: 12px; display: flex; align-items: center; gap: 6px; }
        .adv-section-title svg { width: 14px; height: 14px; fill: var(--color-gold); flex-shrink: 0; }
        .adv-keyword { width: 100%; padding: 12px 16px; border: 1px solid #ddd; border-radius: 8px; font-size: 0.95rem; font-family: var(--font-body); outline: none; transition: 0.3s; box-sizing: border-box; }
        .adv-keyword:focus { border-color: var(--color-gold); box-shadow: 0 0 0 3px rgba(201,169,98,0.15); }
        .adv-checks { display: flex; flex-wrap: wrap; gap: 8px; }
        .adv-check { display: flex; align-items: center; gap: 6px; }
        .adv-check input[type="checkbox"] { display: none; }
        .adv-check label { display: flex; align-items: center; gap: 6px; padding: 7px 14px; border: 1px solid #e0e0e0; border-radius: 20px; font-size: 0.8rem; font-weight: 600; color: #555; cursor: pointer; transition: 0.2s; user-select: none; }
        .adv-check label:hover { border-color: var(--color-gold); color: var(--color-noble); }
        .adv-check input:checked + label { background: var(--color-noble); color: #fff; border-color: var(--color-noble); }
        .adv-sub-checks { margin-top: 10px; padding-left: 12px; border-left: 2px solid var(--color-gold); }
        .adv-panel-footer { padding: 18px 28px; border-top: 1px solid #eee; display: flex; gap: 12px; justify-content: flex-end; flex-shrink: 0; background: #fff; border-radius: 0 0 12px 12px; }
        .adv-clear-btn { background: transparent; border: 1px solid #ddd; color: #888; padding: 11px 22px; font-size: 0.85rem; font-weight: 600; cursor: pointer; border-radius: 6px; font-family: var(--font-body); transition: 0.2s; }
        .adv-clear-btn:hover { border-color: #999; color: #333; }
        .adv-search-submit { background: var(--color-noble); color: #fff; border: none; padding: 11px 30px; font-size: 0.85rem; font-weight: 700; text-transform: uppercase; letter-spacing: 1.5px; cursor: pointer; border-radius: 6px; font-family: var(--font-body); transition: 0.2s; }
        .adv-search-submit:hover { background: #1a252f; }
        .search-group { margin-bottom: 35px; }
        .search-group-title { font-family: var(--font-display); font-size: 1.3rem; color: var(--color-noble); padding-bottom: 10px; margin-bottom: 20px; border-bottom: 2px solid var(--color-gold); display: inline-block; }
        .search-group-count { font-family: var(--font-body); font-size: 0.8rem; color: #999; font-weight: 400; margin-left: 8px; }

        .search-results-section { padding: 40px 20px; max-width: var(--site-max-width); margin: 0 auto; background: #FAFAFA; }
        .search-results-title { font-family: var(--font-display); font-size: 1.8rem; color: var(--color-noble); margin-bottom: 30px; text-align: center; }
        .search-results-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 25px; }
        .search-result-card { background: #fff; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.06); cursor: pointer; transition: 0.3s; }
        .search-result-card:hover { transform: translateY(-5px); box-shadow: 0 8px 25px rgba(0,0,0,0.12); }
        .search-result-card img { width: 100%; aspect-ratio: 3/4; object-fit: cover; }
        .search-result-card .info { padding: 15px; text-align: center; }
        .search-result-card h4 { font-family: var(--font-display); font-size: 1rem; color: var(--color-noble); margin: 0 0 5px; }
        .search-result-card span { font-size: 0.8rem; color: var(--color-gold); }
        .page-title-area { background: #FAFAFA; padding: 40px 0 20px; text-align: center; border-bottom: 1px solid rgba(0,0,0,0.06); }
        .cat-title { font-family: var(--font-display); font-size: 2.5rem; text-transform: uppercase; color: var(--color-noble); margin-bottom: 20px; }
        .back-btn { display: inline-block; color: var(--color-gold); font-weight: 700; margin-bottom: 15px; cursor: pointer; border: 1px solid var(--color-gold); padding: 6px 18px; font-size: 0.8rem; transition: 0.3s; }
        .info-guide { background: #fff3cd; border: 1px solid #ffeeba; color: #856404; max-width: 600px; margin: 0 auto 20px; padding: 15px; border-radius: 8px; font-size: 0.9rem; display: flex; align-items: center; justify-content: center; gap: 10px; width: 90%; }
        .grid { max-width: var(--site-max-width); margin: 0 auto; padding: 40px; display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 40px; min-height: 400px; background: #FAFAFA; }
        .card { cursor: pointer; text-align: center; position: relative; }
        .img-box { aspect-ratio: 3/4; overflow: hidden; background: #eee; margin-bottom: 15px; position: relative; }
        .img-box img { width: 100%; height: 100%; object-fit: cover; transition: 0.5s; opacity: 0; animation: fadeIn 0.5s forwards; }
        @keyframes fadeIn { to { opacity: 1; } }
        .card:hover img { transform: scale(1.05); }
        .info-title { font-family: var(--font-display); font-size: 1.3rem; margin-bottom: 5px; color: var(--color-noble); }
        .card-highlight { outline: 3px solid var(--color-gold); outline-offset: -3px; box-shadow: 0 0 20px rgba(201,169,98,0.4); animation: highlightPulse 2s ease-in-out; }
        @keyframes highlightPulse { 0%,100%{ box-shadow: 0 0 20px rgba(201,169,98,0.4); } 50%{ box-shadow: 0 0 35px rgba(201,169,98,0.7); } }
        .heart-btn { position: absolute; top: 10px; right: 10px; width: 35px; height: 35px; background: rgba(255,255,255,0.9); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.3rem; color: #ccc; cursor: pointer; z-index: 10; border: none; }
        .heart-btn.active { color: #e74c3c; }
        .modal { display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); backdrop-filter: blur(5px); }
        .modal-content { height: 100vh; display: grid; grid-template-columns: 3fr 1fr; }
        .slider { position: relative; background: #000; display: flex; align-items: center; justify-content: center; height: 100%; user-select: none; }
        .main-img { max-height: 90vh; max-width: 95%; object-fit: contain; }
        .arrow { position: absolute; top: 50%; transform: translateY(-50%); color: #fff; font-size: 4rem; cursor: pointer; padding: 20px; opacity: 0.7; z-index: 2010; text-shadow: 0 0 10px rgba(0,0,0,0.5); background: transparent; border: none; }
        .arrow:hover { opacity: 1; color: var(--color-gold); }
        .prev { left: 0; } .next { right: 0; }
        .img-counter { position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.6); color: #fff; padding: 5px 15px; border-radius: 20px; font-size: 0.9rem; font-weight: 700; pointer-events: none; }
        .side-info { background: #fff; padding: 60px; display: flex; flex-direction: column; justify-content: center; position: relative; overflow-y: auto; }
        .close { position: absolute; top: 25px; right: 35px; font-size: 45px; color: #fff; cursor: pointer; line-height: 1; z-index: 2020; }
        .private-label { background: #F0F0F0; padding: 80px 40px; text-align: center; color: var(--color-noble); margin-top: 0; }
        .pl-title { font-family: var(--font-display); font-size: 2.5rem; color: var(--color-noble); margin-bottom: 20px; }
        .pl-btn { display: inline-block; background: var(--color-noble); color: #fff; padding: 15px 40px; text-decoration: none; font-weight: 700; border-radius: 4px; }
        
        /* LANGUAGE SWITCH */
        .lang-switch { display: flex; align-items: center; gap: 2px; margin-right: 12px; padding-right: 12px; border-right: 1px solid rgba(0,0,0,0.1); }
        .lang-switch button { background: none; border: none; cursor: pointer; padding: 4px 6px; color: rgba(0,0,0,0.3); font-family: var(--font-body); font-size: 0.75rem; font-weight: 700; letter-spacing: 1.5px; transition: 0.3s; border-radius: 2px; }
        .lang-switch button:hover { color: var(--color-gold); }
        .lang-switch button.active { color: var(--color-gold); background: rgba(201,169,98,0.12); }

        .footer { background: #FFFFFF; color: #666; padding: 70px 40px; border-top: 1px solid #eee; }
        .footer-grid { max-width: var(--site-max-width); margin: 0 auto; display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 4rem; }
        /* FOOTER 3-COL */
        .footer h4 { color: var(--color-noble); font-family: var(--font-display); font-size: 1rem; text-transform: uppercase; letter-spacing: 2px; margin-bottom: 18px; }
        .footer p { font-size: 0.85rem; line-height: 1.8; color: #777; }
        .footer ul { list-style: none; }
        .footer ul li { margin-bottom: 10px; font-size: 0.85rem; line-height: 1.6; }
        .footer ul li strong { color: #555; }
        .footer a { color: #777; text-decoration: none; transition: 0.3s; }
        .footer a:hover { color: var(--color-gold); }
        .footer-bottom { text-align: center; margin-top: 50px; padding-top: 30px; border-top: 1px solid #eee; font-size: 0.8rem; color: #888; }
        .footer-links { display: flex; flex-direction: column; gap: 10px; }
        .footer-links a { display: flex; align-items: center; gap: 8px; }
        .footer-links svg { width: 14px; height: 14px; fill: var(--color-gold); flex-shrink: 0; }
        .footer-service-list { list-style: none; }
        .footer-social { display: flex; gap: 15px; flex-wrap: wrap; margin-top: 20px; }
        .footer-social a { display: flex; align-items: center; gap: 8px; color: #777; text-decoration: none; font-size: 0.85rem; transition: 0.3s; }
        .footer-social a:hover { color: var(--color-gold); }
        .footer-social a:hover svg { fill: var(--color-gold); }
        .footer-social svg { width: 18px; height: 18px; fill: #999; transition: 0.3s; flex-shrink: 0; }
        .footer-service-list li { padding-left: 18px; position: relative; margin-bottom: 8px; font-size: 0.85rem; color: #888; }
        .footer-service-list li::before { content: '›'; position: absolute; left: 0; color: var(--color-gold); font-weight: 700; }
        /* T&C OVERLAY */
        .tc-overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.85); backdrop-filter: blur(5px); z-index: 6000; overflow-y: auto; }
        .tc-overlay.visible { display: block; }
        .tc-container { max-width: 860px; margin: 40px auto; padding: 50px; background: #fff; border-radius: 12px; box-shadow: 0 25px 60px rgba(0,0,0,0.4); position: relative; }
        .tc-close { position: fixed; top: 20px; right: 30px; background: rgba(0,0,0,0.6); border: none; color: #fff; width: 44px; height: 44px; border-radius: 50%; font-size: 1.5rem; cursor: pointer; z-index: 6001; display: flex; align-items: center; justify-content: center; transition: 0.3s; }
        .tc-close:hover { background: var(--color-gold); color: var(--color-noble); }
        .tc-container h1 { font-family: var(--font-display); font-size: 2rem; color: var(--color-noble); margin-bottom: 5px; }
        .tc-container .tc-subtitle { color: var(--color-gold); font-size: 0.85rem; font-weight: 600; letter-spacing: 1px; text-transform: uppercase; margin-bottom: 8px; }
        .tc-container .tc-updated { color: #999; font-size: 0.8rem; margin-bottom: 30px; }
        .tc-container h2 { font-family: var(--font-display); font-size: 1.15rem; color: var(--color-noble); margin: 28px 0 10px; padding-bottom: 6px; border-bottom: 1px solid #eee; }
        .tc-container p, .tc-container li { font-size: 0.88rem; line-height: 1.8; color: #555; }
        .tc-container ul { padding-left: 20px; margin: 8px 0; }
        .tc-container li { margin-bottom: 5px; }
        .tc-contact { background: var(--color-noble); color: #fff; padding: 25px 30px; border-radius: 8px; margin-top: 30px; }
        .tc-contact strong { color: var(--color-gold); }

        .float-cart { position: fixed; bottom: 20px; right: 20px; z-index: 999; background: #25D366; color: #fff; padding: 12px 20px; border-radius: 50px; font-weight: 700; display: none; align-items: center; gap: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.3); border: none; cursor: pointer; font-family: var(--font-body); font-size: 1rem; }
        .float-cart:hover { background: #1da851; transform: scale(1.05); }
        .badges { display: flex; gap: 15px; margin-bottom: 30px; border-bottom: 1px solid #eee; padding-bottom: 20px; }
        .badge-item { display: flex; flex-direction: column; align-items: center; text-align: center; gap: 5px; font-size: 0.7rem; color: #666; font-weight: 600; text-transform: uppercase; }
        .badge-icon { font-size: 1.5rem; color: var(--color-noble); }
        /* FIX #11: Styled toast notification */
        .toast-notification { position: fixed; top: 80px; left: 50%; transform: translateX(-50%) translateY(-20px); background: var(--color-noble); color: #fff; padding: 12px 28px; border-radius: 8px; font-size: 0.9rem; font-weight: 600; z-index: 9999; opacity: 0; transition: opacity 0.3s, transform 0.3s; pointer-events: none; box-shadow: 0 4px 15px rgba(0,0,0,0.2); }
        .toast-notification.visible { opacity: 1; transform: translateX(-50%) translateY(0); }
        /* FIX #1: Carousel styles */
        .carousel-section { width: 100%; background: #000; position: relative; overflow: hidden; max-height: 500px; }
        .ss-slide { display: none; position: relative; cursor: pointer; }
        .ss-slide.active { display: block; }
        .ss-slide.ss-broken { display: none !important; }
        .ss-slide img { width: 100%; max-height: 500px; object-fit: cover; object-position: center top; }
        .ss-slide-info { position: absolute; bottom: 0; left: 0; right: 0; background: linear-gradient(transparent, rgba(0,0,0,0.7)); padding: 30px 20px 20px; text-align: center; }
        .ss-slide-info h4 { color: #fff; font-family: var(--font-display); font-size: 1.2rem; }
        .ss-slide-info span { color: var(--color-gold); font-size: 0.8rem; }
        .ss-nav { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(255,255,255,0.1); border: none; color: #fff; font-size: 2rem; width: 50px; height: 50px; border-radius: 50%; cursor: pointer; z-index: 10; }
        .ss-nav:hover { background: rgba(255,255,255,0.2); }
        .ss-nav.ss-prev { left: 15px; }
        .ss-nav.ss-next { right: 15px; }
        .ss-dots { position: absolute; bottom: 10px; right: 15px; background: rgba(0,0,0,0.5); color: #fff; padding: 4px 12px; border-radius: 15px; font-size: 0.8rem; }
        @media (max-width: 768px) {
            .header-inner { padding: 0 15px; }
            .brand-bar { padding: 10px 0 8px; }
            .brand-bar a { font-size: 1.3rem; letter-spacing: 4px; }
            .toolbar-row { flex-wrap: wrap; gap: 8px; padding: 8px 0; }
            .search-expand.open { max-width: 200px; }
            .search-expand input { width: 120px; }
            .adv-search-btn { font-size: 0.6rem; padding: 6px 10px; }
            .adv-panel { width: 100%; max-width: 100%; border-radius: 0; max-height: 100vh; }
            .adv-panel-header { border-radius: 0; }
            .adv-panel-footer { border-radius: 0; }
            .toolbar-right { gap: 8px; }
            .soc-icons { gap: 8px; }
            .soc-icons .social-icon svg { width: 16px; height: 16px; }
            .nav-list { gap: 10px; justify-content: center; } .nav-list a { font-size: 0.75rem; padding: 5px; }
            .grid { padding: 20px 10px; gap: 15px; grid-template-columns: 1fr 1fr; }
            .modal-content { display: flex; flex-direction: column; height: 100%; overflow-y: scroll; }
            .slider { height: 50vh; min-height: 300px; background: #000; flex-shrink: 0; }
            .side-info { padding: 30px 20px; height: auto; display: block !important; }
            .arrow { font-size: 3rem; padding: 15px; background: rgba(0,0,0,0.3); border-radius: 50%; width: 50px; height: 50px; display: flex; align-items: center; justify-content: center; }
            .prev { left: 10px; } .next { right: 10px; }
            .footer-grid { grid-template-columns: 1fr; gap: 30px; }
            .search-results-grid { grid-template-columns: 1fr 1fr; gap: 15px; }
            .carousel-section { max-height: 350px; }
            .ss-slide img { max-height: 350px; }
        }
        /* HERO SECTION */
        .hero { background: linear-gradient(135deg, #F0F0F0 0%, #E8E8E8 100%); color: var(--color-noble); padding: 40px 20px; text-align: center; position: relative; }
        .hero-content { position: relative; z-index: 1; max-width: 1200px; margin: 0 auto; }
        .hero h2 { font-family: var(--font-display); font-size: 1.8rem; margin-bottom: 10px; text-transform: uppercase; letter-spacing: 2px; }
        .hero-tagline { color: var(--color-gold); font-size: 0.9rem; letter-spacing: 3px; text-transform: uppercase; margin-bottom: 15px; font-weight: 600; }
        .hero p { display: none; }
        .hero-stats { display: flex; justify-content: center; gap: 50px; flex-wrap: wrap; margin-top: 20px; }
        .stat-item { text-align: center; }
        .stat-num { font-family: var(--font-display); font-size: 1.8rem; color: var(--color-gold); display: block; }
        .stat-label { font-size: 0.7rem; text-transform: uppercase; letter-spacing: 1px; color: #888; margin-top: 3px; }
        @media (max-width: 768px) { .hero { padding: 30px 15px; } .hero h2 { font-size: 1.4rem; } .hero-stats { gap: 25px; } .stat-num { font-size: 1.5rem; } }
        /* AUTH UI */
        .auth-btn { background: transparent; border: 1px solid var(--color-noble); color: var(--color-noble); padding: 10px 24px; font-size: 0.95rem; font-weight: 700; text-transform: uppercase; letter-spacing: 1.5px; cursor: pointer; transition: 0.3s; font-family: var(--font-body); border-radius: 3px; white-space: nowrap; }
        .auth-btn:hover { background: var(--color-noble); color: #fff; }
        .user-menu { display: flex; align-items: center; gap: 12px; }
        .user-greeting { color: var(--color-noble); font-size: 0.95rem; font-weight: 600; letter-spacing: 1px; text-transform: uppercase; max-width: 180px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
        .logout-btn { background: transparent; border: 1px solid rgba(0,0,0,0.15); color: var(--color-noble); padding: 6px 14px; font-size: 0.7rem; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; cursor: pointer; transition: 0.3s; font-family: var(--font-body); border-radius: 3px; }
        .logout-btn:hover { border-color: #e74c3c; color: #e74c3c; }
        /* AUTH MODAL */
        .auth-overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.85); backdrop-filter: blur(8px); z-index: 5000; justify-content: center; align-items: center; }
        .auth-overlay.visible { display: flex; }
        .auth-card { background: #fff; width: 420px; max-width: 92vw; border-radius: 8px; overflow: hidden; box-shadow: 0 25px 60px rgba(0,0,0,0.4); animation: authSlideUp 0.3s ease; }
        @keyframes authSlideUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        .auth-header { background: var(--color-noble); padding: 30px; text-align: center; }
        .auth-header h3 { font-family: var(--font-display); color: #fff; font-size: 1.4rem; margin-bottom: 5px; }
        .auth-header p { color: rgba(255,255,255,0.5); font-size: 0.8rem; }
        .auth-tabs { display: flex; border-bottom: 1px solid #eee; }
        .auth-tab { flex: 1; padding: 14px; text-align: center; font-size: 0.85rem; font-weight: 700; text-transform: uppercase; letter-spacing: 1.5px; cursor: pointer; color: #aaa; border-bottom: 2px solid transparent; transition: 0.3s; background: none; border-top: none; border-left: none; border-right: none; font-family: var(--font-body); }
        .auth-tab.active { color: var(--color-noble); border-bottom-color: var(--color-gold); }
        .auth-body { padding: 30px; }
        .auth-field { margin-bottom: 18px; }
        .auth-field label { display: block; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; color: #666; margin-bottom: 6px; }
        .auth-field input { width: 100%; padding: 12px 15px; border: 1px solid #ddd; border-radius: 4px; font-size: 0.95rem; font-family: var(--font-body); transition: 0.3s; outline: none; }
        .auth-field input:focus { border-color: var(--color-gold); box-shadow: 0 0 0 3px rgba(201,169,98,0.15); }
        .auth-submit { width: 100%; padding: 14px; background: var(--color-noble); color: #fff; border: none; font-size: 0.9rem; font-weight: 700; text-transform: uppercase; letter-spacing: 2px; cursor: pointer; transition: 0.3s; font-family: var(--font-body); border-radius: 4px; }
        .auth-submit:hover { background: #1a252f; }
        .auth-submit:disabled { opacity: 0.5; cursor: not-allowed; }
        .auth-divider { display: flex; align-items: center; gap: 15px; margin: 20px 0; color: #ccc; font-size: 0.8rem; text-transform: uppercase; letter-spacing: 1px; }
        .auth-divider::before, .auth-divider::after { content: ''; flex: 1; border-top: 1px solid #eee; }
        .auth-forgot { text-align: right; margin: -5px 0 15px; }
        .auth-forgot a { color: var(--color-gold); font-size: 0.78rem; text-decoration: none; font-weight: 500; transition: 0.3s; }
        .auth-forgot a:hover { color: var(--color-noble); text-decoration: underline; }
        .google-btn { width: 100%; padding: 12px; background: #fff; border: 1px solid #ddd; border-radius: 4px; font-size: 0.9rem; font-weight: 600; cursor: pointer; font-family: var(--font-body); display: flex; align-items: center; justify-content: center; gap: 10px; transition: 0.3s; color: #333; }
        .google-btn:hover { background: #f8f8f8; border-color: #bbb; }
        .google-btn svg { width: 18px; height: 18px; }
        .auth-error { background: #fff5f5; border: 1px solid #fed7d7; color: #c53030; padding: 10px 15px; border-radius: 4px; font-size: 0.85rem; margin-bottom: 15px; display: none; }
        .auth-close { position: absolute; top: 15px; right: 20px; background: none; border: none; color: rgba(255,255,255,0.6); font-size: 1.8rem; cursor: pointer; z-index: 5001; line-height: 1; }
        .auth-close:hover { color: #fff; }
        /* PRICE TAGS */
        .price-tag { font-family: var(--font-display); font-size: 1.1rem; color: var(--color-gold); font-weight: 700; margin-top: 5px; }
        .price-login-hint { font-size: 0.75rem; color: #aaa; margin-top: 5px; cursor: pointer; text-decoration: underline; text-decoration-color: rgba(170,170,170,0.3); }
        .price-login-hint:hover { color: var(--color-gold); }
        .modal-price { font-family: var(--font-display); font-size: 2rem; color: var(--color-gold); margin: 15px 0; }
        .modal-price-hint { color: #999; font-size: 0.85rem; cursor: pointer; margin: 10px 0; }
        .modal-price-hint:hover { color: var(--color-gold); }
        .price-tier { font-size: 0.7rem; color: #999; text-transform: uppercase; letter-spacing: 1px; }
        /* COOKIE BANNER */
        .cookie-banner { position: fixed; bottom: 0; left: 0; right: 0; background: #FFFFFF; color: var(--color-noble); padding: 18px 25px; z-index: 8000; display: none; align-items: center; justify-content: center; gap: 20px; flex-wrap: wrap; box-shadow: 0 -2px 15px rgba(0,0,0,0.08); font-size: 0.85rem; }
        .cookie-banner.visible { display: flex; }
        .promo-overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.75); backdrop-filter: blur(6px); z-index: 7000; justify-content: center; align-items: center; }
        .promo-overlay.visible { display: flex; }
        .promo-card { background: #fff; width: 480px; max-width: 92vw; border-radius: 12px; overflow: hidden; box-shadow: 0 30px 80px rgba(0,0,0,0.5), 0 0 0 1px rgba(201,169,98,0.3); animation: promoEntrance 0.5s ease; text-align: center; position: relative; }
        @keyframes promoEntrance { 0%{ opacity:0; transform:scale(0.8) translateY(30px); } 100%{ opacity:1; transform:scale(1) translateY(0); } }
        .promo-top { background: linear-gradient(135deg, #0f0f1a 0%, #1a1a2e 40%, #2d2d44 100%); padding: 45px 30px 30px; position: relative; overflow: hidden; }
        .promo-top::before { content:''; position:absolute; top:-50%; left:-50%; width:200%; height:200%; background: radial-gradient(circle at 50% 50%, rgba(201,169,98,0.15) 0%, transparent 60%); animation: promoGlow 3s ease-in-out infinite; }
        @keyframes promoGlow { 0%,100%{ opacity:0.5; transform:scale(1); } 50%{ opacity:1; transform:scale(1.1); } }
        .promo-top h3 { font-family: var(--font-display); color: var(--color-gold); font-size: 3.2rem; margin-bottom: 5px; position: relative; text-shadow: 0 0 30px rgba(201,169,98,0.4); letter-spacing: 3px; }
        .promo-top p { color: rgba(255,255,255,0.8); font-size: 1rem; position: relative; letter-spacing: 2px; text-transform: uppercase; font-weight: 600; }
        .promo-badge { display: inline-block; background: var(--color-gold); color: #fff; padding: 6px 18px; border-radius: 20px; font-size: 0.75rem; font-weight: 700; letter-spacing: 1.5px; text-transform: uppercase; margin-top: 12px; position: relative; animation: promoPulse 2s ease-in-out infinite; }
        @keyframes promoPulse { 0%,100%{ box-shadow: 0 0 0 0 rgba(201,169,98,0.4); } 50%{ box-shadow: 0 0 0 10px rgba(201,169,98,0); } }
        .promo-body { padding: 30px 35px 25px; }
        .promo-body p { color: #555; font-size: 0.95rem; margin-bottom: 22px; line-height: 1.6; }
        .promo-input { width: 100%; padding: 16px 18px; border: 2px solid #e8e8e8; border-radius: 6px; font-size: 1rem; font-family: var(--font-body); margin-bottom: 14px; transition: border-color 0.3s; }
        .promo-input:focus { outline: none; border-color: var(--color-gold); box-shadow: 0 0 0 3px rgba(201,169,98,0.15); }
        .promo-submit { width: 100%; padding: 16px; background: linear-gradient(135deg, var(--color-gold) 0%, #b8963a 100%); color: #fff; border: none; border-radius: 6px; font-size: 0.95rem; font-weight: 700; letter-spacing: 1.5px; text-transform: uppercase; cursor: pointer; font-family: var(--font-body); transition: 0.3s; box-shadow: 0 4px 15px rgba(201,169,98,0.4); }
        .promo-submit:hover { transform: translateY(-1px); box-shadow: 0 6px 20px rgba(201,169,98,0.5); }
        .promo-close { position: absolute; top: 14px; right: 18px; background: none; border: none; color: rgba(255,255,255,0.4); font-size: 1.8rem; cursor: pointer; transition: 0.3s; z-index: 1; line-height: 1; }
        .promo-close:hover { color: #fff; transform: scale(1.2); }
        .promo-skip { display: block; margin-top: 14px; color: #aaa; font-size: 0.8rem; cursor: pointer; background: none; border: none; font-family: var(--font-body); transition: 0.3s; }
        .promo-skip:hover { color: #666; }
        .cookie-banner p { max-width: 700px; line-height: 1.5; color: #555; }
        .cookie-banner a { color: var(--color-noble); }
        .cookie-accept { background: var(--color-noble); color: #fff; border: none; padding: 10px 25px; font-weight: 700; font-size: 0.85rem; cursor: pointer; border-radius: 3px; font-family: var(--font-body); text-transform: uppercase; letter-spacing: 1px; white-space: nowrap; }
        .cookie-accept:hover { background: #d4b366; }
        @media (max-width: 768px) {
            .auth-card { width: 100%; max-width: 100%; border-radius: 0; min-height: 100vh; display: flex; flex-direction: column; }
            .auth-body { flex: 1; }
            .user-greeting { max-width: 80px; font-size: 0.7rem; }
            .auth-btn { padding: 6px 12px; font-size: 0.7rem; }
        }
        /* SHOWCASE */
        .showcase-section { width: 100%; background: #FAFAFA; padding: 30px 0; }
        .showcase-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; padding: 20px; max-width: var(--site-max-width); margin: 0 auto; }
        .showcase-item { position: relative; aspect-ratio: 3/4; overflow: hidden; cursor: pointer; border-radius: 6px; }
        .showcase-item:focus-visible { outline: 3px solid var(--color-gold); outline-offset: -3px; }
        .showcase-item img { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; object-position: top; transition: opacity 1s ease, transform 0.5s ease; opacity: 0; }
        .showcase-item img.active { opacity: 1; }
        .showcase-item:hover img.active { transform: scale(1.05); }
        .showcase-overlay { position: absolute; top: 0; left: 0; right: 0; background: linear-gradient(rgba(0,0,0,0.7), transparent); padding: 20px 20px 40px; z-index: 2; }
        .showcase-overlay span { color: #fff; font-family: var(--font-display); font-size: 1.1rem; text-transform: uppercase; letter-spacing: 2px; }
        .showcase-hero-img { width: calc(100% - 40px); display: block; max-height: 600px; object-fit: cover; object-position: center; border-radius: 6px; margin: 20px auto 0; max-width: var(--site-max-width); }
        @media (max-width: 768px) { .showcase-grid { grid-template-columns: repeat(2, 1fr); gap: 12px; padding: 12px; } .showcase-hero-img { width: calc(100% - 24px); margin: 12px auto 0; max-height: 300px; } .showcase-overlay span { font-size: 0.8rem; letter-spacing: 1px; } .showcase-overlay { padding: 15px 15px 30px; } }
    </style>
</head>
<body>
    <header class="header"><div class="header-inner">
        <div class="brand-bar">
            <a href="index.html"><span class="brand-p">P</span>AGUS MENSWEAR</a>
        </div>
        <div class="toolbar-row">
            <div class="search-area" role="search">
                <div class="search-expand" id="searchExpand">
                    <input type="text" id="siteSearch" placeholder="Search products..." data-tp="search_placeholder" aria-label="Search products" onkeypress="if(event.key==='Enter')doSiteSearch()">
                    <button class="search-go" onclick="doSiteSearch()" aria-label="Search"><svg viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg></button>
                </div>
                <button class="search-icon-btn" onclick="toggleSearchBar()" aria-label="Search" title="Search">
                    <svg viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
                </button>
                <button class="adv-search-btn" onclick="openAdvancedSearch()" data-t="adv_search">Advanced Search</button>
            </div>
            <div class="toolbar-right">
                <div class="lang-switch" id="langBar">
                    <button onclick="setLang('en')" id="langBtn_en" title="English">EN</button>
                    <button onclick="setLang('it')" id="langBtn_it" title="Italiano">IT</button>
                    <button onclick="setLang('de')" id="langBtn_de" title="Deutsch">DE</button>
                    <button onclick="setLang('fr')" id="langBtn_fr" title="Français">FR</button>
                </div>
                <div id="authArea">
                    <button class="auth-btn" onclick="openAuthModal('login')" data-t="login">LOGIN</button>
                </div>
                <div class="soc-icons">
<a href="https://www.instagram.com/pagus_menswear/" target="_blank" rel="noopener" class="social-icon" title="Instagram"><svg viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg></a>
<a href="#" id="waLink" target="_blank" rel="noopener" class="social-icon" title="WhatsApp"><svg viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg></a>
<a href="https://www.linkedin.com/company/pagusmenswear/" target="_blank" rel="noopener" class="social-icon" title="LinkedIn"><svg viewBox="0 0 24 24"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 01-2.063-2.065 2.064 2.064 0 112.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg></a>
<a href="https://www.facebook.com/pagusmenswear/" target="_blank" rel="noopener" class="social-icon" title="Facebook"><svg viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg></a>
                </div>
            </div>
        </div>
        <nav><ul class="nav-list">
                <li><a href="?category=Wedding Suits">Wedding Suits</a></li>
                <li><a href="?category=Formal Suits">Formal Suits</a></li>
                <li><a href="?category=Shirts">Shirts</a></li>
                <li><a href="?category=Children">Children</a></li>
                <li><a href="?category=Jackets">Jackets</a></li>
                <li><a href="?category=Discounted Products">Discounted Products</a></li>
        </ul></nav>
    </div></header>

    <!-- FIX #1: Carousel HTML elements - were completely missing -->
    <section class="carousel-section" id="carouselSection" style="display:none;">
        <div id="slideshowTrack" style="position:relative;"></div>
        <button class="ss-nav ss-prev" onclick="ssMove(-1)" aria-label="Previous slide">&#10094;</button>
        <button class="ss-nav ss-next" onclick="ssMove(1)" aria-label="Next slide">&#10095;</button>
        <div id="slideshowDots" class="ss-dots"></div>
    </section>

    <!-- SHOWCASE -->
    <section class="showcase-section" id="showcaseSection">
        <img src="images/showcase_hero.webp" alt="PAGUS Collection" class="showcase-hero-img">
        <div class="showcase-grid" id="showcaseGrid"></div>
    </section>
    
    <!-- HERO -->
    <section class="hero" id="heroSection">
        <div class="hero-content">
            <div class="hero-tagline" data-t="hero_tagline">B2B Wholesale Menswear</div>
            <h2 data-t="hero_title">Ceremonial, Formal &amp; Casual Wear</h2>
            <p data-t="hero_desc">Direct from manufacturer in İzmir, Turkey. Pagus specializes in ceremonial, formal &amp; casual menswear for retailers and wholesalers worldwide. Minimum order: 50 pieces.</p>
            <div class="hero-stats">
                <div class="stat-item"><span class="stat-num">15+</span><span class="stat-label" data-t="stat_years">Years Experience</span></div>
                <div class="stat-item"><span class="stat-num">50+</span><span class="stat-label" data-t="stat_countries">Countries</span></div>
                <div class="stat-item"><span class="stat-num">500+</span><span class="stat-label" data-t="stat_partners">Active Partners</span></div>
            </div>
        </div>
    </section>
    
    <section class="page-title-area" id="pageTitleArea" style="display:none;">
        <div id="back" class="back-btn" onclick="goBack()" style="display:none;">&#8592; <span data-t="back_btn">BACK</span></div>
        <h1 class="cat-title" id="pTitle" data-t="collection">COLLECTION</h1>
        <div class="info-guide" id="infoGuide"><span>&#128161;</span><b id="guideText" data-t="guide_tap">Tap heart to create list.</b></div>
    </section>
    <div class="grid" id="pGrid"><div style="grid-column:1/-1; text-align:center; padding:50px; color:#999;" data-t="loading">Loading Collection...</div></div>
    <div id="searchResults" style="display:none;"></div>
    <section class="private-label" id="privateLabelSection"><div class="pl-content">
        <h2 class="pl-title" data-t="pl_title">YOUR BRAND, OUR PRODUCTION</h2>
        <p style="color:#777; margin-bottom:35px; max-width:800px; margin-left:auto; margin-right:auto; text-align:center; line-height:1.8; font-size:0.95rem;" data-t="pl_desc">Behind every suit that carries your name, there's a story of craftsmanship that begins in İzmir — Turkey's textile heartland. For over 15 years, Pagus Menswear has been the silent force behind some of Europe's most respected menswear labels, engineering confidence into every lapel, seam, and stitch. Our Private Label service is a true partnership. You define the design, fabric, fit, and finishing — we handle everything else. Our in-house pattern makers and master tailors work as a dedicated extension of your brand, combining traditional tailoring techniques with modern production capacity. From ceremonial suits and tuxedos to business wear and smart-casual blazers, every production run follows rigorous quality protocols. We source premium fabrics from certified Turkish and Italian mills, and deliver your garments labeled, packaged, and retail-ready. No hidden fees. No compromise. Your labels, your packaging, your identity — backed by decades of textile mastery and trusted by partners across Italy, Germany, France, and beyond.</p>
        <a href="#" id="plWaLink" target="_blank" class="pl-btn" data-t="pl_btn">START PRODUCTION</a>
    </div></section>
    <button id="floatCart" class="float-cart" onclick="sendListToWhatsapp()">
        <svg style="width:20px;height:20px;fill:white;" viewBox="0 0 24 24"><path d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.893 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 3.891 1.746 5.634l-.999 3.648 3.742-.981zm11.387-5.464c-.074-.124-.272-.198-.57-.347-.297-.149-1.758-.868-2.031-.967-.272-.099-.47-.149-.669.149-.198.297-.768.967-.941 1.165-.173.198-.347.223-.644.074-.297-.149-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.521.151-.172.2-.296.3-.495.099-.198.05-.372-.025-.521-.075-.148-.669-1.611-.916-2.206-.242-.579-.487-.501-.669-.51l-.57-.01c-.198 0-.52.074-.792.372s-1.04 1.016-1.04 2.479 1.065 2.876 1.213 3.074c.149.198 2.095 3.2 5.076 4.487.709.306 1.263.489 1.694.626.712.226 1.36.194 1.872.118.571-.085 1.758-.719 2.006-1.413.248-.695.248-1.29.173-1.414z"/></svg>
        <span data-t="send_text">SEND</span> <span id="cartCount">0</span>
    </button>
    <!-- FIX #11: Toast notification element -->
    <div id="toastNotification" class="toast-notification" role="alert" aria-live="polite"></div>

    <!-- AUTH MODAL -->
    <div class="auth-overlay" id="authOverlay" onclick="if(event.target===this)closeAuthModal()">
        <button class="auth-close" onclick="closeAuthModal()" aria-label="Close">&times;</button>
        <div class="auth-card">
            <div class="auth-header">
                <h3>PAGUS</h3>
                <p data-t="auth_subtitle">B2B Wholesale Portal</p>
            </div>
            <div class="auth-tabs">
                <button class="auth-tab active" onclick="switchAuthTab('login')" id="tabLogin" data-t="login_tab">Login</button>
                <button class="auth-tab" onclick="switchAuthTab('register')" id="tabRegister" data-t="register_tab">Register</button>
            </div>
            <div class="auth-body">
                <div id="authError" class="auth-error"></div>
                <!-- LOGIN FORM -->
                <div id="loginForm">
                    <div class="auth-field">
                        <label for="loginEmail" data-t="email_label">Email</label>
                        <input type="email" id="loginEmail" placeholder="your@email.com" autocomplete="email">
                    </div>
                    <div class="auth-field">
                        <label for="loginPass" data-t="password_label">Password</label>
                        <input type="password" id="loginPass" placeholder="••••••••" autocomplete="current-password" onkeypress="if(event.key==='Enter')doLogin()">
                    </div>
                    <div class="auth-forgot"><a href="javascript:void(0)" onclick="showForgotPassword()" data-t="forgot_pw">Forgot your password?</a></div>
                    <button class="auth-submit" onclick="doLogin()" id="loginBtn" data-t="login">LOGIN</button>
                    <div class="auth-divider" data-t="or_divider">or</div>
                    <button class="google-btn" onclick="doGoogleLogin()">
                        <svg viewBox="0 0 24 24"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92a5.06 5.06 0 0 1-2.2 3.32v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.1z" fill="#4285F4"/><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"/><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/></svg>
                        <span data-t="google_btn">Continue with Google</span>
                    </button>
                </div>
                <!-- FORGOT PASSWORD FORM -->
                <div id="forgotForm" style="display:none;">
                    <p style="color:#666; font-size:0.85rem; margin-bottom:20px;" data-t="forgot_desc">Enter your email address and we'll send you a link to reset your password.</p>
                    <div class="auth-field">
                        <label for="forgotEmail" data-t="email_label">Email</label>
                        <input type="email" id="forgotEmail" placeholder="your@email.com" autocomplete="email" onkeypress="if(event.key==='Enter')doForgotPassword()">
                    </div>
                    <button class="auth-submit" onclick="doForgotPassword()" id="forgotBtn" data-t="send_reset">SEND RESET LINK</button>
                    <div class="auth-forgot" style="text-align:center; margin-top:15px;"><a href="javascript:void(0)" onclick="hideForgotPassword()" data-t="back_to_login">← Back to Login</a></div>
                </div>
                <!-- REGISTER FORM -->
                <div id="registerForm" style="display:none;">
                    <div class="auth-field">
                        <label for="regName" data-t="company_label">Company / Name</label>
                        <input type="text" id="regName" placeholder="Your company or full name" data-tp="company_ph" autocomplete="name">
                    </div>
                    <div class="auth-field">
                        <label for="regEmail" data-t="email_label">Email</label>
                        <input type="email" id="regEmail" placeholder="your@email.com" autocomplete="email">
                    </div>
                    <div class="auth-field">
                        <label for="regPass" data-t="password_label">Password</label>
                        <input type="password" id="regPass" placeholder="Min. 6 characters" data-tp="min6_ph" autocomplete="new-password">
                    </div>
                    <div class="auth-field">
                        <label for="regPass2" data-t="confirm_pw">Confirm Password</label>
                        <input type="password" id="regPass2" placeholder="Repeat password" data-tp="repeat_ph" autocomplete="new-password" onkeypress="if(event.key==='Enter')doRegister()">
                    </div>
                    <button class="auth-submit" onclick="doRegister()" id="regBtn" data-t="create_account">CREATE ACCOUNT</button>
                    <div class="auth-divider" data-t="or_divider">or</div>
                    <button class="google-btn" onclick="doGoogleLogin()">
                        <svg viewBox="0 0 24 24"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92a5.06 5.06 0 0 1-2.2 3.32v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.1z" fill="#4285F4"/><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"/><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/></svg>
                        <span data-t="google_btn">Continue with Google</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- PROMO POPUP -->
    <div class="promo-overlay" id="promoOverlay" onclick="if(event.target===this)closePromo()">
        <div class="promo-card">
            <button class="promo-close" onclick="closePromo()">&times;</button>
            <div class="promo-top">
                <h3 data-t="promo_discount">5% OFF</h3>
                <p data-t="promo_subtitle">Your First Order</p>
                <span class="promo-badge" data-t="promo_badge">Limited Offer</span>
            </div>
            <div class="promo-body">
                <p data-t="promo_desc">Register now and get 5% discount on your first wholesale order.</p>
                <input type="email" class="promo-input" id="promoEmail" placeholder="your@email.com" onkeypress="if(event.key==='Enter')submitPromo()">
                <button class="promo-submit" onclick="submitPromo()" data-t="promo_btn">REGISTER & GET DISCOUNT</button>
                <button class="promo-skip" onclick="closePromo()" data-t="promo_skip">No thanks, maybe later</button>
            </div>
        </div>
    </div>

    <!-- COOKIE BANNER -->
    <div class="cookie-banner" id="cookieBanner">
        <p data-t="cookie_text">We use essential cookies and local storage to improve your experience. By continuing, you accept our <a href="privacy.html">Privacy Policy</a>.</p>
        <button class="cookie-accept" onclick="acceptCookies()" data-t="accept_btn">ACCEPT</button>
    </div>
    <div id="pModal" class="modal" role="dialog" aria-modal="true" aria-label="Product detail">
        <span class="close" onclick="closeModal()" role="button" aria-label="Close modal" tabindex="0">&#215;</span>
        <div class="modal-content">
            <div class="slider" id="sliderArea">
                <button class="arrow prev" onclick="move(-1)" aria-label="Previous image">&#10094;</button>
                <img id="mImg" class="main-img" src="" alt="Product Detail" onclick="openFullscreen(this.src)" style="cursor:zoom-in">
                <button class="arrow next" onclick="move(1)" aria-label="Next image">&#10095;</button>
                <div class="img-counter" id="imgCount">1/4</div>
            </div>
            <div class="side-info">
                <h2 id="mCode" style="font-family:var(--font-display); font-size:2.5rem; margin:15px 0 10px;">CODE</h2>
                <div id="modalPriceArea" style="margin-bottom:15px;"></div>
                <div class="badges"><div class="badge-item"><span class="badge-icon">🧵</span><span data-t="badge_fabric">Premium Fabric</span></div><div class="badge-item"><span class="badge-icon">🇹🇷</span><span data-t="badge_turkey">Made in Turkey</span></div><div class="badge-item"><span class="badge-icon">📦</span><span data-t="badge_wholesale">Wholesale Only</span></div></div>
                <p style="color:#555; margin-bottom:40px; font-size:1rem;" data-t="modal_desc">Premium quality fabric available for bulk orders.</p>
                <a id="wp" href="#" target="_blank" style="background:var(--color-gold); color:#fff; padding:18px; text-align:center; font-weight:700; letter-spacing:1px; border-radius:4px; box-shadow: 0 10px 20px rgba(201,169,98,0.3); text-decoration:none;" data-t="ask_wa">ASK PRICE VIA WHATSAPP</a>
            </div>
        </div>
    </div>
    <!-- FIX #9: Fullscreen lightbox - separated background click layer from image -->
    <div id="fullscreenOverlay" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,0.97);z-index:99999;justify-content:center;align-items:center;overflow:hidden;touch-action:none;">
        <div id="fullscreenBg" style="position:absolute;inset:0;"></div>
        <div id="fsZoomContainer" style="position:relative;z-index:1;width:90vw;height:90vh;display:flex;align-items:center;justify-content:center;overflow:hidden;touch-action:none;">
            <img id="fullscreenImg" src="" alt="Product detail fullscreen" style="max-width:100%;max-height:100%;object-fit:contain;border-radius:4px;transform-origin:center center;transition:none;will-change:transform;user-select:none;-webkit-user-drag:none;pointer-events:auto;">
        </div>
        <button onclick="event.stopPropagation();moveFullscreen(-1)" aria-label="Previous image" style="position:absolute;left:20px;top:50%;transform:translateY(-50%);background:rgba(255,255,255,0.15);border:none;color:#fff;font-size:2rem;width:50px;height:50px;border-radius:50%;cursor:pointer;z-index:3;">&#8249;</button>
        <button onclick="event.stopPropagation();moveFullscreen(1)" aria-label="Next image" style="position:absolute;right:20px;top:50%;transform:translateY(-50%);background:rgba(255,255,255,0.15);border:none;color:#fff;font-size:2rem;width:50px;height:50px;border-radius:50%;cursor:pointer;z-index:3;">&#8250;</button>
        <button onclick="closeFullscreen()" aria-label="Close fullscreen" style="position:absolute;top:20px;right:20px;background:rgba(255,255,255,0.15);border:none;color:#fff;font-size:2rem;width:50px;height:50px;border-radius:50%;cursor:pointer;z-index:3;">&times;</button>
        <div id="fullscreenCounter" style="position:absolute;bottom:20px;left:50%;transform:translateX(-50%);color:#888;font-size:0.9rem;z-index:3;">1/4</div>
        <div id="fsZoomHint" style="position:absolute;bottom:50px;left:50%;transform:translateX(-50%);color:rgba(255,255,255,0.5);font-size:0.75rem;z-index:3;pointer-events:none;transition:opacity 0.5s;text-align:center;">🔍 Scroll to zoom · Double-click to reset</div>
    </div>
    <!-- FIX #14: Replaced document.write with span + JS textContent -->
    <footer class="footer"><div class="footer-grid">
        <div>
            <h4 data-t="ft_why">Why Pagus</h4>
            <p data-t="ft_why_text"><strong style="color:var(--color-noble);">15+</strong> years of excellence in premium menswear manufacturing. Specializing in ceremonial, formal &amp; casual wear, we deliver European-quality craftsmanship at competitive wholesale prices. Trusted by retailers across Italy, Germany, France, and beyond.</p>
        </div>
        <div>
            <h4 data-t="ft_contact">B2B Contact</h4>
            <ul>
                <li><strong>WhatsApp:</strong> <span id="footerWa"></span></li>
                <li><strong data-t="ft_location">Location:</strong> İzmir, Turkey</li>
                <li><strong>Email:</strong> <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="7b12151d143b0b1a1c0e08161e15080c1e1a0955181416">[email&#160;protected]</a></li>
            </ul>
            <ul class="footer-service-list" style="margin-top:15px;">
                <li data-t="ft_moq">Minimum order: 50 pieces</li>
                <li data-t="ft_pl">Private label &amp; custom branding</li>
                <li data-t="ft_price">Direct factory pricing</li>
                <li data-t="ft_ship">Worldwide shipping &amp; export docs</li>
                <li data-t="ft_mgr">Dedicated account manager</li>
            </ul>
        </div>
        <div>
            <h4 data-t="ft_links">Quick Links</h4>
            <div class="footer-links">
                <a href="javascript:void(0)" onclick="openTerms()"><svg viewBox="0 0 24 24"><path d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm-1 1.5L18.5 9H13V3.5zM6 20V4h5v7h7v9H6z"/></svg><span data-t="ft_tc">Terms &amp; Conditions</span></a>
                <a href="javascript:void(0)" onclick="openTerms()"><svg viewBox="0 0 24 24"><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.89 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1v2z"/></svg><span data-t="ft_privacy">Privacy &amp; GDPR</span></a>
                <a href="payment.html"><svg viewBox="0 0 24 24"><path d="M20 4H4c-1.11 0-2 .89-2 2v12c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z"/></svg><span data-t="ft_payment">Secure Payment &amp; Bank Accounts</span></a>
            </div>
            <h4 style="margin-top:25px;" data-t="ft_follow">Follow Us</h4>
            <div class="footer-social">
                <a href="https://www.instagram.com/pagus_menswear/" target="_blank" rel="noopener"><svg viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg>Instagram</a>
                <a href="https://wa.me/905511748907" target="_blank" rel="noopener"><svg viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg>WhatsApp</a>
                <a href="https://www.linkedin.com/company/pagusmenswear/" target="_blank" rel="noopener"><svg viewBox="0 0 24 24"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 01-2.063-2.065 2.064 2.064 0 112.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>LinkedIn</a>
                <a href="https://www.facebook.com/pagusmenswear/" target="_blank" rel="noopener"><svg viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>Facebook</a>
            </div>
        </div>
    </div><div class="footer-bottom">&copy; <span id="footerYear"></span> Pagus Menswear. <span data-t="ft_rights">All Rights Reserved.</span> &nbsp;|&nbsp; <a href="javascript:void(0)" onclick="openTerms()" style="color:#666;" data-t="ft_tc">Terms &amp; Conditions</a><br><span style="color:#aaa; font-size:0.75rem;" data-t="ft_shipping">Worldwide shipping via DHL, FedEx &amp; UPS.</span></div></footer>

    <!-- ADVANCED SEARCH PANEL -->
    <div class="adv-panel-overlay" id="advPanelOverlay" onclick="if(event.target===this)closeAdvancedSearch()">
        <div class="adv-panel">
            <div class="adv-panel-header">
                <h3 data-t="adv_search">Advanced Search</h3>
                <button class="adv-panel-close" onclick="closeAdvancedSearch()" aria-label="Close">&times;</button>
            </div>
            <div class="adv-panel-body">
                <div class="adv-section">
                    <div class="adv-section-title"><svg viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg><span data-t="adv_keyword">Keyword</span></div>
                    <input type="text" id="advKeyword" class="adv-keyword" data-tp="search_placeholder" placeholder="Search products..." onkeypress="if(event.key==='Enter')runAdvancedSearch()">
                </div>
                <div class="adv-section">
                    <div class="adv-section-title"><svg viewBox="0 0 24 24"><path d="M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"/></svg><span data-t="adv_category">Category</span></div>
                    <div class="adv-checks" id="advCategoryChecks"></div>
                </div>
                <div class="adv-section" id="advSubSection" style="display:none;">
                    <div class="adv-section-title"><svg viewBox="0 0 24 24"><path d="M3 18h6v-2H3v2zM3 6v2h18V6H3zm0 7h12v-2H3v2z"/></svg><span data-t="adv_subcat">Subcategory</span></div>
                    <div class="adv-checks adv-sub-checks" id="advSubChecks"></div>
                </div>
            </div>
            <div class="adv-panel-footer">
                <button class="adv-clear-btn" onclick="clearAdvancedSearch()" data-t="adv_clear">Clear</button>
                <button class="adv-search-submit" onclick="runAdvancedSearch()" data-t="adv_search_btn">SEARCH</button>
            </div>
        </div>
    </div>

    <!-- T&C OVERLAY -->
    <div class="tc-overlay" id="tcOverlay" onclick="if(event.target===this)closeTerms()">
        <button class="tc-close" onclick="closeTerms()" aria-label="Close">&times;</button>
        <div class="tc-container" id="tcContent"></div>
    </div>
    <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script src="inventory.js?v=1771500808"></script>
    <!-- Firebase SDK (Compat for single-file usage) -->
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
    <script>
    // ================================================================
    //  🔥 FIREBASE CONFIG — Kendi project bilgilerini buraya yaz
    // ================================================================
    //  Firebase Console > Project Settings > General > Your Apps > Web App
    //  "firebaseConfig" objesini kopyalayıp aşağıya yapıştır.
    // ================================================================
    var firebaseConfig = {
        apiKey: "AIzaSyAWiTFG-XRg7u_dY7G_jftrL5uIwq4vvWM",
        authDomain: "pagus-website.firebaseapp.com",
        projectId: "pagus-website",
        storageBucket: "pagus-website.firebasestorage.app",
        messagingSenderId: "181201607827",
        appId: "1:181201607827:web:7872bded476390a6754166"
    };

    // ===================== GLOBAL NAMESPACE (early init) =====================
    window.PAGUS = window.PAGUS || {};
    PAGUS.state = PAGUS.state || {};

    PAGUS.state.firebaseReady = false;
    PAGUS.state.currentUser = null;
    PAGUS.state.userRole = 'standard';
    PAGUS.state.priceCache = {};  // productId -> {standard, premium, vip, currency}

    try {
        firebase.initializeApp(firebaseConfig);
        PAGUS.state.firebaseReady = true;
    } catch(e) {
        console.warn('Firebase init failed:', e.message);
    }

    var db = PAGUS.state.firebaseReady ? firebase.firestore() : null;
    var auth = PAGUS.state.firebaseReady ? firebase.auth() : null;

    // ===================== AUTH STATE =====================

    if(auth){
        auth.onAuthStateChanged(function(user){
            PAGUS.state.currentUser = user;
            updateAuthUI();
            if(user){
                loadUserRole(user.uid);
                syncFavoritesFromFirestore(user.uid);
                loadAllPrices();
            } else {
                PAGUS.state.userRole = 'standard';
                PAGUS.state.priceCache = {};
                refreshPriceDisplays();
            }
        });
    }

    function updateAuthUI(){
        var area = document.getElementById('authArea');
        if(!area) return;
        if(PAGUS.state.currentUser){
            var name = PAGUS.state.currentUser.displayName || PAGUS.state.currentUser.email.split('@')[0];
            area.innerHTML = '<div class="user-menu">'
                + '<span class="user-greeting">' + escapeHTML(name) + '</span>'
                + '<button class="logout-btn" onclick="doLogout()">' + t('logout_btn') + '</button>'
                + '</div>';
        } else {
            area.innerHTML = '<button class="auth-btn" onclick="openAuthModal(\'login\')">LOGIN</button>';
        }
    }

    function loadUserRole(uid){
        if(!db) return;
        db.collection('users').doc(uid).get().then(function(doc){
            if(doc.exists){
                PAGUS.state.userRole = doc.data().role || 'standard';
            }
            refreshPriceDisplays();
        }).catch(function(e){ console.warn('Role load error:', e); });
    }

    // ===================== AUTH MODAL =====================

    function openAuthModal(tab){
        document.getElementById('authOverlay').classList.add('visible');
        document.getElementById('authError').style.display = 'none';
        switchAuthTab(tab || 'login');
    }

    function closeAuthModal(){
        document.getElementById('authOverlay').classList.remove('visible');
        document.getElementById('authError').style.display = 'none';
    }

    function switchAuthTab(tab){
        document.getElementById('tabLogin').classList.toggle('active', tab === 'login');
        document.getElementById('tabRegister').classList.toggle('active', tab === 'register');
        document.getElementById('loginForm').style.display = tab === 'login' ? 'block' : 'none';
        document.getElementById('registerForm').style.display = tab === 'register' ? 'block' : 'none';
        document.getElementById('forgotForm').style.display = 'none';
        document.querySelector('.auth-tabs').style.display = 'flex';
        document.getElementById('authError').style.display = 'none';
    }

    function showAuthError(msg){
        var el = document.getElementById('authError');
        el.textContent = msg;
        el.style.display = 'block';
    }

    function doLogin(){
        if(!auth){ showAuthError(t('firebase_error')); return; }
        var email = document.getElementById('loginEmail').value.trim();
        var pass = document.getElementById('loginPass').value;
        if(!email || !pass){ showAuthError(t('fill_all_fields')); return; }

        var btn = document.getElementById('loginBtn');
        btn.disabled = true; btn.textContent = t('logging_in_text');

        auth.signInWithEmailAndPassword(email, pass)
            .then(function(){
                closeAuthModal();
                showToast(t('welcome_back'));
            })
            .catch(function(e){
                var msg = t('login_failed');
                if(e.code === 'auth/user-not-found' || e.code === 'auth/wrong-password' || e.code === 'auth/invalid-credential') msg = t('invalid_credentials');
                if(e.code === 'auth/too-many-requests') msg = t('too_many_login');
                showAuthError(msg);
            })
            .finally(function(){ btn.disabled = false; btn.textContent = t('login'); });
    }

    function showForgotPassword(){
        document.getElementById('loginForm').style.display='none';
        document.getElementById('forgotForm').style.display='block';
        document.getElementById('authError').style.display='none';
        document.querySelector('.auth-tabs').style.display='none';
        document.getElementById('forgotEmail').value=document.getElementById('loginEmail').value||'';
        document.getElementById('forgotEmail').focus();
    }

    function hideForgotPassword(){
        document.getElementById('forgotForm').style.display='none';
        document.getElementById('loginForm').style.display='block';
        document.querySelector('.auth-tabs').style.display='flex';
        document.getElementById('authError').style.display='none';
    }

    function doForgotPassword(){
        if(!auth){ showAuthError(t('firebase_error')); return; }
        var email=document.getElementById('forgotEmail').value.trim();
        if(!email){ showAuthError(t('forgot_empty')); return; }

        var btn=document.getElementById('forgotBtn');
        btn.disabled=true; btn.textContent=t('sending');

        auth.sendPasswordResetEmail(email)
            .then(function(){
                document.getElementById('authError').style.display='none';
                showToast(t('reset_sent'));
                setTimeout(function(){ hideForgotPassword(); },1500);
            })
            .catch(function(e){
                var msg=t('reset_error');
                if(e.code==='auth/user-not-found') msg=t('reset_not_found');
                if(e.code==='auth/invalid-email') msg=t('reset_invalid');
                if(e.code==='auth/too-many-requests') msg=t('reset_too_many');
                showAuthError(msg);
            })
            .finally(function(){ btn.disabled=false; btn.textContent=t('send_reset'); });
    }

    function doRegister(){
        if(!auth){ showAuthError(t('firebase_error')); return; }
        var name = document.getElementById('regName').value.trim();
        var email = document.getElementById('regEmail').value.trim();
        var pass = document.getElementById('regPass').value;
        var pass2 = document.getElementById('regPass2').value;

        if(!name || !email || !pass){ showAuthError(t('fill_all_fields')); return; }
        if(pass.length < 6){ showAuthError(t('pw_min6')); return; }
        if(pass !== pass2){ showAuthError(t('pw_no_match')); return; }

        var btn = document.getElementById('regBtn');
        btn.disabled = true; btn.textContent = t('creating_text');

        auth.createUserWithEmailAndPassword(email, pass)
            .then(function(cred){
                // Set display name
                return cred.user.updateProfile({ displayName: name }).then(function(){
                    // Create Firestore user doc
                    if(db){
                        return db.collection('users').doc(cred.user.uid).set({
                            displayName: name,
                            email: email,
                            role: 'standard',
                            createdAt: firebase.firestore.FieldValue.serverTimestamp()
                        });
                    }
                });
            })
            .then(function(){
                closeAuthModal();
                updateAuthUI();
                showToast(t('account_created') + name);
            })
            .catch(function(e){
                var msg = t('reg_failed');
                if(e.code === 'auth/email-already-in-use') msg = t('email_in_use');
                if(e.code === 'auth/weak-password') msg = t('pw_weak');
                if(e.code === 'auth/invalid-email') msg = t('invalid_email_addr');
                showAuthError(msg);
            })
            .finally(function(){ btn.disabled = false; btn.textContent = t('create_account'); });
    }

    function doLogout(){
        if(!auth) return;
        auth.signOut().then(function(){
            showToast(t('logged_out'));
            updateAuthUI();
            refreshPriceDisplays();
        });
    }

    function doGoogleLogin(){
        if(!auth){ showAuthError(t('firebase_error')); return; }
        var provider = new firebase.auth.GoogleAuthProvider();
        auth.signInWithPopup(provider)
            .then(function(result){
                var user = result.user;
                var isNew = result.additionalUserInfo && result.additionalUserInfo.isNewUser;
                if(isNew && db){
                    db.collection('users').doc(user.uid).set({
                        displayName: user.displayName || user.email.split('@')[0],
                        email: user.email,
                        role: 'standard',
                        createdAt: firebase.firestore.FieldValue.serverTimestamp()
                    });
                }
                closeAuthModal();
                showToast(t('welcome_user') + (user.displayName || '') + '!');
            })
            .catch(function(e){
                if(e.code === 'auth/popup-closed-by-user') return;
                if(e.code === 'auth/popup-blocked'){
                    showAuthError(t('popup_blocked_auth'));
                    return;
                }
                showAuthError(t('google_fail'));
            });
    }

    // ===================== PRICING =====================

    function loadAllPrices(){
        if(!db || !PAGUS.state.currentUser) return;
        db.collection('pricing').get().then(function(snap){
            PAGUS.state.priceCache = {};
            snap.forEach(function(doc){
                PAGUS.state.priceCache[doc.id] = doc.data();
            });
            refreshPriceDisplays();
        }).catch(function(e){ console.warn('Price load error:', e); });
    }

    function getPrice(productId){
        var p = PAGUS.state.priceCache[productId];
        if(!p) return null;
        var val = p[PAGUS.state.userRole] || p['standard'] || null;
        if(val === null || val === undefined) return null;
        var currency = p.currency || 'EUR';
        return { value: val, currency: currency };
    }

    function formatPrice(price){
        if(!price) return '';
        return '€' + Number(price.value).toFixed(2);
    }

    function refreshPriceDisplays(){
        // Update price tags on product cards
        document.querySelectorAll('[data-price-id]').forEach(function(el){
            var pid = el.dataset.priceId;
            if(PAGUS.state.currentUser){
                var price = getPrice(pid);
                if(price){
                    el.innerHTML = '<span class="price-tag">' + formatPrice(price) + '</span>'
                        + '<span class="price-tier">' + escapeHTML(PAGUS.state.userRole) + ' ' + t('price_tier_suffix') + '</span>';
                } else {
                    el.innerHTML = '<span class="price-tag" style="font-size:0.85rem;color:#999;">'+t('price_on_request')+'</span>';
                }
            } else {
                el.innerHTML = '<span class="price-login-hint" onclick="event.stopPropagation();openAuthModal(\'login\')">'+t('login_see_prices')+'</span>';
            }
        });

        // Update modal price if open
        var modalPrice = document.getElementById('modalPriceArea');
        if(modalPrice && PAGUS.state.activeCode){
            if(PAGUS.state.currentUser){
                var mp = getPrice(PAGUS.state.activeCode);
                if(mp){
                    modalPrice.innerHTML = '<div class="modal-price">' + formatPrice(mp) + '</div>'
                        + '<span class="price-tier">' + escapeHTML(PAGUS.state.userRole) + ' ' + t('price_tier_suffix') + '</span>';
                } else {
                    modalPrice.innerHTML = '<div class="modal-price" style="font-size:1.2rem;color:#999;">'+t('price_on_request')+'</div>';
                }
            } else {
                modalPrice.innerHTML = '<span class="modal-price-hint" onclick="openAuthModal(\'login\')">'+t('login_wholesale')+'</span>';
            }
        }
    }

    // ===================== FAVORITES SYNC =====================

    function syncFavoritesFromFirestore(uid){
        if(!db) return;
        db.collection('users').doc(uid).collection('favorites').get().then(function(snap){
            var firestoreFavs = [];
            snap.forEach(function(doc){ firestoreFavs.push(doc.id); });

            // Merge: localStorage + Firestore (union)
            var merged = [...new Set([...cart, ...firestoreFavs])];
            cart = merged;
            if(lsAvailable) localStorage.setItem('pagusCart', JSON.stringify(cart));
            updateCartUI();

            // Save merged back to Firestore
            var batch = db.batch();
            merged.forEach(function(code){
                batch.set(db.collection('users').doc(uid).collection('favorites').doc(code), {
                    addedAt: firebase.firestore.FieldValue.serverTimestamp()
                });
            });
            batch.commit().catch(function(e){ console.warn('Fav sync error:', e); });
        }).catch(function(e){ console.warn('Fav load error:', e); });
    }

    function saveFavToFirestore(code, add){
        if(!db || !PAGUS.state.currentUser) return;
        var ref = db.collection('users').doc(PAGUS.state.currentUser.uid).collection('favorites').doc(code);
        if(add){
            ref.set({ addedAt: firebase.firestore.FieldValue.serverTimestamp() }).catch(function(){});
        } else {
            ref.delete().catch(function(){});
        }
    }

    // ===================== COOKIE BANNER =====================

    function initCookieBanner(){
        try {
            if(!localStorage.getItem('pagus_cookie_consent')){
                document.getElementById('cookieBanner').classList.add('visible');
            }
        } catch(e){
            // No localStorage — don't show banner
        }
    }

    function acceptCookies(){
        try { localStorage.setItem('pagus_cookie_consent', '1'); } catch(e){}
        document.getElementById('cookieBanner').classList.remove('visible');
    }

    initCookieBanner();

    // ===================== PROMO POPUP =====================

    function showPromo(){
        document.getElementById('promoOverlay').classList.add('visible');
    }

    function closePromo(){
        document.getElementById('promoOverlay').classList.remove('visible');
        try { sessionStorage.setItem('pagus_promo_closed','1'); } catch(e){}
    }

    function submitPromo(){
        var email=document.getElementById('promoEmail').value.trim();
        if(!email||email.indexOf('@')===-1){
            document.getElementById('promoEmail').style.borderColor='#e74c3c';
            return;
        }
        closePromo();
        openAuthModal('register');
        setTimeout(function(){
            var regEmail=document.getElementById('regEmail');
            if(regEmail){ regEmail.value=email; }
        },100);
    }

    // Show promo after 3 seconds if not logged in and not previously closed
    function initPromo(){
        try {
            if(sessionStorage.getItem('pagus_promo_closed')) return;
        } catch(e){}
        setTimeout(function(){
            if(!PAGUS.state.currentUser){
                showPromo();
            }
        },3000);
    }

    initPromo();
    </script>
    <script>
        // ============================================================
        // PAGUS MENSWEAR - FIXED VERSION
        // All 14 issues resolved (see FIX comments throughout)
        // ============================================================

        var FEATURES={carousel:false,hero:true,search:true,favorites:true,whatsappFloat:true,privateLabel:true,showcase:true};

        // ===================== GLOBAL NAMESPACE =====================
        // All shared state under one roof — prevents global pollution
        var PAGUS = window.PAGUS || {};
        PAGUS.state = Object.assign(PAGUS.state || {}, {
            carouselSlides: null,
            carouselIndex: 0,
            carouselTotal: 0,
            carouselTimer: null,
            searchResults: null,
            currentProducts: null,
            toastTimer: null
        });
        var WHATSAPP_NUMBER='905511748907';
        var CAT_DISPLAY_NAMES_I18N={
            "Çıkma Yaka":{en:"Detachable Collar",it:"Colletto Staccabile",fr:"Col Détachable",de:"Abnehmbarer Kragen",es:"Cuello Desmontable"},
            "Wedding Suits":{en:"Ceremonial Wear",it:"Abbigliamento da Cerimonia",fr:"Tenues de Cérémonie",de:"Festliche Kleidung",es:"Ropa de Ceremonia"},
            "Formal Suits":{en:"Formal Wear",it:"Abbigliamento Formale",fr:"Tenues Formelles",de:"Formelle Kleidung",es:"Ropa Formal"},
            "Casual Wear":{en:"Casual Wear",it:"Abbigliamento Casual",fr:"Tenues Décontractées",de:"Freizeitkleidung",es:"Ropa Casual"},
            "Jackets":{en:"Jackets",it:"Giacche",fr:"Vestes",de:"Jacken",es:"Chaquetas"},
            "Shirts":{en:"Shirts",it:"Camicie",fr:"Chemises",de:"Hemden",es:"Camisas"},
            "Shoes":{en:"Shoes",it:"Scarpe",fr:"Chaussures",de:"Schuhe",es:"Zapatos"},
            "Accessories":{en:"Accessories",it:"Accessori",fr:"Accessoires",de:"Accessoires",es:"Accesorios"},
            "Children":{en:"Children",it:"Bambini",fr:"Enfants",de:"Kinder",es:"Niños"},
            // Common subcategories
            "Slim Fit":{en:"Slim Fit",it:"Slim Fit",fr:"Coupe Slim",de:"Slim Fit",es:"Slim Fit"},
            "Regular Fit":{en:"Regular Fit",it:"Vestibilità Regolare",fr:"Coupe Classique",de:"Regular Fit",es:"Corte Regular"},
            "Classic":{en:"Classic",it:"Classico",fr:"Classique",de:"Klassisch",es:"Clásico"},
            "Modern":{en:"Modern",it:"Moderno",fr:"Moderne",de:"Modern",es:"Moderno"},
            "Tuxedo":{en:"Tuxedo",it:"Smoking",fr:"Smoking",de:"Smoking",es:"Esmoquin"},
            "Vest":{en:"Vest",it:"Gilet",fr:"Gilet",de:"Weste",es:"Chaleco"},
            "Vests":{en:"Vests",it:"Gilet",fr:"Gilets",de:"Westen",es:"Chalecos"},
            "Bow Tie":{en:"Bow Tie",it:"Papillon",fr:"Nœud Papillon",de:"Fliege",es:"Pajarita"},
            "Bow Ties":{en:"Bow Ties",it:"Papillon",fr:"Nœuds Papillon",de:"Fliegen",es:"Pajaritas"},
            "Tie":{en:"Tie",it:"Cravatta",fr:"Cravate",de:"Krawatte",es:"Corbata"},
            "Ties":{en:"Ties",it:"Cravatte",fr:"Cravates",de:"Krawatten",es:"Corbatas"},
            "Belt":{en:"Belt",it:"Cintura",fr:"Ceinture",de:"Gürtel",es:"Cinturón"},
            "Belts":{en:"Belts",it:"Cinture",fr:"Ceintures",de:"Gürtel",es:"Cinturones"},
            "Suspenders":{en:"Suspenders",it:"Bretelle",fr:"Bretelles",de:"Hosenträger",es:"Tirantes"},
            "Cufflinks":{en:"Cufflinks",it:"Gemelli",fr:"Boutons de Manchette",de:"Manschettenknöpfe",es:"Gemelos"},
            "Pocket Square":{en:"Pocket Square",it:"Pochette",fr:"Pochette",de:"Einstecktuch",es:"Pañuelo de Bolsillo"},
            "General":{en:"General",it:"Generale",fr:"Général",de:"Allgemein",es:"General"}
        };
        function getCatDisplayName(key){var obj=CAT_DISPLAY_NAMES_I18N[key];if(!obj)return key;return obj[LANG]||obj['en']||key;}
        var CAT_DISPLAY_NAMES={}; // Legacy compat — use getCatDisplayName() instead

        // i18n helper — single source of truth for language detection & texts
        // ===================== i18n SYSTEM =====================
        var SUPPORTED_LANGS=['en','it','de','fr'];
        function detectLang(){
            var saved=localStorage.getItem('pagusLang');
            if(saved&&SUPPORTED_LANGS.indexOf(saved)!==-1) return saved;
            var bl=navigator.language||navigator.userLanguage||'en';
            var short=bl.substring(0,2).toLowerCase();
            return SUPPORTED_LANGS.indexOf(short)!==-1?short:'en';
        }
        var LANG=detectLang();

        var I18N={
            // NAV
            nav_wedding:{en:'Ceremonial Wear',it:'Abbigliamento da Cerimonia',fr:'Tenues de Cérémonie',de:'Festliche Kleidung'},
            nav_formal:{en:'Formal Wear',it:'Abbigliamento Formale',fr:'Tenues Formelles',de:'Formelle Kleidung'},
            nav_casual:{en:'Casual Wear',it:'Abbigliamento Casual',fr:'Tenues Décontractées',de:'Freizeitkleidung'},
            nav_jackets:{en:'Jackets',it:'Giacche',fr:'Vestes',de:'Jacken'},
            nav_shirts:{en:'Shirts',it:'Camicie',fr:'Chemises',de:'Hemden'},
            nav_shoes:{en:'Shoes',it:'Scarpe',fr:'Chaussures',de:'Schuhe'},
            nav_accessories:{en:'Accessories',it:'Accessori',fr:'Accessoires',de:'Accessoires'},
            nav_children:{en:'Children',it:'Bambini',fr:'Enfants',de:'Kinder'},
            login:{en:'LOGIN',it:'ACCEDI',fr:'CONNEXION',de:'ANMELDEN'},
            logout_btn:{en:'Logout',it:'Esci',fr:'Déconnexion',de:'Abmelden'},
            // SEARCH
            search_placeholder:{en:'Search products...',it:'Cerca prodotti...',fr:'Rechercher...',de:'Produkte suchen...'},
            // HERO
            hero_tagline:{en:'B2B Wholesale Menswear',it:'Abbigliamento Uomo B2B all\'Ingrosso',fr:'Mode Homme B2B en Gros',de:'B2B Herrenmode Großhandel'},
            hero_title:{en:'Ceremonial, Formal & Casual Wear',it:'Abbigliamento Cerimoniale, Formale & Casual',fr:'Tenues de Cérémonie, Formelles & Décontractées',de:'Festliche, Formelle & Freizeitkleidung'},
            hero_desc:{en:'Direct from manufacturer in İzmir, Turkey. Pagus specializes in ceremonial, formal & casual menswear for retailers and wholesalers worldwide. Minimum order: 50 pieces.',it:'Direttamente dal produttore a İzmir, Turchia. Pagus è specializzata in abbigliamento maschile cerimoniale, formale e casual per rivenditori e grossisti in tutto il mondo. Ordine minimo: 50 pezzi.',fr:'Directement du fabricant à İzmir, Turquie. Pagus se spécialise dans la mode masculine cérémonielle, formelle et décontractée pour détaillants et grossistes du monde entier. Commande minimum : 50 pièces.',de:'Direkt vom Hersteller in İzmir, Türkei. Pagus ist spezialisiert auf festliche, formelle und lässige Herrenmode für Einzelhändler und Großhändler weltweit. Mindestbestellung: 50 Stück.'},
            stat_years:{en:'Years Experience',it:'Anni di Esperienza',fr:'Ans d\'Expérience',de:'Jahre Erfahrung'},
            stat_countries:{en:'Countries',it:'Paesi',fr:'Pays',de:'Länder'},
            stat_partners:{en:'Active Partners',it:'Partner Attivi',fr:'Partenaires Actifs',de:'Aktive Partner'},
            // PAGE
            back_btn:{en:'BACK',it:'INDIETRO',fr:'RETOUR',de:'ZURÜCK'},
            collection:{en:'COLLECTION',it:'COLLEZIONE',fr:'COLLECTION',de:'KOLLEKTION'},
            guide_tap:{en:'Tap heart to create list.',it:'Tocca il cuore per creare la lista.',fr:'Appuyez sur le cœur pour créer votre liste.',de:'Tippen Sie auf das Herz, um eine Liste zu erstellen.'},
            loading:{en:'Loading Collection...',it:'Caricamento Collezione...',fr:'Chargement de la Collection...',de:'Kollektion wird geladen...'},
            // PRIVATE LABEL
            pl_title:{en:'YOUR BRAND, OUR PRODUCTION',it:'IL VOSTRO MARCHIO, LA NOSTRA PRODUZIONE',fr:'VOTRE MARQUE, NOTRE PRODUCTION',de:'IHRE MARKE, UNSERE PRODUKTION'},
            pl_desc:{en:'Behind every suit that carries your name, there\'s a story of craftsmanship that begins in İzmir — Turkey\'s textile heartland. For over 15 years, Pagus Menswear has been the silent force behind some of Europe\'s most respected menswear labels, engineering confidence into every lapel, seam, and stitch. Our Private Label service is a true partnership. You define the design, fabric, fit, and finishing — we handle everything else. Our in-house pattern makers and master tailors work as a dedicated extension of your brand, combining traditional tailoring techniques with modern production capacity. From ceremonial suits and tuxedos to business wear and smart-casual blazers, every production run follows rigorous quality protocols. We source premium fabrics from certified Turkish and Italian mills, and deliver your garments labeled, packaged, and retail-ready. No hidden fees. No compromise. Your labels, your packaging, your identity — backed by decades of textile mastery and trusted by partners across Italy, Germany, France, and beyond.',it:'Dietro ogni abito che porta il vostro nome, c\'è una storia di artigianalità che inizia a Smirne — il cuore tessile della Turchia. Da oltre 15 anni, Pagus Menswear è la forza silenziosa dietro alcuni dei marchi di moda maschile più rispettati d\'Europa, infondendo sicurezza in ogni revers, cucitura e punto. Il nostro servizio Private Label è una vera partnership. Voi definite il design, il tessuto, la vestibilità e le finiture — noi ci occupiamo di tutto il resto. I nostri modellisti interni e i sarti maestri lavorano come un\'estensione dedicata del vostro marchio, combinando tecniche sartoriali tradizionali con una capacità produttiva moderna. Dagli abiti da cerimonia e smoking all\'abbigliamento business e ai blazer smart-casual, ogni produzione segue rigorosi protocolli di qualità. Utilizziamo tessuti premium da stabilimenti turchi e italiani certificati, e consegniamo i vostri capi etichettati, confezionati e pronti per la vendita. Nessun costo nascosto. Nessun compromesso. Le vostre etichette, il vostro packaging, la vostra identità — supportati da decenni di maestria tessile e dalla fiducia di partner in Italia, Germania, Francia e oltre.',fr:'Derrière chaque costume qui porte votre nom, il y a une histoire de savoir-faire qui commence à Izmir — le cœur textile de la Turquie. Depuis plus de 15 ans, Pagus Menswear est la force silencieuse derrière certaines des marques de mode masculine les plus respectées d\'Europe, insufflant confiance dans chaque revers, couture et point. Notre service Private Label est un véritable partenariat. Vous définissez le design, le tissu, la coupe et les finitions — nous nous occupons de tout le reste. Nos modélistes internes et maîtres tailleurs travaillent comme une extension dédiée de votre marque, alliant techniques de couture traditionnelles et capacité de production moderne. Des costumes de cérémonie et smokings aux tenues business et blazers smart-casual, chaque production suit des protocoles de qualité rigoureux. Nous utilisons des tissus premium provenant de manufactures turques et italiennes certifiées, et livrons vos vêtements étiquetés, emballés et prêts à la vente. Aucun frais caché. Aucun compromis. Vos étiquettes, votre packaging, votre identité — soutenus par des décennies de maîtrise textile et la confiance de partenaires en Italie, Allemagne, France et au-delà.',de:'Hinter jedem Anzug, der Ihren Namen trägt, steckt eine Geschichte der Handwerkskunst, die in Izmir beginnt — dem textilen Herzen der Türkei. Seit über 15 Jahren ist Pagus Menswear die stille Kraft hinter einigen der angesehensten Herrenmode-Marken Europas und verleiht jedem Revers, jeder Naht und jedem Stich Vertrauen. Unser Private-Label-Service ist eine echte Partnerschaft. Sie bestimmen Design, Stoff, Passform und Verarbeitung — wir kümmern uns um alles andere. Unsere hauseigenen Schnitttechniker und Meisterschneider arbeiten als dedizierte Erweiterung Ihrer Marke und verbinden traditionelle Schneiderkunst mit moderner Produktionskapazität. Von Festanzügen und Smokings bis hin zu Businesskleidung und Smart-Casual-Blazern folgt jede Produktion strengen Qualitätsprotokollen. Wir verwenden Premium-Stoffe aus zertifizierten türkischen und italienischen Webereien und liefern Ihre Kleidungsstücke etikettiert, verpackt und verkaufsfertig. Keine versteckten Kosten. Keine Kompromisse. Ihre Etiketten, Ihre Verpackung, Ihre Identität — gestützt durch Jahrzehnte textiler Meisterschaft und das Vertrauen von Partnern in Italien, Deutschland, Frankreich und darüber hinaus.'},
            pl_btn:{en:'START PRODUCTION',it:'AVVIA PRODUZIONE',fr:'LANCER LA PRODUCTION',de:'PRODUKTION STARTEN'},
            // FLOAT CART
            send_text:{en:'SEND',it:'INVIA',fr:'ENVOYER',de:'SENDEN'},
            // MODAL
            wholesale_mfr:{en:'WHOLESALE MANUFACTURER',it:'PRODUTTORE ALL\'INGROSSO',fr:'FABRICANT EN GROS',de:'GROSSHANDEL-HERSTELLER'},
            badge_fabric:{en:'Premium Fabric',it:'Tessuto Premium',fr:'Tissu Premium',de:'Premium-Stoff'},
            badge_turkey:{en:'Made in Turkey',it:'Prodotto in Turchia',fr:'Fabriqué en Turquie',de:'Hergestellt in der Türkei'},
            badge_wholesale:{en:'Wholesale Only',it:'Solo Ingrosso',fr:'Grossiste Uniquement',de:'Nur Großhandel'},
            modal_desc:{en:'Premium quality fabric available for bulk orders.',it:'Tessuto di qualità premium disponibile per ordini all\'ingrosso.',fr:'Tissu de qualité premium disponible pour commandes en gros.',de:'Premium-Qualitätsstoff für Großbestellungen verfügbar.'},
            ask_wa:{en:'ASK PRICE VIA WHATSAPP',it:'CHIEDI IL PREZZO SU WHATSAPP',fr:'DEMANDER LE PRIX VIA WHATSAPP',de:'PREIS ÜBER WHATSAPP ANFRAGEN'},
            // AUTH
            auth_subtitle:{en:'B2B Wholesale Portal',it:'Portale B2B Ingrosso',fr:'Portail B2B Grossiste',de:'B2B Großhandel-Portal'},
            login_tab:{en:'Login',it:'Accedi',fr:'Connexion',de:'Anmelden'},
            register_tab:{en:'Register',it:'Registrati',fr:'S\'inscrire',de:'Registrieren'},
            email_label:{en:'Email',it:'Email',fr:'Email',de:'E-Mail'},
            password_label:{en:'Password',it:'Password',fr:'Mot de passe',de:'Passwort'},
            or_divider:{en:'or',it:'oppure',fr:'ou',de:'oder'},
            google_btn:{en:'Continue with Google',it:'Continua con Google',fr:'Continuer avec Google',de:'Mit Google fortfahren'},
            company_label:{en:'Company / Name',it:'Azienda / Nome',fr:'Entreprise / Nom',de:'Firma / Name'},
            company_ph:{en:'Your company or full name',it:'Nome della vostra azienda',fr:'Nom de votre entreprise',de:'Ihr Firmenname'},
            min6_ph:{en:'Min. 6 characters',it:'Min. 6 caratteri',fr:'Min. 6 caractères',de:'Min. 6 Zeichen'},
            confirm_pw:{en:'Confirm Password',it:'Conferma Password',fr:'Confirmer le mot de passe',de:'Passwort bestätigen'},
            repeat_ph:{en:'Repeat password',it:'Ripeti la password',fr:'Répéter le mot de passe',de:'Passwort wiederholen'},
            create_account:{en:'CREATE ACCOUNT',it:'CREA ACCOUNT',fr:'CRÉER UN COMPTE',de:'KONTO ERSTELLEN'},
            // FORGOT PASSWORD
            forgot_pw:{en:'Forgot your password?',it:'Password dimenticata?',fr:'Mot de passe oublié ?',de:'Passwort vergessen?'},
            forgot_desc:{en:'Enter your email address and we\'ll send you a link to reset your password.',it:'Inserisci il tuo indirizzo email e ti invieremo un link per reimpostare la password.',fr:'Entrez votre adresse email et nous vous enverrons un lien pour réinitialiser votre mot de passe.',de:'Geben Sie Ihre E-Mail-Adresse ein und wir senden Ihnen einen Link zum Zurücksetzen Ihres Passworts.'},
            send_reset:{en:'SEND RESET LINK',it:'INVIA LINK DI RESET',fr:'ENVOYER LE LIEN',de:'LINK SENDEN'},
            back_to_login:{en:'← Back to Login',it:'← Torna al Login',fr:'← Retour à la Connexion',de:'← Zurück zur Anmeldung'},
            sending:{en:'SENDING...',it:'INVIO...',fr:'ENVOI...',de:'WIRD GESENDET...'},
            reset_sent:{en:'Reset link sent! Check your email inbox.',it:'Link di reset inviato! Controlla la tua casella email.',fr:'Lien envoyé ! Vérifiez votre boîte mail.',de:'Link gesendet! Überprüfen Sie Ihr E-Mail-Postfach.'},
            reset_error:{en:'Could not send reset email. Please try again.',it:'Impossibile inviare l\'email di reset. Riprova.',fr:'Impossible d\'envoyer l\'email. Veuillez réessayer.',de:'E-Mail konnte nicht gesendet werden. Bitte versuchen Sie es erneut.'},
            reset_not_found:{en:'No account found with this email address.',it:'Nessun account trovato con questa email.',fr:'Aucun compte trouvé avec cette adresse email.',de:'Kein Konto mit dieser E-Mail-Adresse gefunden.'},
            reset_invalid:{en:'Please enter a valid email address.',it:'Inserisci un indirizzo email valido.',fr:'Veuillez entrer une adresse email valide.',de:'Bitte geben Sie eine gültige E-Mail-Adresse ein.'},
            reset_too_many:{en:'Too many attempts. Please try again later.',it:'Troppi tentativi. Riprova più tardi.',fr:'Trop de tentatives. Réessayez plus tard.',de:'Zu viele Versuche. Bitte versuchen Sie es später erneut.'},
            forgot_empty:{en:'Please enter your email address.',it:'Inserisci il tuo indirizzo email.',fr:'Veuillez entrer votre adresse email.',de:'Bitte geben Sie Ihre E-Mail-Adresse ein.'},
            // COOKIE
            cookie_text:{en:'We use essential cookies and local storage to improve your experience. By continuing, you accept our <a href="privacy.html">Privacy Policy</a>.',it:'Utilizziamo cookie essenziali e archiviazione locale per migliorare la tua esperienza. Continuando, accetti la nostra <a href="privacy.html">Informativa sulla Privacy</a>.',fr:'Nous utilisons des cookies essentiels et le stockage local pour améliorer votre expérience. En continuant, vous acceptez notre <a href="privacy.html">Politique de Confidentialité</a>.',de:'Wir verwenden essentielle Cookies und lokalen Speicher, um Ihr Erlebnis zu verbessern. Durch die weitere Nutzung akzeptieren Sie unsere <a href="privacy.html">Datenschutzrichtlinie</a>.'},
            accept_btn:{en:'ACCEPT',it:'ACCETTO',fr:'ACCEPTER',de:'AKZEPTIEREN'},
            // PROMO POPUP
            promo_discount:{en:'5% OFF',it:'5% DI SCONTO',fr:'5% DE RÉDUCTION',de:'5% RABATT'},
            promo_subtitle:{en:'Your First Order',it:'Il Vostro Primo Ordine',fr:'Votre Première Commande',de:'Ihre Erste Bestellung'},
            promo_desc:{en:'Register now and get 5% discount on your first wholesale order.',it:'Registratevi ora e ottenete il 5% di sconto sul vostro primo ordine all\'ingrosso.',fr:'Inscrivez-vous maintenant et bénéficiez de 5% de réduction sur votre première commande en gros.',de:'Registrieren Sie sich jetzt und erhalten Sie 5% Rabatt auf Ihre erste Großhandelsbestellung.'},
            promo_btn:{en:'REGISTER & GET DISCOUNT',it:'REGISTRATI E OTTIENI LO SCONTO',fr:'INSCRIVEZ-VOUS ET OBTENEZ LA RÉDUCTION',de:'REGISTRIEREN & RABATT ERHALTEN'},
            promo_skip:{en:'No thanks, maybe later',it:'No grazie, forse dopo',fr:'Non merci, peut-être plus tard',de:'Nein danke, vielleicht später'},
            promo_badge:{en:'Limited Offer',it:'Offerta Limitata',fr:'Offre Limitée',de:'Begrenztes Angebot'},
            // FOOTER
            ft_why:{en:'Why Pagus',it:'Perché Pagus',fr:'Pourquoi Pagus',de:'Warum Pagus'},
            ft_why_text:{en:'<strong style="color:var(--color-gold);">15+</strong> years of excellence in premium menswear manufacturing. Specializing in ceremonial, formal & casual wear, we deliver European-quality craftsmanship at competitive wholesale prices. Trusted by retailers across Italy, Germany, France, and beyond.',it:'<strong style="color:var(--color-gold);">15+</strong> anni di eccellenza nella produzione di abbigliamento maschile premium. Specializzati in abbigliamento cerimoniale, formale e casual, offriamo artigianalità di qualità europea a prezzi competitivi. Affidabili per rivenditori in Italia, Germania, Francia e oltre.',fr:'<strong style="color:var(--color-gold);">15+</strong> ans d\'excellence dans la fabrication de mode masculine premium. Spécialisés dans les tenues de cérémonie, formelles et décontractées, nous offrons un savoir-faire de qualité européenne à des prix de gros compétitifs. Approuvé par des détaillants en Italie, Allemagne, France et au-delà.',de:'<strong style="color:var(--color-gold);">15+</strong> Jahre Exzellenz in der Premium-Herrenmode-Fertigung. Spezialisiert auf festliche, formelle und lässige Kleidung, liefern wir europäische Handwerksqualität zu wettbewerbsfähigen Großhandelspreisen. Vertraut von Einzelhändlern in Italien, Deutschland, Frankreich und darüber hinaus.'},
            ft_contact:{en:'B2B Contact',it:'Contatto B2B',fr:'Contact B2B',de:'B2B Kontakt'},
            ft_location:{en:'Location:',it:'Sede:',fr:'Siège :',de:'Standort:'},
            ft_moq:{en:'Minimum order: 50 pieces',it:'Ordine minimo: 50 pezzi',fr:'Commande minimum : 50 pièces',de:'Mindestbestellung: 50 Stück'},
            ft_pl:{en:'Private label & custom branding',it:'Private label & personalizzazione del marchio',fr:'Marque privée & personnalisation',de:'Private Label & individuelle Markengestaltung'},
            ft_price:{en:'Direct factory pricing',it:'Prezzi diretti di fabbrica',fr:'Prix usine direct',de:'Direkte Fabrikpreise'},
            ft_ship:{en:'Worldwide shipping & export docs',it:'Spedizione mondiale & documentazione export',fr:'Expédition mondiale & documents d\'exportation',de:'Weltweiter Versand & Exportdokumente'},
            ft_mgr:{en:'Dedicated account manager',it:'Account manager dedicato',fr:'Gestionnaire de compte dédié',de:'Dedizierter Kundenbetreuer'},
            ft_links:{en:'Quick Links',it:'Link Utili',fr:'Liens Rapides',de:'Schnelllinks'},
            ft_follow:{en:'Follow Us',it:'Seguici',fr:'Suivez-nous',de:'Folgen Sie uns'},
            ft_tc:{en:'Terms & Conditions',it:'Termini e Condizioni',fr:'Conditions Générales',de:'Allgemeine Geschäftsbedingungen'},
            ft_privacy:{en:'Privacy & GDPR',it:'Privacy & GDPR',fr:'Confidentialité & RGPD',de:'Datenschutz & DSGVO'},
            ft_payment:{en:'Secure Payment & Bank Accounts',it:'Pagamento Sicuro & Conti Bancari',fr:'Paiement Sécurisé & Comptes Bancaires',de:'Sichere Zahlung & Bankkonten'},
            ft_rights:{en:'All Rights Reserved.',it:'Tutti i Diritti Riservati.',fr:'Tous Droits Réservés.',de:'Alle Rechte vorbehalten.'},
            ft_shipping:{en:'Worldwide shipping via DHL, FedEx & UPS.',it:'Spedizione mondiale tramite DHL, FedEx e UPS.',fr:'Expédition mondiale via DHL, FedEx et UPS.',de:'Weltweiter Versand über DHL, FedEx & UPS.'},
            // EXISTING TEXTS
            search_min:{en:'Please enter at least 2 characters',it:'Inserisci almeno 2 caratteri',fr:'Veuillez entrer au moins 2 caractères',de:'Bitte mindestens 2 Zeichen eingeben'},
            wa_list_header:{en:'Hi Pagus, I am interested in the prices for these models:',it:'Salve Pagus, sono interessato ai prezzi di questi modelli:',fr:'Bonjour Pagus, je suis intéressé par les prix de ces modèles :',de:'Hallo Pagus, ich interessiere mich für die Preise dieser Modelle:'},
            wa_list_footer:{en:'Thanks.',it:'Grazie.',fr:'Merci.',de:'Danke.'},
            wa_inquiry:{en:'Hi, inquiring about: ',it:'Salve, vorrei ricevere informazioni sul modello: ',fr:'Bonjour, je souhaite me renseigner sur : ',de:'Hallo, Anfrage zu: '},
            popup_blocked:{en:'Popup blocked. Please allow popups for WhatsApp.',it:'Popup bloccato. Consenti i popup per WhatsApp.',fr:'Popup bloqué. Veuillez autoriser les popups pour WhatsApp.',de:'Popup blockiert. Bitte erlauben Sie Popups für WhatsApp.'},
            // ADV SEARCH
            adv_search:{en:'Advanced Search',it:'Ricerca Avanzata',fr:'Recherche Avancée',de:'Erweiterte Suche'},
            adv_keyword:{en:'Keyword',it:'Parola Chiave',fr:'Mot-clé',de:'Stichwort'},
            adv_category:{en:'Category',it:'Categoria',fr:'Catégorie',de:'Kategorie'},
            adv_subcat:{en:'Subcategory',it:'Sottocategoria',fr:'Sous-catégorie',de:'Unterkategorie'},
            adv_all_cats:{en:'All Categories',it:'Tutte le Categorie',fr:'Toutes les Catégories',de:'Alle Kategorien'},
            adv_all_subcats:{en:'All Subcategories',it:'Tutte le Sottocategorie',fr:'Toutes les Sous-catégories',de:'Alle Unterkategorien'},
            adv_search_btn:{en:'SEARCH',it:'CERCA',fr:'RECHERCHER',de:'SUCHEN'},
            adv_clear:{en:'Clear',it:'Cancella',fr:'Effacer',de:'Löschen'},
            adv_no_results:{en:'No results found',it:'Nessun risultato',fr:'Aucun résultat',de:'Keine Ergebnisse'},
            adv_results:{en:'results for',it:'risultati per',fr:'résultats pour',de:'Ergebnisse für'},
            // UI TEXTS
            view_collection:{en:'VIEW COLLECTION',it:'VEDI COLLEZIONE',fr:'VOIR LA COLLECTION',de:'KOLLEKTION ANSEHEN'},
            collection_updating:{en:'Collection is being updated...',it:'La collezione è in aggiornamento...',fr:'La collection est en cours de mise à jour...',de:'Kollektion wird aktualisiert...'},
            no_products:{en:'No products found.',it:'Nessun prodotto trovato.',fr:'Aucun produit trouvé.',de:'Keine Produkte gefunden.'},
            result_singular:{en:'result found',it:'risultato trovato',fr:'résultat trouvé',de:'Ergebnis gefunden'},
            results_plural:{en:'results found',it:'risultati trovati',fr:'résultats trouvés',de:'Ergebnisse gefunden'},
            results_for:{en:'for',it:'per',fr:'pour',de:'für'},
            filtered_label:{en:'(filtered)',it:'(filtrato)',fr:'(filtré)',de:'(gefiltert)'},
            // PRICES
            price_on_request:{en:'Price on request',it:'Prezzo su richiesta',fr:'Prix sur demande',de:'Preis auf Anfrage'},
            login_see_prices:{en:'Login to see prices',it:'Accedi per vedere i prezzi',fr:'Connectez-vous pour voir les prix',de:'Anmelden um Preise zu sehen'},
            login_wholesale:{en:'Login to see wholesale prices →',it:'Accedi per i prezzi all\'ingrosso →',fr:'Connectez-vous pour les prix de gros →',de:'Anmelden für Großhandelspreise →'},
            price_tier_suffix:{en:'price',it:'prezzo',fr:'prix',de:'Preis'},
            // AUTH MESSAGES
            welcome_back:{en:'Welcome back!',it:'Bentornato!',fr:'Bon retour !',de:'Willkommen zurück!'},
            account_created:{en:'Account created! Welcome, ',it:'Account creato! Benvenuto, ',fr:'Compte créé ! Bienvenue, ',de:'Konto erstellt! Willkommen, '},
            logged_out:{en:'Logged out.',it:'Disconnesso.',fr:'Déconnecté.',de:'Abgemeldet.'},
            welcome_user:{en:'Welcome, ',it:'Benvenuto, ',fr:'Bienvenue, ',de:'Willkommen, '},
            fill_all_fields:{en:'Please fill in all fields.',it:'Compila tutti i campi.',fr:'Veuillez remplir tous les champs.',de:'Bitte alle Felder ausfüllen.'},
            invalid_credentials:{en:'Invalid email or password.',it:'Email o password non validi.',fr:'Email ou mot de passe invalide.',de:'Ungültige E-Mail oder Passwort.'},
            too_many_login:{en:'Too many attempts. Try again later.',it:'Troppi tentativi. Riprova più tardi.',fr:'Trop de tentatives. Réessayez plus tard.',de:'Zu viele Versuche. Später erneut versuchen.'},
            pw_min6:{en:'Password must be at least 6 characters.',it:'La password deve avere almeno 6 caratteri.',fr:'Le mot de passe doit contenir au moins 6 caractères.',de:'Passwort muss mindestens 6 Zeichen haben.'},
            pw_no_match:{en:'Passwords do not match.',it:'Le password non corrispondono.',fr:'Les mots de passe ne correspondent pas.',de:'Passwörter stimmen nicht überein.'},
            creating_text:{en:'CREATING...',it:'CREAZIONE...',fr:'CRÉATION...',de:'WIRD ERSTELLT...'},
            logging_in_text:{en:'LOGGING IN...',it:'ACCESSO...',fr:'CONNEXION...',de:'ANMELDUNG...'},
            reg_failed:{en:'Registration failed.',it:'Registrazione fallita.',fr:'Échec de l\'inscription.',de:'Registrierung fehlgeschlagen.'},
            email_in_use:{en:'Email already registered. Try logging in.',it:'Email già registrata. Prova ad accedere.',fr:'Email déjà enregistré. Connectez-vous.',de:'E-Mail bereits registriert. Versuchen Sie sich anzumelden.'},
            pw_weak:{en:'Password is too weak.',it:'La password è troppo debole.',fr:'Le mot de passe est trop faible.',de:'Passwort ist zu schwach.'},
            invalid_email_addr:{en:'Invalid email address.',it:'Indirizzo email non valido.',fr:'Adresse email invalide.',de:'Ungültige E-Mail-Adresse.'},
            popup_blocked_auth:{en:'Popup blocked. Please allow popups.',it:'Popup bloccato. Consenti i popup.',fr:'Popup bloqué. Autorisez les popups.',de:'Popup blockiert. Bitte Popups erlauben.'},
            google_fail:{en:'Google login failed.',it:'Accesso Google fallito.',fr:'Échec connexion Google.',de:'Google-Anmeldung fehlgeschlagen.'},
            firebase_error:{en:'Service not available.',it:'Servizio non disponibile.',fr:'Service non disponible.',de:'Dienst nicht verfügbar.'},
            login_failed:{en:'Login failed.',it:'Accesso fallito.',fr:'Échec de connexion.',de:'Anmeldung fehlgeschlagen.'},
            error_inventory:{en:'Error: inventory.js not found.',it:'Errore: inventory.js non trovato.',fr:'Erreur : inventory.js introuvable.',de:'Fehler: inventory.js nicht gefunden.'}
        };

        // Compat: old t() function
        var TEXTS=I18N;
        function t(key){return(I18N[key]&&I18N[key][LANG])||((I18N[key]&&I18N[key]['en'])||key);}

        // ===================== T&C TRANSLATIONS =====================
        var TC={
            en:{
                h1:'Terms and Conditions',
                sub:'Wholesale Terms and Conditions of Sale',
                upd:'Last updated: February 2026',
                s:[
                    {t:'1. Definitions',c:'<ul><li><strong>"Seller"</strong> refers to PAGUS Menswear, located in İzmir, Turkey.</li><li><strong>"Buyer"</strong> refers to any business entity placing a wholesale order.</li><li><strong>"Goods"</strong> refers to all menswear products offered for sale.</li><li><strong>"Order"</strong> refers to any purchase order submitted by the Buyer.</li><li><strong>"Website"</strong> refers to pagusmenswear.com and all its subdomains.</li></ul>'},
                    {t:'2. Scope and Application',c:'<p>2.1. These Terms and Conditions ("T&Cs") apply to all wholesale orders placed with PAGUS Menswear through the Website, email, WhatsApp, or any other channel.</p><p>2.2. By placing an order, the Buyer agrees to be bound by these T&Cs. Any conflicting terms proposed by the Buyer shall not apply unless expressly agreed in writing.</p><p>2.3. These T&Cs are intended for business-to-business (B2B) transactions only. PAGUS Menswear does not sell directly to consumers.</p>'},
                    {t:'3. Orders and Minimum Quantities',c:'<p>3.1. The minimum order quantity (MOQ) is 50 pieces per order, unless otherwise agreed in writing.</p><p>3.2. Orders may be placed via the Website inquiry form, email, or WhatsApp. An order is confirmed only upon written acknowledgement by PAGUS Menswear.</p><p>3.3. PAGUS Menswear reserves the right to refuse any order at its sole discretion.</p><p>3.4. Product availability is subject to stock levels at the time of order confirmation. Colours and fabric compositions may vary slightly between production batches.</p>'},
                    {t:'4. Prices and Payment',c:'<p>4.1. All prices are quoted in Euros (EUR) or US Dollars (USD) and are exclusive of shipping, insurance, customs duties, and applicable taxes.</p><p>4.2. Prices are valid for 30 days from the date of quotation.</p><p>4.3. Standard payment terms:</p><ul><li>50% deposit upon order confirmation</li><li>50% balance before shipment</li></ul><p>4.4. Payment by bank transfer (SWIFT/IBAN). All bank charges are borne by the Buyer.</p><p>4.5. PAGUS Menswear reserves the right to suspend or cancel orders in case of late or incomplete payment.</p>'},
                    {t:'5. Shipping and Delivery',c:'<p>5.1. Delivery terms specified using Incoterms® 2020 (e.g., EXW, FOB, CIF).</p><p>5.2. Estimated delivery times are indicative and not binding.</p><p>5.3. Risk of loss passes to the Buyer per the agreed Incoterm.</p><p>5.4. The Buyer is responsible for all import duties, customs clearance, and local taxes.</p>'},
                    {t:'6. Quality and Inspection',c:'<p>6.1. All Goods are manufactured to professional quality standards.</p><p>6.2. The Buyer must inspect Goods upon delivery and notify of any defects within 7 business days.</p><p>6.3. Failure to notify constitutes acceptance.</p><p>6.4. Minor variations in colour, texture, or measurements within industry tolerances are not defects.</p>'},
                    {t:'7. Returns and Claims',c:'<p>7.1. Returns accepted only for manufacturing defects or incorrect items, with prior written approval.</p><p>7.2. Approved returns shipped back in original packaging within 14 days.</p><p>7.3. PAGUS Menswear may replace defective Goods or issue a credit note.</p><p>7.4. Altered, washed, worn, or damaged Goods are not eligible for return.</p>'},
                    {t:'8. Private Label and Customisation',c:'<p>8.1. Private label and custom branding services available under separate agreements.</p><p>8.2. Custom orders are non-cancellable once production has commenced.</p><p>8.3. The Buyer warrants provided designs do not infringe third-party IP rights.</p>'},
                    {t:'9. Intellectual Property',c:'<p>9.1. All designs, photographs, and content are the exclusive property of PAGUS Menswear.</p><p>9.2. Product images may be used solely for reselling purchased Goods.</p>'},
                    {t:'10. Data Protection (GDPR)',c:'<p>10.1. PAGUS Menswear collects personal data solely for:</p><ul><li>Processing and fulfilling orders</li><li>Communicating regarding orders and inquiries</li><li>Customer support</li><li>B2B marketing communications (with consent or legitimate interest)</li></ul><p>10.2. Under GDPR and Turkish KVKK, the Buyer has the right to access, rectify, erase, restrict, port data, and withdraw consent.</p><p>10.3. Data not shared with third parties except for order fulfilment.</p><p>10.4. Contact: info@pagusmenswear.com</p>'},
                    {t:'11. Cookies',c:'<p>11.1. The Website uses cookies to enhance user experience and analyse traffic.</p><p>11.2. Cookies can be managed through browser settings.</p><p>11.3. Essential cookies cannot be disabled without impacting functionality.</p>'},
                    {t:'12. Limitation of Liability',c:'<p>12.1. Total liability shall not exceed the value of the specific order.</p><p>12.2. No liability for indirect, incidental, or consequential damages.</p><p>12.3. Nothing limits liability for fraud or wilful misconduct.</p>'},
                    {t:'13. Force Majeure',c:'<p>13.1. No liability for failures due to events beyond reasonable control including natural disasters, pandemics, war, trade embargoes, or supply chain disruptions.</p>'},
                    {t:'14. Governing Law',c:'<p>14.1. Governed by the laws of the Republic of Turkey.</p><p>14.2. Disputes submitted to İzmir Courts and Enforcement Offices.</p><p>14.3. EU Buyers may assert mandatory protection rights under their local laws.</p>'},
                    {t:'15. Modifications',c:'<p>15.1. PAGUS Menswear may modify these T&Cs at any time.</p><p>15.2. Continued use constitutes acceptance of modified T&Cs.</p>'},
                    {t:'16. Contact',c:'<div class="tc-contact"><strong>PAGUS Menswear</strong><br>İzmir, Turkey<br>Email: info@pagusmenswear.com<br>WhatsApp: Available on the Website</div>'}
                ]
            },
            it:{
                h1:'Termini e Condizioni',
                sub:'Condizioni Generali di Vendita all\'Ingrosso',
                upd:'Ultimo aggiornamento: Febbraio 2026',
                s:[
                    {t:'1. Definizioni',c:'<ul><li><strong>"Venditore"</strong> si riferisce a PAGUS Menswear, con sede a İzmir, Turchia.</li><li><strong>"Acquirente"</strong> si riferisce a qualsiasi entità commerciale che effettua un ordine all\'ingrosso.</li><li><strong>"Merci"</strong> si riferisce a tutti i prodotti di abbigliamento maschile in vendita.</li><li><strong>"Ordine"</strong> si riferisce a qualsiasi ordine di acquisto inviato dall\'Acquirente.</li><li><strong>"Sito Web"</strong> si riferisce a pagusmenswear.com e tutti i suoi sottodomini.</li></ul>'},
                    {t:'2. Ambito di Applicazione',c:'<p>2.1. Le presenti Condizioni Generali si applicano a tutti gli ordini all\'ingrosso effettuati con PAGUS Menswear tramite Sito Web, email, WhatsApp o qualsiasi altro canale.</p><p>2.2. Effettuando un ordine, l\'Acquirente accetta le presenti Condizioni. Condizioni contrastanti proposte dall\'Acquirente non si applicano salvo accordo scritto.</p><p>2.3. Le presenti Condizioni sono destinate esclusivamente a transazioni B2B. PAGUS Menswear non vende direttamente ai consumatori.</p>'},
                    {t:'3. Ordini e Quantità Minime',c:'<p>3.1. La quantità minima d\'ordine (MOQ) è di 50 pezzi per ordine, salvo diverso accordo scritto.</p><p>3.2. Gli ordini possono essere effettuati tramite modulo di richiesta, email o WhatsApp. Un ordine è confermato solo previa conferma scritta di PAGUS Menswear.</p><p>3.3. PAGUS Menswear si riserva il diritto di rifiutare qualsiasi ordine a sua esclusiva discrezione.</p><p>3.4. La disponibilità dei prodotti è soggetta ai livelli di stock al momento della conferma. Colori e composizioni dei tessuti possono variare leggermente tra i lotti di produzione.</p>'},
                    {t:'4. Prezzi e Pagamento',c:'<p>4.1. Tutti i prezzi sono indicati in Euro (EUR) o Dollari USA (USD), escluse spedizione, assicurazione, dazi doganali e tasse.</p><p>4.2. I prezzi sono validi per 30 giorni dalla data del preventivo.</p><p>4.3. Condizioni standard di pagamento:</p><ul><li>50% di anticipo alla conferma dell\'ordine</li><li>50% di saldo prima della spedizione</li></ul><p>4.4. Pagamento tramite bonifico bancario (SWIFT/IBAN). Tutte le spese bancarie sono a carico dell\'Acquirente.</p><p>4.5. PAGUS Menswear si riserva il diritto di sospendere o annullare ordini in caso di pagamento tardivo o incompleto.</p>'},
                    {t:'5. Spedizione e Consegna',c:'<p>5.1. Le condizioni di consegna sono specificate secondo gli Incoterms® 2020 (es. EXW, FOB, CIF).</p><p>5.2. I tempi di consegna stimati sono indicativi e non vincolanti.</p><p>5.3. Il rischio di perdita o danno passa all\'Acquirente secondo l\'Incoterm concordato.</p><p>5.4. L\'Acquirente è responsabile di tutti i dazi all\'importazione, sdoganamento e tasse locali.</p>'},
                    {t:'6. Qualità e Ispezione',c:'<p>6.1. Tutte le Merci sono fabbricate secondo standard professionali di qualità.</p><p>6.2. L\'Acquirente deve ispezionare le Merci alla consegna e notificare eventuali difetti entro 7 giorni lavorativi.</p><p>6.3. La mancata notifica entro tale periodo costituisce accettazione.</p><p>6.4. Variazioni minime di colore, consistenza o misure entro le tolleranze industriali non costituiscono difetto.</p>'},
                    {t:'7. Resi e Reclami',c:'<p>7.1. I resi sono accettati solo per difetti di fabbricazione o articoli errati, previa approvazione scritta.</p><p>7.2. I resi approvati devono essere spediti nella confezione originale entro 14 giorni.</p><p>7.3. PAGUS Menswear può sostituire le Merci difettose o emettere una nota di credito.</p><p>7.4. Merci alterate, lavate, indossate o danneggiate non sono idonee al reso.</p>'},
                    {t:'8. Private Label e Personalizzazione',c:'<p>8.1. Servizi di private label e personalizzazione disponibili con accordi separati.</p><p>8.2. Gli ordini personalizzati non sono cancellabili una volta avviata la produzione.</p><p>8.3. L\'Acquirente garantisce che i design forniti non violano diritti di proprietà intellettuale di terzi.</p>'},
                    {t:'9. Proprietà Intellettuale',c:'<p>9.1. Tutti i design, le fotografie e i contenuti sono di proprietà esclusiva di PAGUS Menswear.</p><p>9.2. Le immagini dei prodotti possono essere utilizzate esclusivamente per la rivendita delle Merci acquistate.</p>'},
                    {t:'10. Protezione dei Dati (GDPR)',c:'<p>10.1. PAGUS Menswear raccoglie dati personali esclusivamente per:</p><ul><li>Elaborazione ed evasione degli ordini</li><li>Comunicazioni relative a ordini e richieste</li><li>Assistenza clienti</li><li>Comunicazioni marketing B2B (con consenso o legittimo interesse)</li></ul><p>10.2. Ai sensi del GDPR e del KVKK turco, l\'Acquirente ha diritto di accesso, rettifica, cancellazione, limitazione, portabilità e revoca del consenso.</p><p>10.3. I dati non sono condivisi con terzi, salvo necessità per l\'evasione dell\'ordine.</p><p>10.4. Contatto: info@pagusmenswear.com</p>'},
                    {t:'11. Cookie',c:'<p>11.1. Il Sito Web utilizza cookie per migliorare l\'esperienza utente e analizzare il traffico.</p><p>11.2. I cookie possono essere gestiti tramite le impostazioni del browser.</p><p>11.3. I cookie essenziali non possono essere disabilitati senza compromettere la funzionalità.</p>'},
                    {t:'12. Limitazione di Responsabilità',c:'<p>12.1. La responsabilità totale non supera il valore dell\'ordine specifico.</p><p>12.2. Nessuna responsabilità per danni indiretti, incidentali o consequenziali.</p><p>12.3. Nulla limita la responsabilità per frode o dolo.</p>'},
                    {t:'13. Forza Maggiore',c:'<p>13.1. Nessuna responsabilità per inadempimenti dovuti a eventi al di fuori del ragionevole controllo, inclusi disastri naturali, pandemie, guerre, embarghi commerciali o interruzioni della catena di approvvigionamento.</p>'},
                    {t:'14. Legge Applicabile',c:'<p>14.1. Regolato dalle leggi della Repubblica di Turchia.</p><p>14.2. Le controversie sono di competenza dei Tribunali di İzmir.</p><p>14.3. Gli Acquirenti UE possono far valere i diritti di protezione obbligatori previsti dalle leggi del proprio paese.</p>'},
                    {t:'15. Modifiche',c:'<p>15.1. PAGUS Menswear può modificare le presenti Condizioni in qualsiasi momento.</p><p>15.2. L\'uso continuato costituisce accettazione delle Condizioni modificate.</p>'},
                    {t:'16. Contatti',c:'<div class="tc-contact"><strong>PAGUS Menswear</strong><br>İzmir, Turchia<br>Email: info@pagusmenswear.com<br>WhatsApp: Disponibile sul Sito Web</div>'}
                ]
            },
            fr:{
                h1:'Conditions Générales',
                sub:'Conditions Générales de Vente en Gros',
                upd:'Dernière mise à jour : Février 2026',
                s:[
                    {t:'1. Définitions',c:'<ul><li><strong>« Vendeur »</strong> désigne PAGUS Menswear, situé à İzmir, Turquie.</li><li><strong>« Acheteur »</strong> désigne toute entité commerciale passant une commande en gros.</li><li><strong>« Marchandises »</strong> désigne tous les produits de mode masculine proposés à la vente.</li><li><strong>« Commande »</strong> désigne tout bon de commande soumis par l\'Acheteur.</li><li><strong>« Site Web »</strong> désigne pagusmenswear.com et tous ses sous-domaines.</li></ul>'},
                    {t:'2. Portée et Application',c:'<p>2.1. Les présentes CGV s\'appliquent à toutes les commandes en gros passées auprès de PAGUS Menswear via le Site Web, email, WhatsApp ou tout autre canal.</p><p>2.2. En passant commande, l\'Acheteur accepte les présentes CGV. Toute condition contraire ne s\'applique pas sauf accord écrit exprès.</p><p>2.3. Les présentes CGV sont destinées exclusivement aux transactions B2B. PAGUS Menswear ne vend pas directement aux consommateurs.</p>'},
                    {t:'3. Commandes et Quantités Minimales',c:'<p>3.1. La quantité minimale de commande (MOQ) est de 50 pièces, sauf accord écrit contraire.</p><p>3.2. Les commandes peuvent être passées via le formulaire du Site Web, email ou WhatsApp. Une commande n\'est confirmée qu\'après accusé de réception écrit de PAGUS Menswear.</p><p>3.3. PAGUS Menswear se réserve le droit de refuser toute commande à sa seule discrétion.</p><p>3.4. La disponibilité est soumise aux niveaux de stock. Les couleurs et compositions peuvent varier légèrement entre les lots.</p>'},
                    {t:'4. Prix et Paiement',c:'<p>4.1. Tous les prix sont indiqués en Euros (EUR) ou Dollars US (USD), hors frais de port, assurance, droits de douane et taxes.</p><p>4.2. Les prix sont valables 30 jours à compter du devis.</p><p>4.3. Conditions standard de paiement :</p><ul><li>50% d\'acompte à la confirmation</li><li>50% de solde avant expédition</li></ul><p>4.4. Paiement par virement bancaire (SWIFT/IBAN). Tous les frais bancaires sont à la charge de l\'Acheteur.</p><p>4.5. PAGUS Menswear se réserve le droit de suspendre ou annuler les commandes en cas de retard ou défaut de paiement.</p>'},
                    {t:'5. Expédition et Livraison',c:'<p>5.1. Les conditions de livraison sont spécifiées selon les Incoterms® 2020 (ex. EXW, FOB, CIF).</p><p>5.2. Les délais de livraison sont indicatifs et non contraignants.</p><p>5.3. Le risque de perte passe à l\'Acheteur selon l\'Incoterm convenu.</p><p>5.4. L\'Acheteur est responsable de tous les droits d\'importation, dédouanement et taxes locales.</p>'},
                    {t:'6. Qualité et Inspection',c:'<p>6.1. Toutes les Marchandises sont fabriquées selon des normes de qualité professionnelles.</p><p>6.2. L\'Acheteur doit inspecter les Marchandises à la livraison et signaler tout défaut dans les 7 jours ouvrables.</p><p>6.3. L\'absence de notification constitue une acceptation.</p><p>6.4. Les variations mineures de couleur, texture ou mesures dans les tolérances industrielles ne constituent pas un défaut.</p>'},
                    {t:'7. Retours et Réclamations',c:'<p>7.1. Les retours sont acceptés uniquement pour défauts de fabrication ou articles incorrects, avec approbation écrite préalable.</p><p>7.2. Les retours approuvés doivent être expédiés dans l\'emballage d\'origine sous 14 jours.</p><p>7.3. PAGUS Menswear peut remplacer les Marchandises défectueuses ou émettre un avoir.</p><p>7.4. Les Marchandises modifiées, lavées, portées ou endommagées ne sont pas éligibles au retour.</p>'},
                    {t:'8. Marque Privée et Personnalisation',c:'<p>8.1. Services de marque privée et personnalisation disponibles sous accords séparés.</p><p>8.2. Les commandes personnalisées ne sont ni annulables ni remboursables une fois la production lancée.</p><p>8.3. L\'Acheteur garantit que les designs fournis ne portent pas atteinte aux droits de propriété intellectuelle de tiers.</p>'},
                    {t:'9. Propriété Intellectuelle',c:'<p>9.1. Tous les designs, photographies et contenus sont la propriété exclusive de PAGUS Menswear.</p><p>9.2. Les images produits peuvent être utilisées uniquement pour la revente des Marchandises achetées.</p>'},
                    {t:'10. Protection des Données (RGPD)',c:'<p>10.1. PAGUS Menswear collecte des données personnelles uniquement pour :</p><ul><li>Le traitement et l\'exécution des commandes</li><li>Les communications relatives aux commandes</li><li>Le service client</li><li>Les communications marketing B2B (avec consentement ou intérêt légitime)</li></ul><p>10.2. Conformément au RGPD et au KVKK turc, l\'Acheteur dispose des droits d\'accès, rectification, effacement, limitation, portabilité et retrait du consentement.</p><p>10.3. Les données ne sont pas partagées avec des tiers sauf nécessité pour l\'exécution de la commande.</p><p>10.4. Contact : info@pagusmenswear.com</p>'},
                    {t:'11. Cookies',c:'<p>11.1. Le Site Web utilise des cookies pour améliorer l\'expérience utilisateur et analyser le trafic.</p><p>11.2. Les cookies peuvent être gérés via les paramètres du navigateur.</p><p>11.3. Les cookies essentiels ne peuvent pas être désactivés sans impact sur la fonctionnalité.</p>'},
                    {t:'12. Limitation de Responsabilité',c:'<p>12.1. La responsabilité totale ne dépasse pas la valeur de la commande spécifique.</p><p>12.2. Aucune responsabilité pour dommages indirects, accessoires ou consécutifs.</p><p>12.3. Rien ne limite la responsabilité pour fraude ou faute intentionnelle.</p>'},
                    {t:'13. Force Majeure',c:'<p>13.1. Aucune responsabilité en cas d\'inexécution due à des événements hors contrôle raisonnable, y compris catastrophes naturelles, pandémies, guerres, embargos ou perturbations de la chaîne d\'approvisionnement.</p>'},
                    {t:'14. Droit Applicable',c:'<p>14.1. Régi par les lois de la République de Turquie.</p><p>14.2. Les litiges sont soumis à la compétence exclusive des Tribunaux d\'İzmir.</p><p>14.3. Les Acheteurs de l\'UE peuvent faire valoir les droits de protection obligatoires de leur pays de résidence.</p>'},
                    {t:'15. Modifications',c:'<p>15.1. PAGUS Menswear peut modifier les présentes CGV à tout moment.</p><p>15.2. L\'utilisation continue constitue une acceptation des CGV modifiées.</p>'},
                    {t:'16. Contact',c:'<div class="tc-contact"><strong>PAGUS Menswear</strong><br>İzmir, Turquie<br>Email : info@pagusmenswear.com<br>WhatsApp : Disponible sur le Site Web</div>'}
                ]
            },
            de:{
                h1:'Allgemeine Geschäftsbedingungen',
                sub:'Allgemeine Geschäftsbedingungen für den Großhandelsverkauf',
                upd:'Letzte Aktualisierung: Februar 2026',
                s:[
                    {t:'1. Definitionen',c:'<ul><li><strong>„Verkäufer"</strong> bezieht sich auf PAGUS Menswear mit Sitz in İzmir, Türkei.</li><li><strong>„Käufer"</strong> bezieht sich auf jede Geschäftseinheit, die eine Großhandelsbestellung aufgibt.</li><li><strong>„Waren"</strong> bezieht sich auf alle zum Verkauf angebotenen Herrenbekleidungsprodukte.</li><li><strong>„Bestellung"</strong> bezieht sich auf jeden vom Käufer eingereichten Kaufauftrag.</li><li><strong>„Website"</strong> bezieht sich auf pagusmenswear.com und alle Subdomains.</li></ul>'},
                    {t:'2. Geltungsbereich',c:'<p>2.1. Diese AGB gelten für alle Großhandelsbestellungen bei PAGUS Menswear über die Website, E-Mail, WhatsApp oder jeden anderen Kanal.</p><p>2.2. Mit der Bestellung akzeptiert der Käufer diese AGB. Abweichende Bedingungen des Käufers gelten nicht, sofern nicht ausdrücklich schriftlich vereinbart.</p><p>2.3. Diese AGB gelten ausschließlich für B2B-Transaktionen. PAGUS Menswear verkauft nicht direkt an Verbraucher.</p>'},
                    {t:'3. Bestellungen und Mindestmengen',c:'<p>3.1. Die Mindestbestellmenge (MOQ) beträgt 50 Stück pro Bestellung, sofern nicht schriftlich anders vereinbart.</p><p>3.2. Bestellungen können über das Anfrageformular, E-Mail oder WhatsApp aufgegeben werden. Eine Bestellung gilt erst nach schriftlicher Bestätigung durch PAGUS Menswear als bestätigt.</p><p>3.3. PAGUS Menswear behält sich das Recht vor, Bestellungen nach eigenem Ermessen abzulehnen.</p><p>3.4. Die Produktverfügbarkeit unterliegt den Lagerbeständen. Farben und Stoffzusammensetzungen können zwischen Produktionschargen leicht variieren.</p>'},
                    {t:'4. Preise und Zahlung',c:'<p>4.1. Alle Preise verstehen sich in Euro (EUR) oder US-Dollar (USD), zuzüglich Versand, Versicherung, Zölle und Steuern.</p><p>4.2. Preise gelten 30 Tage ab Angebotsdatum.</p><p>4.3. Standard-Zahlungsbedingungen:</p><ul><li>50% Anzahlung bei Auftragsbestätigung</li><li>50% Restbetrag vor Versand</li></ul><p>4.4. Zahlung per Banküberweisung (SWIFT/IBAN). Alle Bankgebühren trägt der Käufer.</p><p>4.5. PAGUS Menswear behält sich das Recht vor, Bestellungen bei verspäteter oder unvollständiger Zahlung auszusetzen oder zu stornieren.</p>'},
                    {t:'5. Versand und Lieferung',c:'<p>5.1. Lieferbedingungen werden gemäß Incoterms® 2020 spezifiziert (z.B. EXW, FOB, CIF).</p><p>5.2. Geschätzte Lieferzeiten sind unverbindlich.</p><p>5.3. Das Verlustrisiko geht gemäß vereinbartem Incoterm auf den Käufer über.</p><p>5.4. Der Käufer ist für alle Einfuhrzölle, Zollabfertigung und lokale Steuern verantwortlich.</p>'},
                    {t:'6. Qualität und Prüfung',c:'<p>6.1. Alle Waren werden nach professionellen Qualitätsstandards hergestellt.</p><p>6.2. Der Käufer muss die Waren bei Lieferung prüfen und Mängel innerhalb von 7 Werktagen melden.</p><p>6.3. Unterlassene Meldung gilt als Annahme.</p><p>6.4. Geringfügige Abweichungen bei Farbe, Textur oder Maßen innerhalb branchenüblicher Toleranzen gelten nicht als Mangel.</p>'},
                    {t:'7. Retouren und Reklamationen',c:'<p>7.1. Retouren nur bei Herstellungsfehlern oder falschen Artikeln nach vorheriger schriftlicher Genehmigung.</p><p>7.2. Genehmigte Retouren müssen in Originalverpackung innerhalb von 14 Tagen zurückgesandt werden.</p><p>7.3. PAGUS Menswear kann mangelhafte Waren ersetzen oder eine Gutschrift ausstellen.</p><p>7.4. Veränderte, gewaschene, getragene oder beschädigte Waren sind nicht retournierbar.</p>'},
                    {t:'8. Private Label und Individualisierung',c:'<p>8.1. Private-Label- und individuelle Branding-Services sind unter separaten Vereinbarungen verfügbar.</p><p>8.2. Individuelle Bestellungen sind nach Produktionsbeginn nicht stornierbar.</p><p>8.3. Der Käufer garantiert, dass bereitgestellte Designs keine IP-Rechte Dritter verletzen.</p>'},
                    {t:'9. Geistiges Eigentum',c:'<p>9.1. Alle Designs, Fotografien und Inhalte sind ausschließliches Eigentum von PAGUS Menswear.</p><p>9.2. Produktbilder dürfen ausschließlich zum Weiterverkauf der gekauften Waren verwendet werden.</p>'},
                    {t:'10. Datenschutz (DSGVO)',c:'<p>10.1. PAGUS Menswear erhebt personenbezogene Daten ausschließlich für:</p><ul><li>Bestellabwicklung und -erfüllung</li><li>Kommunikation bezüglich Bestellungen und Anfragen</li><li>Kundenservice</li><li>B2B-Marketingkommunikation (mit Einwilligung oder berechtigtem Interesse)</li></ul><p>10.2. Gemäß DSGVO und türkischem KVKK hat der Käufer das Recht auf Auskunft, Berichtigung, Löschung, Einschränkung, Datenportabilität und Widerruf der Einwilligung.</p><p>10.3. Daten werden nicht an Dritte weitergegeben, außer zur Auftragsabwicklung.</p><p>10.4. Kontakt: info@pagusmenswear.com</p>'},
                    {t:'11. Cookies',c:'<p>11.1. Die Website verwendet Cookies zur Verbesserung der Benutzererfahrung und Analyse des Datenverkehrs.</p><p>11.2. Cookies können über Browsereinstellungen verwaltet werden.</p><p>11.3. Essentielle Cookies können nicht ohne Funktionseinschränkung deaktiviert werden.</p>'},
                    {t:'12. Haftungsbeschränkung',c:'<p>12.1. Die Gesamthaftung übersteigt nicht den Wert der jeweiligen Bestellung.</p><p>12.2. Keine Haftung für indirekte, beiläufige oder Folgeschäden.</p><p>12.3. Nichts beschränkt die Haftung bei Betrug oder vorsätzlichem Fehlverhalten.</p>'},
                    {t:'13. Höhere Gewalt',c:'<p>13.1. Keine Haftung bei Nichterfüllung aufgrund von Ereignissen außerhalb zumutbarer Kontrolle, einschließlich Naturkatastrophen, Pandemien, Krieg, Handelsembargos oder Lieferkettenunterbrechungen.</p>'},
                    {t:'14. Anwendbares Recht',c:'<p>14.1. Es gilt das Recht der Republik Türkei.</p><p>14.2. Streitigkeiten unterliegen der ausschließlichen Zuständigkeit der Gerichte in İzmir.</p><p>14.3. EU-Käufer können zwingende Schutzrechte ihres Wohnsitzlandes geltend machen.</p>'},
                    {t:'15. Änderungen',c:'<p>15.1. PAGUS Menswear kann diese AGB jederzeit ändern.</p><p>15.2. Die fortgesetzte Nutzung gilt als Akzeptanz der geänderten AGB.</p>'},
                    {t:'16. Kontakt',c:'<div class="tc-contact"><strong>PAGUS Menswear</strong><br>İzmir, Türkei<br>E-Mail: info@pagusmenswear.com<br>WhatsApp: Auf der Website verfügbar</div>'}
                ]
            }
        };

        // ===================== APPLY LANGUAGE =====================
        function applyLanguage(){
            // Text content
            document.querySelectorAll('[data-t]').forEach(function(el){
                var key=el.getAttribute('data-t');
                if(I18N[key]&&I18N[key][LANG]){
                    if(key==='cookie_text'||key==='ft_why_text') el.innerHTML=I18N[key][LANG];
                    else el.textContent=I18N[key][LANG];
                }
            });
            // Placeholders
            document.querySelectorAll('[data-tp]').forEach(function(el){
                var key=el.getAttribute('data-tp');
                if(I18N[key]&&I18N[key][LANG]) el.placeholder=I18N[key][LANG];
            });
            // Flag active state
            SUPPORTED_LANGS.forEach(function(l){
                var b=document.getElementById('langBtn_'+l);
                if(b) b.classList.toggle('active',l===LANG);
            });
            // Render T&C
            renderTC();
        }

        function renderTC(){
            var d=TC[LANG]||TC['en'];
            var h='<h1>'+d.h1+'</h1><div class="tc-subtitle">'+d.sub+'</div><div class="tc-updated">'+d.upd+'</div>';
            d.s.forEach(function(sec){ h+='<h2>'+sec.t+'</h2>'+sec.c; });
            h+='<p style="margin-top:20px;color:#999;font-size:0.8rem;font-style:italic;">'+d.upd+'</p>';
            var el=document.getElementById('tcContent');
            if(el) el.innerHTML=h;
        }

        function setLang(lang){
            LANG=lang;
            localStorage.setItem('pagusLang',lang);
            applyLanguage();
            // Refresh dynamic JS-rendered content
            if(typeof refreshPriceDisplays==='function') refreshPriceDisplays();
            // Re-render current view if on a category/subcategory page
            var up=new URLSearchParams(window.location.search);
            if(up.get('search')||up.get('adv_cats')||up.get('adv_subs')){
                doSearchDisplay(up.get('search')||'');
            } else if(up.get('subcategory')){
                showProducts();
            } else if(up.get('category')){
                showSubs();
            } else if(typeof renderShowcase==='function'){
                renderShowcase();
            }
        }

        function openTerms(){
            document.getElementById('tcOverlay').classList.add('visible');
            document.body.style.overflow='hidden';
        }
        function closeTerms(){
            document.getElementById('tcOverlay').classList.remove('visible');
            document.body.style.overflow='';
        }
        document.addEventListener('keydown',function(e){
            if(e.key==='Escape'&&document.getElementById('tcOverlay').classList.contains('visible')) closeTerms();
        });
        var urlParams=new URLSearchParams(window.location.search);
        var curCat=urlParams.get('category')||"Wedding Suits";
        var curSub=urlParams.get('subcategory');

        var cart=[];
        var lsAvailable=true;
        try{localStorage.setItem('_test','1');localStorage.removeItem('_test');cart=JSON.parse(localStorage.getItem('pagusCart'))||[];}catch(e){lsAvailable=false;cart=[];}

        // FIX #14: Footer year without document.write
        document.getElementById('footerYear').textContent=new Date().getFullYear();

        // ===================== UTILITY FUNCTIONS =====================

        function escapeHTML(s){
            if(!s)return '';
            return String(s).replace(/[&<>'"]/g,function(t){
                return{'&':'&amp;','<':'&lt;','>':'&gt;',"'":'&#39;','"':'&quot;'}[t];
            });
        }

        // FIX #6: Removed dead escapeJS function (was defined but never called)

        function escapeAttr(s){
            if(!s)return '';
            return String(s).replace(/[&<>"'`=\/]/g,function(t){
                return'&#'+t.charCodeAt(0)+';';
            });
        }

        // FIX #5: Strict focal-y sanitizer — only allows integer 0-100, prevents XSS via inline style
        function safeFocalY(val){
            var n=parseInt(val,10);
            if(isNaN(n)||n<0||n>100) return 20;
            return n;
        }

        // FIX #11: Styled toast notification instead of native alert()
        function showToast(msg,duration){
            duration=duration||3000;
            var t=document.getElementById('toastNotification');
            t.textContent=msg;
            t.classList.add('visible');
            clearTimeout(PAGUS.state.toastTimer);
            PAGUS.state.toastTimer=setTimeout(function(){t.classList.remove('visible');},duration);
        }

        function setLanguage(){
            applyLanguage();
        }

        // ===================== PRODUCT DATA INIT =====================

        if(typeof productsDB==='undefined'){
            document.getElementById('pGrid').innerHTML="<div style='text-align:center;width:100%;padding:50px;color:red;'>"+t('error_inventory')+"</div>";
        }else{
            productsDB.forEach(function(p){
                if(p.category&&p.category.includes(' > ')){
                    var a=p.category.split(' > ');
                    p.mainCat=a[0].trim();
                    p.subCat=a[1].trim();
                }else{
                    p.mainCat=p.category;
                    p.subCat="General";
                }
                p.code=p.id;
                p.realCode=p.id;
                p.folderPath=p.path;
                p.focalY=p.focal_y||20;
            });
            setLanguage();
            init();
            updateCartUI();
        }

        // ===================== SHOWCASE =====================
        // FIX #13: tabindex + keyboard Enter/Space for accessibility

        function renderShowcase(){
            var grid=document.getElementById('showcaseGrid');
            if(!grid)return;
            if(typeof productsDB==='undefined'||!productsDB||productsDB.length===0){grid.innerHTML='';return;}

            // Group products by subcategory
            var subCatProducts={};
            for(var i=0;i<productsDB.length;i++){
                var p=productsDB[i];
                var sc=p.subCat||(p.category.indexOf(' > ')>-1?p.category.split(' > ')[1]:p.category);
                if(!subCatProducts[sc])subCatProducts[sc]=[];
                subCatProducts[sc].push(p);
            }

            // Shuffle subcategories and pick 4 unique ones
            var subCats=Object.keys(subCatProducts);
            for(var s=subCats.length-1;s>0;s--){
                var r=Math.floor(Math.random()*(s+1));
                var tmp=subCats[s]; subCats[s]=subCats[r]; subCats[r]=tmp;
            }

            var items=[];
            for(var c=0;c<subCats.length&&items.length<4;c++){
                var scName=subCats[c];
                var prods=subCatProducts[scName];
                var randProd=prods[Math.floor(Math.random()*prods.length)];
                var mainCat=randProd.mainCat||(randProd.category.indexOf(' > ')>-1?randProd.category.split(' > ')[0]:randProd.category);
                items.push({cat:mainCat,subCat:scName,path:randProd.path,prodId:randProd.id});
            }

            var photoNums=[1,3,4];
            var html='';
            for(var k=0;k<items.length;k++){
                var it=items[k];
                var displayName=getCatDisplayName(it.subCat)||it.subCat;
                html+='<div class="showcase-item" tabindex="0" role="link" data-cat="'+escapeAttr(it.cat)+'" data-sub="'+escapeAttr(it.subCat)+'" data-highlight="'+escapeAttr(it.prodId)+'"'
                    +' onclick="window.location.href=\'?category=\'+encodeURIComponent(this.dataset.cat)+\'&subcategory=\'+encodeURIComponent(this.dataset.sub)+\'&highlight=\'+encodeURIComponent(this.dataset.highlight)"'
                    +' onkeydown="if(event.key===\'Enter\'||event.key===\' \'){event.preventDefault();window.location.href=\'?category=\'+encodeURIComponent(this.dataset.cat)+\'&subcategory=\'+encodeURIComponent(this.dataset.sub)+\'&highlight=\'+encodeURIComponent(this.dataset.highlight);}">';
                for(var pi=0;pi<photoNums.length;pi++){
                    html+='<img src="'+escapeAttr(it.path)+'/'+photoNums[pi]+'.webp" alt="'+escapeAttr(displayName)+'"'
                        +(pi===0?' class="active"':'')
                        +' onerror="this.style.display=\'none\'">';
                }
                html+='<div class="showcase-overlay"><span>'+escapeHTML(displayName).toUpperCase()+'</span></div></div>';
            }
            grid.innerHTML=html;

            // Auto-cycle images every 3 seconds
            var showcaseItems=grid.querySelectorAll('.showcase-item');
            showcaseItems.forEach(function(item,idx){
                var imgs=item.querySelectorAll('img');
                if(imgs.length<2)return;
                var cur=0;
                setInterval(function(){
                    imgs[cur].classList.remove('active');
                    cur=(cur+1)%imgs.length;
                    // Skip hidden (errored) images
                    var tries=0;
                    while(imgs[cur].style.display==='none'&&tries<imgs.length){
                        cur=(cur+1)%imgs.length;
                        tries++;
                    }
                    imgs[cur].classList.add('active');
                },3000+idx*500);
            });
        }

        // ===================== MAIN INIT =====================
        // FIX #2: Null-safe element access throughout

        function init(){
            var waUrl='https://wa.me/'+WHATSAPP_NUMBER;
            var wl=document.getElementById('waLink');
            if(wl)wl.href=waUrl;
            var pl=document.getElementById('plWaLink');
            if(pl)pl.href=waUrl;
            var fw=document.getElementById('footerWa');
            if(fw)fw.textContent='+'+WHATSAPP_NUMBER;

            var hero=document.getElementById('heroSection');
            var showcase=document.getElementById('showcaseSection');
            var carousel=document.getElementById('carouselSection');
            var pta=document.getElementById('pageTitleArea');
            var sr=document.getElementById('searchResults');
            var floatCartBtn=document.getElementById('floatCart');
            var privLabel=document.getElementById('privateLabelSection');
            var searchBox=document.querySelector('.search-area');

            // FIX #2: Every element access guarded with null check
            if(!FEATURES.hero&&hero)hero.style.display='none';
            if(!FEATURES.showcase&&showcase)showcase.style.display='none';
            if(!FEATURES.carousel&&carousel)carousel.style.display='none';
            if(!FEATURES.whatsappFloat&&floatCartBtn)floatCartBtn.style.display='none';
            if(!FEATURES.privateLabel&&privLabel)privLabel.style.display='none';
            if(!FEATURES.search&&searchBox)searchBox.style.display='none';
            if(!FEATURES.favorites){
                document.querySelectorAll('.heart-btn').forEach(function(b){b.style.display='none';});
                document.querySelectorAll('.fab').forEach(function(b){b.style.display='none';});
            }

            if(urlParams.get('search')||urlParams.get('adv_cats')||urlParams.get('adv_subs')){
                if(hero)hero.style.display='none';
                if(showcase)showcase.style.display='none';
                if(carousel)carousel.style.display='none';
                if(pta)pta.style.display='none';
                if(sr)sr.style.display='block';
                document.getElementById('pGrid').style.display='none';
                if(privLabel)privLabel.style.display='none';
                doSearchDisplay(urlParams.get('search')||'');
            }else if(urlParams.get('category')||urlParams.get('subcategory')){
                if(hero)hero.style.display='none';
                if(showcase)showcase.style.display='none';
                if(carousel)carousel.style.display='none';
                if(sr)sr.style.display='none';
                if(pta)pta.style.display='block';
                if(curSub) showProducts(); else showSubs();
            }else{
                if(FEATURES.hero&&hero)hero.style.display='block';
                if(FEATURES.showcase&&showcase){showcase.style.display='block';renderShowcase();}
                // FIX #1: Carousel init with proper HTML
                if(FEATURES.carousel&&carousel){carousel.style.display='block';startCarousel();}
                if(pta)pta.style.display='none';
                if(sr)sr.style.display='none';
                document.getElementById('pGrid').style.display='none';
            }
        }

        // ===================== SEARCH =====================
        // FIX #11: Toast instead of alert, with i18n
        // FIX #5: safeFocalY in search results

        // ===================== SEARCH =====================

        function toggleSearchBar(){
            var exp=document.getElementById('searchExpand');
            exp.classList.toggle('open');
            if(exp.classList.contains('open')){
                setTimeout(function(){ document.getElementById('siteSearch').focus(); },350);
            }
        }
        document.addEventListener('click',function(e){
            var area=document.querySelector('.search-area');
            if(area&&!area.contains(e.target)){
                document.getElementById('searchExpand').classList.remove('open');
            }
        });

        function doSiteSearch(){
            var q=document.getElementById('siteSearch').value.trim();
            if(q.length<2){
                showToast(t('search_min'));
                return;
            }
            window.location.href='?search='+encodeURIComponent(q);
        }

        function openSearchResult(resultIdx){
            if(!PAGUS.state.searchResults||!PAGUS.state.searchResults[resultIdx])return;
            var r=PAGUS.state.searchResults[resultIdx];
            openModal(r.id,r.id,r.path);
        }

        // --- Advanced Search ---
        function buildAdvancedSearchUI(){
            if(typeof productsDB==='undefined')return;
            var cats={}, subs={};
            productsDB.forEach(function(p){
                var mc=p.mainCat||(p.category.indexOf(' > ')>-1?p.category.split(' > ')[0]:p.category);
                if(!cats[mc])cats[mc]=0; cats[mc]++;
                var sc=p.subCat||(p.category.indexOf(' > ')>-1?p.category.split(' > ')[1]:'General');
                if(sc&&sc!=='General'){ if(!subs[sc])subs[sc]={count:0,parent:mc}; subs[sc].count++; }
            });
            var html='';
            Object.keys(cats).forEach(function(cat,i){
                var catDisplay=getCatDisplayName(cat)||cat;
                html+='<div class="adv-check"><input type="checkbox" id="advCat'+i+'" value="'+escapeAttr(cat)+'" onchange="onAdvCatChange()">'
                    +'<label for="advCat'+i+'">'+escapeHTML(catDisplay)+' <span style="opacity:0.5;font-size:0.7rem">('+cats[cat]+')</span></label></div>';
            });
            document.getElementById('advCategoryChecks').innerHTML=html;
            var subKeys=Object.keys(subs);
            if(subKeys.length>0){
                var shtml='';
                subKeys.forEach(function(sub,i){
                    var subDisplay=getCatDisplayName(sub)||sub;
                    shtml+='<div class="adv-check" data-parent="'+escapeAttr(subs[sub].parent)+'"><input type="checkbox" id="advSub'+i+'" value="'+escapeAttr(sub)+'">'
                        +'<label for="advSub'+i+'">'+escapeHTML(subDisplay)+' <span style="opacity:0.5;font-size:0.7rem">('+subs[sub].count+')</span></label></div>';
                });
                document.getElementById('advSubChecks').innerHTML=shtml;
                document.getElementById('advSubSection').style.display='block';
            }else{ document.getElementById('advSubSection').style.display='none'; }
        }
        function onAdvCatChange(){
            var selectedCats=[];
            document.querySelectorAll('#advCategoryChecks input:checked').forEach(function(cb){ selectedCats.push(cb.value); });
            document.querySelectorAll('#advSubChecks .adv-check').forEach(function(el){
                var parent=el.getAttribute('data-parent');
                if(selectedCats.length===0||selectedCats.indexOf(parent)>-1){ el.style.display=''; }
                else{ el.style.display='none'; el.querySelector('input').checked=false; }
            });
        }
        function openAdvancedSearch(){
            buildAdvancedSearchUI();
            document.getElementById('advPanelOverlay').classList.add('visible');
            document.body.style.overflow='hidden';
            setTimeout(function(){ var kw=document.getElementById('advKeyword'); if(kw)kw.focus(); },300);
        }
        function closeAdvancedSearch(){
            document.getElementById('advPanelOverlay').classList.remove('visible');
            document.body.style.overflow='';
        }
        function clearAdvancedSearch(){
            document.getElementById('advKeyword').value='';
            document.querySelectorAll('#advCategoryChecks input, #advSubChecks input').forEach(function(cb){cb.checked=false;});
            onAdvCatChange();
        }
        function runAdvancedSearch(){
            var keyword=(document.getElementById('advKeyword').value||'').trim().toLowerCase();
            var selectedCats=[];
            document.querySelectorAll('#advCategoryChecks input:checked').forEach(function(cb){ selectedCats.push(cb.value.toLowerCase()); });
            var selectedSubs=[];
            document.querySelectorAll('#advSubChecks input:checked').forEach(function(cb){ selectedSubs.push(cb.value.toLowerCase()); });
            closeAdvancedSearch();
            var params=[];
            if(keyword) params.push('search='+encodeURIComponent(keyword));
            if(selectedCats.length) params.push('adv_cats='+encodeURIComponent(selectedCats.join('|')));
            if(selectedSubs.length) params.push('adv_subs='+encodeURIComponent(selectedSubs.join('|')));
            if(params.length===0){ showToast(t('search_min')); return; }
            window.location.href='?'+params.join('&');
        }
        document.addEventListener('keydown',function(e){
            if(e.key==='Escape'&&document.getElementById('advPanelOverlay').classList.contains('visible')) closeAdvancedSearch();
        });

        function doSearchDisplay(q){
            var urlP=new URLSearchParams(window.location.search);
            var advCats=(urlP.get('adv_cats')||'').toLowerCase().split('|').filter(Boolean);
            var advSubs=(urlP.get('adv_subs')||'').toLowerCase().split('|').filter(Boolean);
            var qLower=(q||'').toLowerCase();
            var isAdvanced=advCats.length>0||advSubs.length>0;
            var results=[];
            for(var i=0;i<productsDB.length;i++){
                var p=productsDB[i];
                var pMainCat=(p.mainCat||(p.category.indexOf(' > ')>-1?p.category.split(' > ')[0]:p.category)).toLowerCase();
                var pSubCat=(p.subCat||(p.category.indexOf(' > ')>-1?p.category.split(' > ')[1]:'General')).toLowerCase();
                var matchKw=!qLower||p.id.toLowerCase().indexOf(qLower)>-1||p.category.toLowerCase().indexOf(qLower)>-1;
                var matchCat=true;
                if(advSubs.length>0){ matchCat=advSubs.indexOf(pSubCat)>-1; }
                else if(advCats.length>0){ matchCat=advCats.indexOf(pMainCat)>-1; }
                if(matchKw&&matchCat) results.push(p);
            }
            var groups={}, groupOrder=[];
            for(var j=0;j<results.length;j++){
                var r=results[j];
                var groupName=r.subCat||r.mainCat||r.category;
                if(!groups[groupName]){groups[groupName]=[];groupOrder.push(groupName);}
                groups[groupName].push({item:r,globalIdx:j});
            }
            var container=document.getElementById('searchResults');
            var safeQ=escapeHTML(q||'');
            var titleText=results.length+' '+(results.length===1?t('result_singular'):t('results_plural'));
            if(safeQ) titleText+=' '+t('results_for')+' "'+safeQ+'"';
            if(isAdvanced) titleText+=' '+t('filtered_label');
            var html='<div class="search-results-section"><h2 class="search-results-title">'+titleText+'</h2>';
            if(results.length===0){
                html+='<p style="text-align:center;color:#999;padding:50px;">'+t('adv_no_results')+'</p>';
            }else{
                for(var g=0;g<groupOrder.length;g++){
                    var gName=groupOrder[g]; var items=groups[gName];
                    var gDisplay=getCatDisplayName(gName)||gName;
                    html+='<div class="search-group"><h3 class="search-group-title">'+escapeHTML(gDisplay)+'<span class="search-group-count">('+items.length+')</span></h3>';
                    html+='<div class="search-results-grid">';
                    for(var k=0;k<items.length;k++){
                        var ri=items[k].item; var gi=items[k].globalIdx;
                        var fy=safeFocalY(ri.focalY||ri.focal_y);
                        html+='<div class="search-result-card" onclick="openSearchResult('+gi+')">';
                        html+='<img src="'+escapeAttr(ri.path)+'/1.webp" style="object-position:center '+fy+'%;" alt="'+escapeAttr(ri.id)+'" loading="lazy">';
                        html+='<div class="info"><h4>'+escapeHTML(ri.id)+'</h4><span>'+escapeHTML(gDisplay)+'</span>'
                            +'<div data-price-id="'+escapeAttr(ri.id)+'" style="margin-top:5px;"></div></div></div>';
                    }
                    html+='</div></div>';
                }
            }
            html+='</div>';
            container.innerHTML=html;
            PAGUS.state.searchResults=results;
            if(typeof refreshPriceDisplays==='function') refreshPriceDisplays();
        }

        // ===================== SUBCATEGORY & PRODUCT VIEWS =====================
        // FIX #5: safeFocalY everywhere
        // FIX #12: Formatted for readability (was single-line minified)
        // FIX #13: aria-labels on heart buttons

        function showSubs(){
            document.getElementById('pGrid').style.display='grid';
            var cd=productsDB.find(function(p){return p.mainCat.toLowerCase()===curCat.toLowerCase();});
            var dc=cd?cd.mainCat:curCat;
            document.getElementById('pTitle').textContent=getCatDisplayName(dc)||dc;
            document.getElementById('back').style.display="none";
            document.getElementById('infoGuide').style.display="none";

            var ss=[...new Set(productsDB.filter(function(p){
                return p.mainCat.toLowerCase()===curCat.toLowerCase();
            }).map(function(p){return p.subCat;}))];

            if(ss.length===0){
                document.getElementById('pGrid').innerHTML='<div style="grid-column:1/-1;text-align:center;color:#999;padding:50px;">'+t('collection_updating')+'</div>';
                return;
            }

            document.getElementById('pGrid').innerHTML=ss.map(function(s){
                var cv=productsDB.find(function(p){return p.subCat===s;});
                var ss2=escapeHTML(getCatDisplayName(s)||s);
                var ip=escapeAttr(cv.folderPath)+'/1.webp';
                var fy=safeFocalY(cv.focalY);
                return '<div class="card" data-cat="'+escapeAttr(curCat)+'" data-sub="'+escapeAttr(s)+'"'
                    +' onclick="window.location.href=\'?category=\'+encodeURIComponent(this.dataset.cat)+\'&subcategory=\'+encodeURIComponent(this.dataset.sub)">'
                    +'<div class="img-box"><img src="'+ip+'" style="object-position:center '+fy+'%;" loading="lazy" onerror="this.parentElement.style.background=\'#ddd\';" alt="'+escapeAttr(s)+'"></div>'
                    +'<div class="info-box"><h3 class="info-title">'+ss2+'</h3>'
                    +'<span style="color:var(--color-gold);font-size:0.7rem;font-weight:700;">'+t('view_collection')+'</span></div></div>';
            }).join('');
        }

        function showProducts(){
            document.getElementById('pGrid').style.display='grid';
            document.getElementById('pTitle').textContent=getCatDisplayName(curSub)||curSub;
            document.getElementById('back').style.display="inline-block";
            document.getElementById('infoGuide').style.display="flex";

            var ps=productsDB.filter(function(p){
                return p.mainCat.toLowerCase()===curCat.toLowerCase()&&p.subCat===curSub;
            });

            if(ps.length===0){
                document.getElementById('pGrid').innerHTML='<div style="text-align:center;width:100%;">'+t('no_products')+'</div>';
                return;
            }

            PAGUS.state.currentProducts=ps;

            document.getElementById('pGrid').innerHTML=ps.map(function(p,i){
                var ip=escapeAttr(p.folderPath)+'/1.webp';
                var fy=safeFocalY(p.focalY);
                var f=cart.includes(p.realCode)?'active':'';
                var h=f?'\u2665':'\u2661';
                // FIX #13: aria-label on heart buttons
                var ariaLabel=f?'Remove '+escapeAttr(p.realCode)+' from list':'Add '+escapeAttr(p.realCode)+' to list';
                var hlClass=urlParams.get('highlight')===p.realCode?' card-highlight':'';
                return '<div class="card'+hlClass+'" data-pidx="'+i+'" data-code="'+escapeAttr(p.realCode)+'" onclick="openProductByIdx('+i+')">'
                    +'<button class="heart-btn '+f+'" data-code="'+escapeAttr(p.realCode)+'" onclick="toggleCartSafe(event,this)" aria-label="'+ariaLabel+'">'+h+'</button>'
                    +'<div class="img-box"><img src="'+ip+'" style="object-position:center '+fy+'%;" loading="lazy" onerror="this.parentElement.style.background=\'#ddd\';" alt="'+escapeAttr(p.realCode)+'"></div>'
                    +'<h3 class="info-title">'+escapeHTML(p.realCode)+'</h3>'
                    +'<div data-price-id="'+escapeAttr(p.realCode)+'"></div></div>';
            }).join('');
            if(typeof refreshPriceDisplays==='function') refreshPriceDisplays();

            // Scroll to highlighted product
            var hlEl=document.querySelector('.card-highlight');
            if(hlEl){ setTimeout(function(){ hlEl.scrollIntoView({behavior:'smooth',block:'center'}); },300); }
        }

        function openProductByIdx(i){
            if(!PAGUS.state.currentProducts||!PAGUS.state.currentProducts[i])return;
            var p=PAGUS.state.currentProducts[i];
            openModal(p.code,p.realCode,p.folderPath);
        }

        // FIX #13: Update aria-label when toggling
        function toggleCartSafe(e,btn){
            e.stopPropagation();
            var c=btn.dataset.code;
            if(cart.includes(c)){
                cart=cart.filter(function(i){return i!==c;});
                btn.innerText='\u2661';
                btn.classList.remove('active');
                btn.setAttribute('aria-label','Add '+c+' to list');
            }else{
                cart.push(c);
                btn.innerText='\u2665';
                btn.classList.add('active');
                btn.setAttribute('aria-label','Remove '+c+' from list');
            }
            if(lsAvailable)localStorage.setItem('pagusCart',JSON.stringify(cart));
            if(typeof saveFavToFirestore==='function') saveFavToFirestore(c, cart.includes(c));
            updateCartUI();
        }

        function goBack(){window.location.href='?category='+encodeURIComponent(curCat);}

        function updateCartUI(){
            var b=document.getElementById('floatCart');
            var c=document.getElementById('cartCount');
            c.innerText=cart.length;
            b.style.display=cart.length>0?"flex":"none";
        }

        // ===================== WHATSAPP CART =====================
        // FIX #7: Only clear cart after confirmed WhatsApp window opened
        // Uses visibilitychange instead of blind setTimeout

        function sendListToWhatsapp(){
            if(cart.length===0)return;
            var c=cart.join(", ");
            var m=t('wa_list_header')+"\n\n"+c+"\n\n"+t('wa_list_footer');

            var waWindow=window.open('https://wa.me/'+WHATSAPP_NUMBER+'?text='+encodeURIComponent(m),'_blank');

            if(waWindow){
                // FIX #7: Clear cart when user returns from WhatsApp tab
                var clearOnReturn=function(){
                    if(document.visibilityState==='visible'){
                        document.removeEventListener('visibilitychange',clearOnReturn);
                        cart=[];
                        if(lsAvailable)localStorage.removeItem('pagusCart');
                        updateCartUI();
                        document.querySelectorAll('.heart-btn').forEach(function(b){
                            b.innerText='\u2661';
                            b.classList.remove('active');
                            b.setAttribute('aria-label','Add '+b.dataset.code+' to list');
                        });
                    }
                };
                document.addEventListener('visibilitychange',clearOnReturn);
            }else{
                // FIX #7: Popup was blocked — notify user, don't clear cart
                showToast(t('popup_blocked'));
            }
        }

        // ===================== MODAL =====================
        // FIX #3: popstate race condition — proper state tracking
        // FIX #4: probeImageCount race condition — session tracking
        // FIX #13: Focus trap for accessibility

        PAGUS.state.activeCode="";
        PAGUS.state.activePath="";
        PAGUS.state.modalIdx=1;
        PAGUS.state.modalMaxIdx=1;
        PAGUS.state.probeSession=0;  // FIX #4: Track probe sessions
        PAGUS.state.modalOpen=false;  // FIX #3: Track modal state

        // FIX #4: Probe with session tracking to prevent stale callbacks
        function probeImageCount(basePath,cb){
            PAGUS.state.probeSession++;
            var session=PAGUS.state.probeSession;
            var count=1;
            function check(n){
                if(n>20){cb(count);return;}
                if(session!==PAGUS.state.probeSession)return; // FIX #4: Abort stale probe
                var img=new Image();
                img.onload=function(){
                    if(session!==PAGUS.state.probeSession)return;
                    count=n;
                    check(n+1);
                };
                img.onerror=function(){
                    if(session!==PAGUS.state.probeSession)return;
                    cb(count);
                };
                img.src=basePath+'/'+n+'.webp';
            }
            check(2);
        }

        function openModal(c,r,f){
            PAGUS.state.activeCode=c;
            PAGUS.state.activePath=f;
            PAGUS.state.modalIdx=1;

            // FIX #15: Use imageCount from inventory.js if available, probe as fallback
            var knownCount=0;
            if(typeof productsDB!=='undefined'){
                for(var i=0;i<productsDB.length;i++){
                    if(productsDB[i].path===f&&productsDB[i].imageCount){
                        knownCount=productsDB[i].imageCount;
                        break;
                    }
                }
            }

            if(knownCount>0){
                PAGUS.state.modalMaxIdx=knownCount;
                document.getElementById('imgCount').textContent='1/'+PAGUS.state.modalMaxIdx;
            }else{
                PAGUS.state.modalMaxIdx=1;
                document.getElementById('imgCount').textContent='1/...';
                // Fallback: probe if imageCount not in inventory.js
                probeImageCount(f,function(n){
                    PAGUS.state.modalMaxIdx=n;
                    if(PAGUS.state.modalIdx>PAGUS.state.modalMaxIdx) PAGUS.state.modalIdx=PAGUS.state.modalMaxIdx;
                    document.getElementById('imgCount').textContent=PAGUS.state.modalIdx+'/'+PAGUS.state.modalMaxIdx;
                });
            }

            // FIX #3: Only push state if modal isn't already open
            if(!PAGUS.state.modalOpen){
                history.pushState({modal:true},null,"");
            }
            PAGUS.state.modalOpen=true;

            var m=document.getElementById('pModal');
            m.style.display="block";
            document.getElementById('mCode').textContent=r;

            var msg=t('wa_inquiry')+r;
            document.getElementById('wp').href='https://wa.me/'+WHATSAPP_NUMBER+'?text='+encodeURIComponent(msg);

            update();

            // FIX #13: Setup focus trap
            m.setAttribute('tabindex','-1');
            m.focus();
            setupFocusTrap(m);
            if(typeof refreshPriceDisplays==='function') refreshPriceDisplays();
        }

        // FIX #3: Clean closeModal with proper state reset
        function closeModal(){
            var m=document.getElementById('pModal');
            if(m.style.display==="none")return;
            m.style.display="none";
            PAGUS.state.probeSession++; // FIX #4: Invalidate running probe

            if(PAGUS.state.modalOpen){
                PAGUS.state.modalOpen=false;
                if(history.state&&history.state.modal){
                    history.back();
                }
            }
            removeFocusTrap(); // FIX #13
        }

        // FIX #13: Focus trap for modal accessibility
        var _focusTrapHandler=null;
        function setupFocusTrap(modal){
            removeFocusTrap();
            _focusTrapHandler=function(e){
                if(e.key!=='Tab')return;
                var focusable=modal.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
                if(focusable.length===0)return;
                var first=focusable[0];
                var last=focusable[focusable.length-1];
                if(e.shiftKey){
                    if(document.activeElement===first){e.preventDefault();last.focus();}
                }else{
                    if(document.activeElement===last){e.preventDefault();first.focus();}
                }
            };
            document.addEventListener('keydown',_focusTrapHandler);
        }
        function removeFocusTrap(){
            if(_focusTrapHandler){
                document.removeEventListener('keydown',_focusTrapHandler);
                _focusTrapHandler=null;
            }
        }

        // ===================== FULLSCREEN + ZOOM =====================

        var fsIdx=1;
        var fsZoom=1, fsPanX=0, fsPanY=0;
        var fsDragging=false, fsDragStartX=0, fsDragStartY=0, fsPanStartX=0, fsPanStartY=0;
        var fsMinZoom=1, fsMaxZoom=5;
        // Pinch state
        var fsPinchStartDist=0, fsPinchStartZoom=1;

        function fsApplyTransform(){
            var img=document.getElementById('fullscreenImg');
            if(!img)return;
            // Clamp pan so image doesn't fly away
            if(fsZoom<=1){ fsPanX=0; fsPanY=0; }
            img.style.transform='translate('+fsPanX+'px,'+fsPanY+'px) scale('+fsZoom+')';
            img.style.cursor=fsZoom>1?'grab':'zoom-in';
        }

        function fsResetZoom(){
            fsZoom=1; fsPanX=0; fsPanY=0;
            fsApplyTransform();
        }

        function openFullscreen(src){
            var o=document.getElementById('fullscreenOverlay');
            document.getElementById('fullscreenImg').src=src;
            fsIdx=PAGUS.state.modalIdx;
            updateFsCounter();
            fsResetZoom();
            o.style.display='flex';
            // Show hint briefly
            var hint=document.getElementById('fsZoomHint');
            if(hint){
                var isMobile='ontouchstart' in window;
                hint.textContent=isMobile?'👌 Pinch to zoom · Double-tap to reset':'🔍 Scroll to zoom · Double-click to reset';
                hint.style.opacity='1';
                setTimeout(function(){hint.style.opacity='0';},2500);
            }
        }

        function closeFullscreen(){
            document.getElementById('fullscreenOverlay').style.display='none';
            fsResetZoom();
        }

        function moveFullscreen(d){
            fsIdx+=d;
            if(fsIdx<1)fsIdx=PAGUS.state.modalMaxIdx;
            if(fsIdx>PAGUS.state.modalMaxIdx)fsIdx=1;
            var img=document.getElementById('fullscreenImg');
            img.src=PAGUS.state.activePath+'/'+fsIdx+'.webp';
            img.onerror=function(){fsIdx=1;img.src=PAGUS.state.activePath+'/1.webp';updateFsCounter();};
            fsResetZoom();
            updateFsCounter();
        }

        function updateFsCounter(){
            document.getElementById('fullscreenCounter').textContent=fsIdx+'/'+PAGUS.state.modalMaxIdx;
        }

        // --- MOUSE WHEEL ZOOM (Desktop) ---
        (function(){
            var container=document.getElementById('fsZoomContainer');
            if(!container)return;

            container.addEventListener('wheel',function(e){
                e.preventDefault();
                var rect=container.getBoundingClientRect();
                var mouseX=e.clientX-rect.left-rect.width/2;
                var mouseY=e.clientY-rect.top-rect.height/2;

                var oldZoom=fsZoom;
                var delta=e.deltaY>0?-0.15:0.15;
                fsZoom=Math.min(fsMaxZoom,Math.max(fsMinZoom,fsZoom+delta*fsZoom));

                // Zoom towards mouse position
                var ratio=fsZoom/oldZoom;
                fsPanX=mouseX-(mouseX-fsPanX)*ratio;
                fsPanY=mouseY-(mouseY-fsPanY)*ratio;

                if(fsZoom<=1){fsPanX=0;fsPanY=0;}
                fsApplyTransform();
            },{passive:false});

            // --- MOUSE DRAG PAN (Desktop) ---
            container.addEventListener('mousedown',function(e){
                if(fsZoom<=1)return;
                e.preventDefault();
                fsDragging=true;
                fsDragStartX=e.clientX;
                fsDragStartY=e.clientY;
                fsPanStartX=fsPanX;
                fsPanStartY=fsPanY;
                document.getElementById('fullscreenImg').style.cursor='grabbing';
            });

            window.addEventListener('mousemove',function(e){
                if(!fsDragging)return;
                fsPanX=fsPanStartX+(e.clientX-fsDragStartX);
                fsPanY=fsPanStartY+(e.clientY-fsDragStartY);
                fsApplyTransform();
            });

            window.addEventListener('mouseup',function(){
                if(fsDragging){
                    fsDragging=false;
                    var img=document.getElementById('fullscreenImg');
                    if(img)img.style.cursor=fsZoom>1?'grab':'zoom-in';
                }
            });

            // --- DOUBLE CLICK TO RESET/ZOOM (Desktop) ---
            container.addEventListener('dblclick',function(e){
                e.preventDefault();
                e.stopPropagation();
                if(fsZoom>1){
                    fsResetZoom();
                }else{
                    var rect=container.getBoundingClientRect();
                    var mouseX=e.clientX-rect.left-rect.width/2;
                    var mouseY=e.clientY-rect.top-rect.height/2;
                    fsZoom=2.5;
                    fsPanX=-mouseX*1.5;
                    fsPanY=-mouseY*1.5;
                    fsApplyTransform();
                }
            });

            // --- Click background to close (only when not zoomed) ---
            document.getElementById('fullscreenBg').addEventListener('click',function(e){
                if(fsZoom<=1)closeFullscreen();
            });

            // --- PINCH TO ZOOM (Mobile) ---
            var activeTouches={};

            function getTouchDist(t1,t2){
                var dx=t1.clientX-t2.clientX;
                var dy=t1.clientY-t2.clientY;
                return Math.sqrt(dx*dx+dy*dy);
            }

            container.addEventListener('touchstart',function(e){
                for(var i=0;i<e.changedTouches.length;i++){
                    activeTouches[e.changedTouches[i].identifier]=e.changedTouches[i];
                }
                var keys=Object.keys(activeTouches);
                if(keys.length===2){
                    // Start pinch
                    var t1=activeTouches[keys[0]],t2=activeTouches[keys[1]];
                    fsPinchStartDist=getTouchDist(t1,t2);
                    fsPinchStartZoom=fsZoom;
                    fsPanStartX=fsPanX;
                    fsPanStartY=fsPanY;
                }else if(keys.length===1 && fsZoom>1){
                    // Start drag
                    fsDragging=true;
                    fsDragStartX=activeTouches[keys[0]].clientX;
                    fsDragStartY=activeTouches[keys[0]].clientY;
                    fsPanStartX=fsPanX;
                    fsPanStartY=fsPanY;
                }
            },{passive:true});

            container.addEventListener('touchmove',function(e){
                var keys=Object.keys(activeTouches);
                // Update touches
                for(var i=0;i<e.changedTouches.length;i++){
                    activeTouches[e.changedTouches[i].identifier]=e.changedTouches[i];
                }
                keys=Object.keys(activeTouches);
                if(keys.length===2){
                    e.preventDefault();
                    var t1=activeTouches[keys[0]],t2=activeTouches[keys[1]];
                    var dist=getTouchDist(t1,t2);
                    if(fsPinchStartDist>0){
                        var newZoom=fsPinchStartZoom*(dist/fsPinchStartDist);
                        fsZoom=Math.min(fsMaxZoom,Math.max(fsMinZoom,newZoom));
                        if(fsZoom<=1){fsPanX=0;fsPanY=0;}
                        fsApplyTransform();
                    }
                }else if(keys.length===1 && fsDragging && fsZoom>1){
                    e.preventDefault();
                    var t=activeTouches[keys[0]];
                    fsPanX=fsPanStartX+(t.clientX-fsDragStartX);
                    fsPanY=fsPanStartY+(t.clientY-fsDragStartY);
                    fsApplyTransform();
                }
            },{passive:false});

            function touchEnd(e){
                for(var i=0;i<e.changedTouches.length;i++){
                    delete activeTouches[e.changedTouches[i].identifier];
                }
                var keys=Object.keys(activeTouches);
                if(keys.length<2){ fsPinchStartDist=0; }
                if(keys.length===0){ fsDragging=false; }
            }
            container.addEventListener('touchend',touchEnd,{passive:true});
            container.addEventListener('touchcancel',touchEnd,{passive:true});

            // --- DOUBLE TAP TO RESET/ZOOM (Mobile) ---
            var lastTap=0;
            container.addEventListener('touchend',function(e){
                if(Object.keys(activeTouches).length>0)return;
                var now=Date.now();
                if(now-lastTap<300){
                    e.preventDefault();
                    if(fsZoom>1){
                        fsResetZoom();
                    }else{
                        fsZoom=2.5;
                        fsApplyTransform();
                    }
                    lastTap=0;
                }else{
                    lastTap=now;
                }
            },{passive:false});

        })();

        // ===================== KEYBOARD EVENTS =====================

        document.addEventListener('keydown',function(e){
            if(e.key==='Tab')return; // Let focus trap handle Tab
            var o=document.getElementById('fullscreenOverlay');
            if(o.style.display==='flex'){
                if(e.key==='Escape')closeFullscreen();
                if(e.key==='ArrowLeft')moveFullscreen(-1);
                if(e.key==='ArrowRight')moveFullscreen(1);
                return;
            }
            if(document.getElementById('pModal').style.display==="block"){
                if(e.key==="Escape")closeModal();
                if(e.key==="ArrowLeft")move(-1);
                if(e.key==="ArrowRight")move(1);
            }
        });

        // ===================== TOUCH EVENTS =====================
        // Fullscreen touch events now handled by zoom container above
        // Swipe in modal slider
        var touchStartX=0;
        document.getElementById('pModal').addEventListener('touchstart',function(e){
            touchStartX=e.changedTouches[0].screenX;
        },{passive:true});
        document.getElementById('pModal').addEventListener('touchend',function(e){
            var diff=e.changedTouches[0].screenX-touchStartX;
            if(Math.abs(diff)>50){
                if(diff>0)move(-1);else move(1);
            }
        },{passive:true});

        window.addEventListener('click',function(e){
            if(e.target==document.getElementById('pModal'))closeModal();
        });

        // FIX #3: Proper popstate handler — full state cleanup
        window.onpopstate=function(){
            if(PAGUS.state.modalOpen){
                var m=document.getElementById('pModal');
                m.style.display="none";
                PAGUS.state.modalOpen=false;
                PAGUS.state.probeSession++; // FIX #4: Invalidate probe
                removeFocusTrap(); // FIX #13
            }
        };

        var tsx=0,tex=0;
        var sl=document.getElementById('sliderArea');
        sl.addEventListener('touchstart',function(e){tsx=e.changedTouches[0].screenX;},{passive:true});
        sl.addEventListener('touchend',function(e){tex=e.changedTouches[0].screenX;hs();},{passive:true});

        function hs(){if(tex<tsx-50)move(1);if(tex>tsx+50)move(-1);}

        // FIX #4: move() clamps to maxIdx safely
        function move(d){
            PAGUS.state.modalIdx+=d;
            if(PAGUS.state.modalIdx<1)PAGUS.state.modalIdx=PAGUS.state.modalMaxIdx;
            if(PAGUS.state.modalIdx>PAGUS.state.modalMaxIdx)PAGUS.state.modalIdx=1;
            document.getElementById('imgCount').textContent=PAGUS.state.modalIdx+'/'+PAGUS.state.modalMaxIdx;
            update();
        }

        function update(){
            var img=document.getElementById('mImg');
            img.style.opacity=0;
            img.src=PAGUS.state.activePath+'/'+PAGUS.state.modalIdx+'.webp';
            img.onload=function(){img.style.opacity=1;};
            img.onerror=function(){
                if(PAGUS.state.modalIdx>1){PAGUS.state.modalIdx=1;update();}
                else{img.style.opacity=1;img.parentElement.style.background='#333';}
            };
        }

        // ===================== CAROUSEL =====================
        // FIX #1: Now has matching HTML elements with null-safety

        function startCarousel(){
            var track=document.getElementById('slideshowTrack');
            var counter=document.getElementById('slideshowDots');
            // FIX #1: Null check — exit gracefully if elements missing
            if(!track||!counter)return;
            if(!productsDB||productsDB.length===0)return;

            var slides=[];
            for(var i=0;i<productsDB.length;i++){
                var p=productsDB[i];
                var sub=p.category.indexOf(' > ')>-1?p.category.split(' > ')[1]:p.category;
                var cat=p.category.indexOf(' > ')>-1?p.category.split(' > ')[0]:p.category;
                slides.push({img:p.path+'/1.webp',title:p.id,sub:sub,cat:cat,path:p.path});
            }

            // Shuffle
            for(var j=slides.length-1;j>0;j--){
                var k=Math.floor(Math.random()*(j+1));
                var t=slides[j];slides[j]=slides[k];slides[k]=t;
            }

            PAGUS.state.carouselSlides=slides;
            var html='';
            for(var m=0;m<slides.length;m++){
                var s=slides[m];
                var cls=m===0?'ss-slide active':'ss-slide';
                html+='<div class="'+cls+'" data-slidx="'+m+'" onclick="openFromCarouselSafe('+m+')">';
                html+='<img src="'+escapeAttr(s.img)+'" alt="'+escapeAttr(s.title)+'" onerror="this.parentElement.classList.add(\'ss-broken\')">';
                html+='<div class="ss-slide-info"><h4>'+escapeHTML(s.title)+'</h4><span>'+escapeHTML(s.sub)+'</span></div></div>';
            }
            track.innerHTML=html;

            var validSlides=document.querySelectorAll('.ss-slide:not(.ss-broken)');
            counter.innerHTML='<span class="ss-counter">1 / '+validSlides.length+'</span>';
            PAGUS.state.carouselIndex=0;
            PAGUS.state.carouselTotal=document.querySelectorAll('.ss-slide').length;

            if(PAGUS.state.carouselTimer)clearInterval(PAGUS.state.carouselTimer);
            PAGUS.state.carouselTimer=setInterval(carouselNext,5000);
        }

        function openFromCarouselSafe(carIdx){
            if(!PAGUS.state.carouselSlides||!PAGUS.state.carouselSlides[carIdx])return;
            var s=PAGUS.state.carouselSlides[carIdx];
            openModal(s.title,s.title,s.path);
        }

        function carouselNext(){
            var all=document.querySelectorAll('.ss-slide');
            if(!all||all.length===0)return;
            var attempts=0;
            do{
                PAGUS.state.carouselIndex++;
                if(PAGUS.state.carouselIndex>=PAGUS.state.carouselTotal)PAGUS.state.carouselIndex=0;
                attempts++;
            }while(all[PAGUS.state.carouselIndex]&&all[PAGUS.state.carouselIndex].classList.contains('ss-broken')&&attempts<PAGUS.state.carouselTotal);
            carouselShow();
        }

        function carouselShow(){
            var all=document.querySelectorAll('.ss-slide');
            if(!all||all.length===0)return;
            for(var i=0;i<all.length;i++){
                all[i].className=all[i].classList.contains('ss-broken')?'ss-slide ss-broken':'ss-slide';
            }
            if(all[PAGUS.state.carouselIndex]){
                all[PAGUS.state.carouselIndex].className=all[PAGUS.state.carouselIndex].classList.contains('ss-broken')?'ss-slide ss-broken':'ss-slide active';
            }
            var valid=document.querySelectorAll('.ss-slide:not(.ss-broken)').length;
            var current=0;
            for(var j=0;j<=PAGUS.state.carouselIndex;j++){
                if(all[j]&&!all[j].classList.contains('ss-broken'))current++;
            }
            var c=document.querySelector('.ss-counter');
            if(c)c.innerText=current+' / '+valid;
        }

        function ssMove(dir){
            var all=document.querySelectorAll('.ss-slide');
            if(!all||all.length===0)return;
            var attempts=0;
            do{
                PAGUS.state.carouselIndex+=dir;
                if(PAGUS.state.carouselIndex>=PAGUS.state.carouselTotal)PAGUS.state.carouselIndex=0;
                if(PAGUS.state.carouselIndex<0)PAGUS.state.carouselIndex=PAGUS.state.carouselTotal-1;
                attempts++;
            }while(all[PAGUS.state.carouselIndex]&&all[PAGUS.state.carouselIndex].classList.contains('ss-broken')&&attempts<PAGUS.state.carouselTotal);
            carouselShow();
        }
    </script>
</body>
</html>
   