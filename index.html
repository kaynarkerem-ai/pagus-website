<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wholesale Menswear Collection | Pagus Menswear Turkey</title>
    <meta name="description" content="Premium wholesale menswear collection from Turkey. Suits, Tuxedos, and more.">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://www.gstatic.com https://apis.google.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https://*.googleusercontent.com; connect-src 'self' https://*.googleapis.com https://*.firebaseio.com https://*.firebaseapp.com https://identitytoolkit.googleapis.com https://securetoken.googleapis.com; frame-src https://*.firebaseapp.com https://accounts.google.com;">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Montserrat:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root { --color-black: #1a1a1a; --color-gold: #c9a962; --color-noble: #2c3e50; --font-display: 'Playfair Display', serif; --font-body: 'Montserrat', sans-serif; --site-max-width: 1400px; }
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { font-family: var(--font-body); color: var(--color-black); background: #fff; overflow-x: hidden; }
        .header { position: sticky; top: 0; width: 100%; z-index: 900; background: var(--color-noble); box-shadow: 0 4px 20px rgba(0,0,0,0.1); }
        .header-inner { max-width: var(--site-max-width); margin: 0 auto; padding: 0 40px; }
        .brand-bar { text-align: center; padding: 16px 0 10px; border-bottom: 1px solid rgba(201,169,98,0.12); }
        .brand-bar a { font-family: var(--font-display); font-size: 1.8rem; color: #fff; font-weight: 700; text-transform: uppercase; letter-spacing: 6px; text-decoration: none; }
        .brand-bar a .brand-p { font-size: 110%; }
        .toolbar-row { display: flex; justify-content: space-between; align-items: center; padding: 10px 0; }
        .toolbar-right { display: flex; gap: 12px; align-items: center; }
        .soc-icons { display: flex; gap: 12px; align-items: center; }
        .soc-icons .social-icon { display: flex; align-items: center; justify-content: center; }
        .soc-icons .social-icon svg { width: 18px; height: 18px; fill: rgba(255,255,255,0.6); transition: 0.3s; }
        .soc-icons .social-icon:hover svg { fill: var(--color-gold); }
        .nav-list { display: flex; gap: 25px; list-style: none; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 12px; width: 100%; justify-content: center; flex-wrap: wrap; }
        .nav-list a { color: #fff; font-size: 0.9rem; font-weight: 700; text-transform: uppercase; letter-spacing: 2px; transition: 0.3s; text-decoration: none; white-space: nowrap; padding: 10px 5px; }
        .nav-list a:hover { color: var(--color-gold); }
        .search-area { display: flex; align-items: center; gap: 8px; position: relative; }
        .search-icon-btn { width: 40px; height: 40px; border-radius: 50%; background: rgba(255,255,255,0.12); border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: 0.3s; flex-shrink: 0; }
        .search-icon-btn:hover { background: var(--color-gold); }
        .search-icon-btn svg { width: 20px; height: 20px; fill: #fff; transition: 0.3s; }
        .search-icon-btn:hover svg { fill: var(--color-noble); }
        .search-expand { display: flex; align-items: center; background: rgba(255,255,255,0.1); border-radius: 25px; overflow: hidden; max-width: 0; opacity: 0; transition: max-width 0.35s ease, opacity 0.25s ease, padding 0.3s; padding: 0; }
        .search-expand.open { max-width: 280px; opacity: 1; padding: 0 0 0 15px; }
        .search-expand input { background: transparent; border: none; color: #fff; font-size: 0.9rem; width: 180px; outline: none; padding: 10px 0; font-family: var(--font-body); }
        .search-expand input::placeholder { color: rgba(255,255,255,0.5); }
        .search-expand .search-go { background: var(--color-gold); border: none; padding: 10px 16px; cursor: pointer; transition: 0.3s; display: flex; align-items: center; justify-content: center; border-radius: 0 25px 25px 0; }
        .search-expand .search-go:hover { background: #d4b366; }
        .search-expand .search-go svg { width: 16px; height: 16px; fill: var(--color-noble); }
        .adv-search-btn { background: transparent; border: 1px solid rgba(255,255,255,0.25); color: rgba(255,255,255,0.7); padding: 8px 14px; font-size: 0.7rem; font-weight: 700; text-transform: uppercase; letter-spacing: 1.5px; cursor: pointer; transition: 0.3s; font-family: var(--font-body); border-radius: 20px; white-space: nowrap; }
        .adv-search-btn:hover { border-color: var(--color-gold); color: var(--color-gold); }
        /* Advanced Search Panel */
        .adv-panel-overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.6); backdrop-filter: blur(4px); z-index: 3000; }
        .adv-panel-overlay.visible { display: flex; justify-content: center; align-items: flex-start; padding-top: 90px; }
        .adv-panel { background: #fff; width: 600px; max-width: 94vw; border-radius: 12px; box-shadow: 0 25px 60px rgba(0,0,0,0.35); animation: advSlideDown 0.3s ease; max-height: 80vh; display: flex; flex-direction: column; }
        @keyframes advSlideDown { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }
        .adv-panel-header { background: var(--color-noble); padding: 22px 28px; border-radius: 12px 12px 0 0; display: flex; justify-content: space-between; align-items: center; flex-shrink: 0; }
        .adv-panel-header h3 { font-family: var(--font-display); color: #fff; font-size: 1.2rem; margin: 0; }
        .adv-panel-close { background: none; border: none; color: rgba(255,255,255,0.6); font-size: 1.6rem; cursor: pointer; line-height: 1; padding: 5px; }
        .adv-panel-close:hover { color: #fff; }
        .adv-panel-body { padding: 25px 28px; overflow-y: auto; flex: 1; }
        .adv-section { margin-bottom: 22px; }
        .adv-section-title { font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 1.5px; color: var(--color-noble); margin-bottom: 12px; display: flex; align-items: center; gap: 6px; }
        .adv-section-title svg { width: 14px; height: 14px; fill: var(--color-gold); flex-shrink: 0; }
        .adv-keyword { width: 100%; padding: 12px 16px; border: 1px solid #ddd; border-radius: 8px; font-size: 0.95rem; font-family: var(--font-body); outline: none; transition: 0.3s; box-sizing: border-box; }
        .adv-keyword:focus { border-color: var(--color-gold); box-shadow: 0 0 0 3px rgba(201,169,98,0.15); }
        .adv-checks { display: flex; flex-wrap: wrap; gap: 8px; }
        .adv-check { display: flex; align-items: center; gap: 6px; }
        .adv-check input[type="checkbox"] { display: none; }
        .adv-check label { display: flex; align-items: center; gap: 6px; padding: 7px 14px; border: 1px solid #e0e0e0; border-radius: 20px; font-size: 0.8rem; font-weight: 600; color: #555; cursor: pointer; transition: 0.2s; user-select: none; }
        .adv-check label:hover { border-color: var(--color-gold); color: var(--color-noble); }
        .adv-check input:checked + label { background: var(--color-noble); color: #fff; border-color: var(--color-noble); }
        .adv-sub-checks { margin-top: 10px; padding-left: 12px; border-left: 2px solid var(--color-gold); }
        .adv-panel-footer { padding: 18px 28px; border-top: 1px solid #eee; display: flex; gap: 12px; justify-content: flex-end; flex-shrink: 0; background: #fff; border-radius: 0 0 12px 12px; }
        .adv-clear-btn { background: transparent; border: 1px solid #ddd; color: #888; padding: 11px 22px; font-size: 0.85rem; font-weight: 600; cursor: pointer; border-radius: 6px; font-family: var(--font-body); transition: 0.2s; }
        .adv-clear-btn:hover { border-color: #999; color: #333; }
        .adv-search-submit { background: var(--color-noble); color: #fff; border: none; padding: 11px 30px; font-size: 0.85rem; font-weight: 700; text-transform: uppercase; letter-spacing: 1.5px; cursor: pointer; border-radius: 6px; font-family: var(--font-body); transition: 0.2s; }
        .adv-search-submit:hover { background: #1a252f; }
        .search-group { margin-bottom: 35px; }
        .search-group-title { font-family: var(--font-display); font-size: 1.3rem; color: var(--color-noble); padding-bottom: 10px; margin-bottom: 20px; border-bottom: 2px solid var(--color-gold); display: inline-block; }
        .search-group-count { font-family: var(--font-body); font-size: 0.8rem; color: #999; font-weight: 400; margin-left: 8px; }

        .search-results-section { padding: 40px 20px; max-width: var(--site-max-width); margin: 0 auto; }
        .search-results-title { font-family: var(--font-display); font-size: 1.8rem; color: var(--color-noble); margin-bottom: 30px; text-align: center; }
        .search-results-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 25px; }
        .search-result-card { background: #fff; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.08); cursor: pointer; transition: 0.3s; }
        .search-result-card:hover { transform: translateY(-5px); box-shadow: 0 8px 25px rgba(0,0,0,0.12); }
        .search-result-card img { width: 100%; aspect-ratio: 3/4; object-fit: cover; }
        .search-result-card .info { padding: 15px; text-align: center; }
        .search-result-card h4 { font-family: var(--font-display); font-size: 1rem; color: var(--color-noble); margin: 0 0 5px; }
        .search-result-card span { font-size: 0.8rem; color: var(--color-gold); }
        .page-title-area { background: #f9f9f9; padding: 40px 0 20px; text-align: center; border-bottom: 1px solid #eee; }
        .cat-title { font-family: var(--font-display); font-size: 2.5rem; text-transform: uppercase; color: var(--color-noble); margin-bottom: 20px; }
        .back-btn { display: inline-block; color: var(--color-gold); font-weight: 700; margin-bottom: 15px; cursor: pointer; border: 1px solid var(--color-gold); padding: 6px 18px; font-size: 0.8rem; transition: 0.3s; }
        .info-guide { background: #fff3cd; border: 1px solid #ffeeba; color: #856404; max-width: 600px; margin: 0 auto 20px; padding: 15px; border-radius: 8px; font-size: 0.9rem; display: flex; align-items: center; justify-content: center; gap: 10px; width: 90%; }
        .grid { max-width: var(--site-max-width); margin: 0 auto; padding: 40px; display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 40px; min-height: 400px; }
        .card { cursor: pointer; text-align: center; position: relative; }
        .img-box { aspect-ratio: 3/4; overflow: hidden; background: #eee; margin-bottom: 15px; position: relative; }
        .img-box img { width: 100%; height: 100%; object-fit: cover; transition: 0.5s; opacity: 0; animation: fadeIn 0.5s forwards; }
        @keyframes fadeIn { to { opacity: 1; } }
        .card:hover img { transform: scale(1.05); }
        .info-title { font-family: var(--font-display); font-size: 1.3rem; margin-bottom: 5px; color: var(--color-noble); }
        .heart-btn { position: absolute; top: 10px; right: 10px; width: 35px; height: 35px; background: rgba(255,255,255,0.9); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.3rem; color: #ccc; cursor: pointer; z-index: 10; border: none; }
        .heart-btn.active { color: #e74c3c; }
        .modal { display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); backdrop-filter: blur(5px); }
        .modal-content { height: 100vh; display: grid; grid-template-columns: 3fr 1fr; }
        .slider { position: relative; background: #000; display: flex; align-items: center; justify-content: center; height: 100%; user-select: none; }
        .main-img { max-height: 90vh; max-width: 95%; object-fit: contain; }
        .arrow { position: absolute; top: 50%; transform: translateY(-50%); color: #fff; font-size: 4rem; cursor: pointer; padding: 20px; opacity: 0.7; z-index: 2010; text-shadow: 0 0 10px rgba(0,0,0,0.5); background: transparent; border: none; }
        .arrow:hover { opacity: 1; color: var(--color-gold); }
        .prev { left: 0; } .next { right: 0; }
        .img-counter { position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.6); color: #fff; padding: 5px 15px; border-radius: 20px; font-size: 0.9rem; font-weight: 700; pointer-events: none; }
        .side-info { background: #fff; padding: 60px; display: flex; flex-direction: column; justify-content: center; position: relative; overflow-y: auto; }
        .close { position: absolute; top: 25px; right: 35px; font-size: 45px; color: #fff; cursor: pointer; line-height: 1; z-index: 2020; }
        .private-label { background: var(--color-noble); padding: 80px 40px; text-align: center; color: #fff; margin-top: 60px; }
        .pl-title { font-family: var(--font-display); font-size: 2.5rem; color: var(--color-gold); margin-bottom: 20px; }
        .pl-btn { display: inline-block; background: var(--color-gold); color: #000; padding: 15px 40px; text-decoration: none; font-weight: 700; border-radius: 4px; }
        
        /* LANGUAGE SWITCH */
        .lang-switch { display: flex; align-items: center; gap: 2px; margin-right: 12px; padding-right: 12px; border-right: 1px solid rgba(255,255,255,0.15); }
        .lang-switch button { background: none; border: none; cursor: pointer; padding: 3px 5px; color: rgba(255,255,255,0.35); font-family: var(--font-body); font-size: 0.6rem; font-weight: 700; letter-spacing: 1.5px; transition: 0.3s; border-radius: 2px; }
        .lang-switch button:hover { color: var(--color-gold); }
        .lang-switch button.active { color: var(--color-gold); background: rgba(201,169,98,0.12); }

        .footer { background: #000; color: #999; padding: 70px 40px; border-top: 1px solid #333; }
        .footer-grid { max-width: var(--site-max-width); margin: 0 auto; display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 4rem; }
        /* FOOTER 3-COL */
        .footer h4 { color: var(--color-gold); font-family: var(--font-display); font-size: 1rem; text-transform: uppercase; letter-spacing: 2px; margin-bottom: 18px; }
        .footer p { font-size: 0.85rem; line-height: 1.8; color: #888; }
        .footer ul { list-style: none; }
        .footer ul li { margin-bottom: 10px; font-size: 0.85rem; line-height: 1.6; }
        .footer ul li strong { color: #bbb; }
        .footer a { color: #888; text-decoration: none; transition: 0.3s; }
        .footer a:hover { color: var(--color-gold); }
        .footer-bottom { text-align: center; margin-top: 50px; padding-top: 30px; border-top: 1px solid #222; font-size: 0.8rem; color: #444; }
        .footer-links { display: flex; flex-direction: column; gap: 10px; }
        .footer-links a { display: flex; align-items: center; gap: 8px; }
        .footer-links svg { width: 14px; height: 14px; fill: var(--color-gold); flex-shrink: 0; }
        .footer-service-list { list-style: none; }
        .footer-service-list li { padding-left: 18px; position: relative; margin-bottom: 8px; font-size: 0.85rem; color: #888; }
        .footer-service-list li::before { content: '‚Ä∫'; position: absolute; left: 0; color: var(--color-gold); font-weight: 700; }
        /* T&C OVERLAY */
        .tc-overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.85); backdrop-filter: blur(5px); z-index: 6000; overflow-y: auto; }
        .tc-overlay.visible { display: block; }
        .tc-container { max-width: 860px; margin: 40px auto; padding: 50px; background: #fff; border-radius: 12px; box-shadow: 0 25px 60px rgba(0,0,0,0.4); position: relative; }
        .tc-close { position: fixed; top: 20px; right: 30px; background: rgba(0,0,0,0.6); border: none; color: #fff; width: 44px; height: 44px; border-radius: 50%; font-size: 1.5rem; cursor: pointer; z-index: 6001; display: flex; align-items: center; justify-content: center; transition: 0.3s; }
        .tc-close:hover { background: var(--color-gold); color: var(--color-noble); }
        .tc-container h1 { font-family: var(--font-display); font-size: 2rem; color: var(--color-noble); margin-bottom: 5px; }
        .tc-container .tc-subtitle { color: var(--color-gold); font-size: 0.85rem; font-weight: 600; letter-spacing: 1px; text-transform: uppercase; margin-bottom: 8px; }
        .tc-container .tc-updated { color: #999; font-size: 0.8rem; margin-bottom: 30px; }
        .tc-container h2 { font-family: var(--font-display); font-size: 1.15rem; color: var(--color-noble); margin: 28px 0 10px; padding-bottom: 6px; border-bottom: 1px solid #eee; }
        .tc-container p, .tc-container li { font-size: 0.88rem; line-height: 1.8; color: #555; }
        .tc-container ul { padding-left: 20px; margin: 8px 0; }
        .tc-container li { margin-bottom: 5px; }
        .tc-contact { background: var(--color-noble); color: #fff; padding: 25px 30px; border-radius: 8px; margin-top: 30px; }
        .tc-contact strong { color: var(--color-gold); }

        .float-cart { position: fixed; bottom: 20px; right: 20px; z-index: 999; background: #25D366; color: #fff; padding: 12px 20px; border-radius: 50px; font-weight: 700; display: none; align-items: center; gap: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.3); border: none; cursor: pointer; font-family: var(--font-body); font-size: 1rem; }
        .float-cart:hover { background: #1da851; transform: scale(1.05); }
        .badges { display: flex; gap: 15px; margin-bottom: 30px; border-bottom: 1px solid #eee; padding-bottom: 20px; }
        .badge-item { display: flex; flex-direction: column; align-items: center; text-align: center; gap: 5px; font-size: 0.7rem; color: #666; font-weight: 600; text-transform: uppercase; }
        .badge-icon { font-size: 1.5rem; color: var(--color-noble); }
        /* FIX #11: Styled toast notification */
        .toast-notification { position: fixed; top: 80px; left: 50%; transform: translateX(-50%) translateY(-20px); background: var(--color-noble); color: #fff; padding: 12px 28px; border-radius: 8px; font-size: 0.9rem; font-weight: 600; z-index: 9999; opacity: 0; transition: opacity 0.3s, transform 0.3s; pointer-events: none; box-shadow: 0 4px 15px rgba(0,0,0,0.2); }
        .toast-notification.visible { opacity: 1; transform: translateX(-50%) translateY(0); }
        /* FIX #1: Carousel styles */
        .carousel-section { width: 100%; background: #000; position: relative; overflow: hidden; max-height: 500px; }
        .ss-slide { display: none; position: relative; cursor: pointer; }
        .ss-slide.active { display: block; }
        .ss-slide.ss-broken { display: none !important; }
        .ss-slide img { width: 100%; max-height: 500px; object-fit: cover; object-position: center top; }
        .ss-slide-info { position: absolute; bottom: 0; left: 0; right: 0; background: linear-gradient(transparent, rgba(0,0,0,0.7)); padding: 30px 20px 20px; text-align: center; }
        .ss-slide-info h4 { color: #fff; font-family: var(--font-display); font-size: 1.2rem; }
        .ss-slide-info span { color: var(--color-gold); font-size: 0.8rem; }
        .ss-nav { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(255,255,255,0.1); border: none; color: #fff; font-size: 2rem; width: 50px; height: 50px; border-radius: 50%; cursor: pointer; z-index: 10; }
        .ss-nav:hover { background: rgba(255,255,255,0.2); }
        .ss-nav.ss-prev { left: 15px; }
        .ss-nav.ss-next { right: 15px; }
        .ss-dots { position: absolute; bottom: 10px; right: 15px; background: rgba(0,0,0,0.5); color: #fff; padding: 4px 12px; border-radius: 15px; font-size: 0.8rem; }
        @media (max-width: 768px) {
            .header-inner { padding: 0 15px; }
            .brand-bar { padding: 10px 0 8px; }
            .brand-bar a { font-size: 1.3rem; letter-spacing: 4px; }
            .toolbar-row { flex-wrap: wrap; gap: 8px; padding: 8px 0; }
            .search-expand.open { max-width: 200px; }
            .search-expand input { width: 120px; }
            .adv-search-btn { font-size: 0.6rem; padding: 6px 10px; }
            .adv-panel { width: 100%; max-width: 100%; border-radius: 0; max-height: 100vh; }
            .adv-panel-header { border-radius: 0; }
            .adv-panel-footer { border-radius: 0; }
            .toolbar-right { gap: 8px; }
            .soc-icons { gap: 8px; }
            .soc-icons .social-icon svg { width: 16px; height: 16px; }
            .nav-list { gap: 10px; justify-content: center; } .nav-list a { font-size: 0.75rem; padding: 5px; }
            .grid { padding: 20px 10px; gap: 15px; grid-template-columns: 1fr 1fr; }
            .modal-content { display: flex; flex-direction: column; height: 100%; overflow-y: scroll; }
            .slider { height: 50vh; min-height: 300px; background: #000; flex-shrink: 0; }
            .side-info { padding: 30px 20px; height: auto; display: block !important; }
            .arrow { font-size: 3rem; padding: 15px; background: rgba(0,0,0,0.3); border-radius: 50%; width: 50px; height: 50px; display: flex; align-items: center; justify-content: center; }
            .prev { left: 10px; } .next { right: 10px; }
            .footer-grid { grid-template-columns: 1fr; gap: 30px; }
            .search-results-grid { grid-template-columns: 1fr 1fr; gap: 15px; }
            .carousel-section { max-height: 350px; }
            .ss-slide img { max-height: 350px; }
        }
        /* HERO SECTION */
        .hero { background: linear-gradient(135deg, var(--color-noble) 0%, #1a252f 100%); color: #fff; padding: 40px 20px; text-align: center; position: relative; }
        .hero-content { position: relative; z-index: 1; max-width: 1200px; margin: 0 auto; }
        .hero h2 { font-family: var(--font-display); font-size: 1.8rem; margin-bottom: 10px; text-transform: uppercase; letter-spacing: 2px; }
        .hero-tagline { color: var(--color-gold); font-size: 0.9rem; letter-spacing: 3px; text-transform: uppercase; margin-bottom: 15px; font-weight: 600; }
        .hero p { display: none; }
        .hero-stats { display: flex; justify-content: center; gap: 50px; flex-wrap: wrap; margin-top: 20px; }
        .stat-item { text-align: center; }
        .stat-num { font-family: var(--font-display); font-size: 1.8rem; color: var(--color-gold); display: block; }
        .stat-label { font-size: 0.7rem; text-transform: uppercase; letter-spacing: 1px; color: #aaa; margin-top: 3px; }
        @media (max-width: 768px) { .hero { padding: 30px 15px; } .hero h2 { font-size: 1.4rem; } .hero-stats { gap: 25px; } .stat-num { font-size: 1.5rem; } }
        /* AUTH UI */
        .auth-btn { background: transparent; border: 1px solid var(--color-gold); color: var(--color-gold); padding: 8px 20px; font-size: 0.8rem; font-weight: 700; text-transform: uppercase; letter-spacing: 1.5px; cursor: pointer; transition: 0.3s; font-family: var(--font-body); border-radius: 3px; white-space: nowrap; }
        .auth-btn:hover { background: var(--color-gold); color: var(--color-noble); }
        .user-menu { display: flex; align-items: center; gap: 12px; }
        .user-greeting { color: var(--color-gold); font-size: 0.8rem; font-weight: 600; letter-spacing: 1px; text-transform: uppercase; max-width: 150px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
        .logout-btn { background: transparent; border: 1px solid rgba(255,255,255,0.2); color: #fff; padding: 6px 14px; font-size: 0.7rem; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; cursor: pointer; transition: 0.3s; font-family: var(--font-body); border-radius: 3px; }
        .logout-btn:hover { border-color: #e74c3c; color: #e74c3c; }
        /* AUTH MODAL */
        .auth-overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.85); backdrop-filter: blur(8px); z-index: 5000; justify-content: center; align-items: center; }
        .auth-overlay.visible { display: flex; }
        .auth-card { background: #fff; width: 420px; max-width: 92vw; border-radius: 8px; overflow: hidden; box-shadow: 0 25px 60px rgba(0,0,0,0.4); animation: authSlideUp 0.3s ease; }
        @keyframes authSlideUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        .auth-header { background: var(--color-noble); padding: 30px; text-align: center; }
        .auth-header h3 { font-family: var(--font-display); color: #fff; font-size: 1.4rem; margin-bottom: 5px; }
        .auth-header p { color: rgba(255,255,255,0.5); font-size: 0.8rem; }
        .auth-tabs { display: flex; border-bottom: 1px solid #eee; }
        .auth-tab { flex: 1; padding: 14px; text-align: center; font-size: 0.85rem; font-weight: 700; text-transform: uppercase; letter-spacing: 1.5px; cursor: pointer; color: #aaa; border-bottom: 2px solid transparent; transition: 0.3s; background: none; border-top: none; border-left: none; border-right: none; font-family: var(--font-body); }
        .auth-tab.active { color: var(--color-noble); border-bottom-color: var(--color-gold); }
        .auth-body { padding: 30px; }
        .auth-field { margin-bottom: 18px; }
        .auth-field label { display: block; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; color: #666; margin-bottom: 6px; }
        .auth-field input { width: 100%; padding: 12px 15px; border: 1px solid #ddd; border-radius: 4px; font-size: 0.95rem; font-family: var(--font-body); transition: 0.3s; outline: none; }
        .auth-field input:focus { border-color: var(--color-gold); box-shadow: 0 0 0 3px rgba(201,169,98,0.15); }
        .auth-submit { width: 100%; padding: 14px; background: var(--color-noble); color: #fff; border: none; font-size: 0.9rem; font-weight: 700; text-transform: uppercase; letter-spacing: 2px; cursor: pointer; transition: 0.3s; font-family: var(--font-body); border-radius: 4px; }
        .auth-submit:hover { background: #1a252f; }
        .auth-submit:disabled { opacity: 0.5; cursor: not-allowed; }
        .auth-divider { display: flex; align-items: center; gap: 15px; margin: 20px 0; color: #ccc; font-size: 0.8rem; text-transform: uppercase; letter-spacing: 1px; }
        .auth-divider::before, .auth-divider::after { content: ''; flex: 1; border-top: 1px solid #eee; }
        .auth-forgot { text-align: right; margin: -5px 0 15px; }
        .auth-forgot a { color: var(--color-gold); font-size: 0.78rem; text-decoration: none; font-weight: 500; transition: 0.3s; }
        .auth-forgot a:hover { color: var(--color-noble); text-decoration: underline; }
        .google-btn { width: 100%; padding: 12px; background: #fff; border: 1px solid #ddd; border-radius: 4px; font-size: 0.9rem; font-weight: 600; cursor: pointer; font-family: var(--font-body); display: flex; align-items: center; justify-content: center; gap: 10px; transition: 0.3s; color: #333; }
        .google-btn:hover { background: #f8f8f8; border-color: #bbb; }
        .google-btn svg { width: 18px; height: 18px; }
        .auth-error { background: #fff5f5; border: 1px solid #fed7d7; color: #c53030; padding: 10px 15px; border-radius: 4px; font-size: 0.85rem; margin-bottom: 15px; display: none; }
        .auth-close { position: absolute; top: 15px; right: 20px; background: none; border: none; color: rgba(255,255,255,0.6); font-size: 1.8rem; cursor: pointer; z-index: 5001; line-height: 1; }
        .auth-close:hover { color: #fff; }
        /* PRICE TAGS */
        .price-tag { font-family: var(--font-display); font-size: 1.1rem; color: var(--color-gold); font-weight: 700; margin-top: 5px; }
        .price-login-hint { font-size: 0.75rem; color: #aaa; margin-top: 5px; cursor: pointer; text-decoration: underline; text-decoration-color: rgba(170,170,170,0.3); }
        .price-login-hint:hover { color: var(--color-gold); }
        .modal-price { font-family: var(--font-display); font-size: 2rem; color: var(--color-gold); margin: 15px 0; }
        .modal-price-hint { color: #999; font-size: 0.85rem; cursor: pointer; margin: 10px 0; }
        .modal-price-hint:hover { color: var(--color-gold); }
        .price-tier { font-size: 0.7rem; color: #999; text-transform: uppercase; letter-spacing: 1px; }
        /* COOKIE BANNER */
        .cookie-banner { position: fixed; bottom: 0; left: 0; right: 0; background: var(--color-noble); color: #fff; padding: 18px 25px; z-index: 8000; display: none; align-items: center; justify-content: center; gap: 20px; flex-wrap: wrap; box-shadow: 0 -4px 20px rgba(0,0,0,0.3); font-size: 0.85rem; }
        .cookie-banner.visible { display: flex; }
        .cookie-banner p { max-width: 700px; line-height: 1.5; color: rgba(255,255,255,0.8); }
        .cookie-banner a { color: var(--color-gold); }
        .cookie-accept { background: var(--color-gold); color: var(--color-noble); border: none; padding: 10px 25px; font-weight: 700; font-size: 0.85rem; cursor: pointer; border-radius: 3px; font-family: var(--font-body); text-transform: uppercase; letter-spacing: 1px; white-space: nowrap; }
        .cookie-accept:hover { background: #d4b366; }
        @media (max-width: 768px) {
            .auth-card { width: 100%; max-width: 100%; border-radius: 0; min-height: 100vh; display: flex; flex-direction: column; }
            .auth-body { flex: 1; }
            .user-greeting { max-width: 80px; font-size: 0.7rem; }
            .auth-btn { padding: 6px 12px; font-size: 0.7rem; }
        }
        /* SHOWCASE */
        .showcase-section { width: 100%; background: #1a1a1a; }
        .showcase-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 3px; }
        .showcase-item { position: relative; aspect-ratio: 3/4; overflow: hidden; cursor: pointer; }
        .showcase-item:focus-visible { outline: 3px solid var(--color-gold); outline-offset: -3px; }
        .showcase-item img { width: 100%; height: 100%; object-fit: cover; object-position: top; transition: transform 0.5s ease; }
        .showcase-item:hover img { transform: scale(1.05); }
        .showcase-overlay { position: absolute; bottom: 0; left: 0; right: 0; background: linear-gradient(transparent, rgba(0,0,0,0.8)); padding: 40px 20px 25px; }
        .showcase-overlay span { color: #fff; font-family: var(--font-display); font-size: 1.1rem; text-transform: uppercase; letter-spacing: 2px; }
        .showcase-hero-img { width: 100%; display: block; max-height: 600px; object-fit: cover; object-position: center; }
        @media (max-width: 768px) { .showcase-grid { grid-template-columns: repeat(2, 1fr); } .showcase-overlay span { font-size: 0.8rem; letter-spacing: 1px; } .showcase-overlay { padding: 25px 15px 15px; } .showcase-hero-img { max-height: 300px; } }
    </style>
</head>
<body>
    <header class="header"><div class="header-inner">
        <div class="brand-bar">
            <a href="index.html"><span class="brand-p">P</span>AGUS MENSWEAR</a>
        </div>
        <div class="toolbar-row">
            <div class="search-area" role="search">
                <div class="search-expand" id="searchExpand">
                    <input type="text" id="siteSearch" placeholder="Search products..." data-tp="search_placeholder" aria-label="Search products" onkeypress="if(event.key==='Enter')doSiteSearch()">
                    <button class="search-go" onclick="doSiteSearch()" aria-label="Search"><svg viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg></button>
                </div>
                <button class="search-icon-btn" onclick="toggleSearchBar()" aria-label="Search" title="Search">
                    <svg viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
                </button>
                <button class="adv-search-btn" onclick="openAdvancedSearch()" data-t="adv_search">Advanced Search</button>
            </div>
            <div class="toolbar-right">
                <div class="lang-switch" id="langBar">
                    <button onclick="setLang('en')" id="langBtn_en" title="English">EN</button>
                    <button onclick="setLang('it')" id="langBtn_it" title="Italiano">IT</button>
                    <button onclick="setLang('fr')" id="langBtn_fr" title="Fran√ßais">FR</button>
                    <button onclick="setLang('de')" id="langBtn_de" title="Deutsch">DE</button>
                    <button onclick="setLang('es')" id="langBtn_es" title="Espa√±ol">ES</button>
                </div>
                <div id="authArea">
                    <button class="auth-btn" onclick="openAuthModal('login')" data-t="login">LOGIN</button>
                </div>
                <div class="soc-icons">
<a href="https://www.instagram.com/pagus_menswear/" target="_blank" rel="noopener" class="social-icon" title="Instagram"><svg viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg></a>
<a href="#" id="waLink" target="_blank" rel="noopener" class="social-icon" title="WhatsApp"><svg viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg></a>
<a href="https://www.linkedin.com/company/pagusmenswear/" target="_blank" rel="noopener" class="social-icon" title="LinkedIn"><svg viewBox="0 0 24 24"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 01-2.063-2.065 2.064 2.064 0 112.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg></a>
<a href="https://www.facebook.com/pagusmenswear/" target="_blank" rel="noopener" class="social-icon" title="Facebook"><svg viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg></a>
                </div>
            </div>
        </div>
        <nav><ul class="nav-list">
                <li><a href="?category=Wedding Suits" data-t="nav_wedding">Wedding Suits</a></li>
                <li><a href="?category=Formal Suits" data-t="nav_formal">Formal Suits</a></li>
                <li><a href="?category=Jackets" data-t="nav_jackets">Jackets</a></li>
                <li><a href="?category=Shirts" data-t="nav_shirts">Shirts</a></li>
                <li><a href="?category=Shoes" data-t="nav_shoes">Shoes</a></li>
                <li><a href="?category=Accessories" data-t="nav_accessories">Accessories</a></li>
                <li><a href="?category=Children" data-t="nav_children">Children</a></li>
        </ul></nav>
    </div></header>

    <!-- FIX #1: Carousel HTML elements - were completely missing -->
    <section class="carousel-section" id="carouselSection" style="display:none;">
        <div id="slideshowTrack" style="position:relative;"></div>
        <button class="ss-nav ss-prev" onclick="ssMove(-1)" aria-label="Previous slide">&#10094;</button>
        <button class="ss-nav ss-next" onclick="ssMove(1)" aria-label="Next slide">&#10095;</button>
        <div id="slideshowDots" class="ss-dots"></div>
    </section>

    <!-- SHOWCASE -->
    <section class="showcase-section" id="showcaseSection">
        <img src="images/showcase_hero.webp" alt="PAGUS Collection" class="showcase-hero-img">
        <div class="showcase-grid" id="showcaseGrid"></div>
    </section>
    
    <!-- HERO -->
    <section class="hero" id="heroSection">
        <div class="hero-content">
            <div class="hero-tagline" data-t="hero_tagline">B2B Wholesale Menswear</div>
            <h2 data-t="hero_title">Premium Suits &amp; Formal Wear</h2>
            <p data-t="hero_desc">Direct from manufacturer in ƒ∞zmir, Turkey. We offer high-quality men&#x27;s suits, tuxedos, and formal wear for retailers and wholesalers worldwide. Minimum order: 50 pieces.</p>
            <div class="hero-stats">
                <div class="stat-item"><span class="stat-num">15+</span><span class="stat-label" data-t="stat_years">Years Experience</span></div>
                <div class="stat-item"><span class="stat-num">50+</span><span class="stat-label" data-t="stat_countries">Countries</span></div>
                <div class="stat-item"><span class="stat-num">500+</span><span class="stat-label" data-t="stat_partners">Active Partners</span></div>
            </div>
        </div>
    </section>
    
    <section class="page-title-area" id="pageTitleArea" style="display:none;">
        <div id="back" class="back-btn" onclick="goBack()" style="display:none;">&#8592; <span data-t="back_btn">BACK</span></div>
        <h1 class="cat-title" id="pTitle" data-t="collection">COLLECTION</h1>
        <div class="info-guide" id="infoGuide"><span>&#128161;</span><b id="guideText" data-t="guide_tap">Tap heart to create list.</b></div>
    </section>
    <div class="grid" id="pGrid"><div style="grid-column:1/-1; text-align:center; padding:50px; color:#999;" data-t="loading">Loading Collection...</div></div>
    <div id="searchResults" style="display:none;"></div>
    <section class="private-label" id="privateLabelSection"><div class="pl-content">
        <h2 class="pl-title" data-t="pl_title">YOUR BRAND, OUR PRODUCTION</h2>
        <p style="color:#ddd; margin-bottom:35px;" data-t="pl_desc">Looking for a manufacturing partner? Pagus offers specialized Private Label services.</p>
        <a href="#" id="plWaLink" target="_blank" class="pl-btn" data-t="pl_btn">START PRODUCTION</a>
    </div></section>
    <button id="floatCart" class="float-cart" onclick="sendListToWhatsapp()">
        <svg style="width:20px;height:20px;fill:white;" viewBox="0 0 24 24"><path d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.893 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 3.891 1.746 5.634l-.999 3.648 3.742-.981zm11.387-5.464c-.074-.124-.272-.198-.57-.347-.297-.149-1.758-.868-2.031-.967-.272-.099-.47-.149-.669.149-.198.297-.768.967-.941 1.165-.173.198-.347.223-.644.074-.297-.149-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.521.151-.172.2-.296.3-.495.099-.198.05-.372-.025-.521-.075-.148-.669-1.611-.916-2.206-.242-.579-.487-.501-.669-.51l-.57-.01c-.198 0-.52.074-.792.372s-1.04 1.016-1.04 2.479 1.065 2.876 1.213 3.074c.149.198 2.095 3.2 5.076 4.487.709.306 1.263.489 1.694.626.712.226 1.36.194 1.872.118.571-.085 1.758-.719 2.006-1.413.248-.695.248-1.29.173-1.414z"/></svg>
        <span data-t="send_text">SEND</span> <span id="cartCount">0</span>
    </button>
    <!-- FIX #11: Toast notification element -->
    <div id="toastNotification" class="toast-notification" role="alert" aria-live="polite"></div>

    <!-- AUTH MODAL -->
    <div class="auth-overlay" id="authOverlay" onclick="if(event.target===this)closeAuthModal()">
        <button class="auth-close" onclick="closeAuthModal()" aria-label="Close">&times;</button>
        <div class="auth-card">
            <div class="auth-header">
                <h3>PAGUS</h3>
                <p data-t="auth_subtitle">B2B Wholesale Portal</p>
            </div>
            <div class="auth-tabs">
                <button class="auth-tab active" onclick="switchAuthTab('login')" id="tabLogin" data-t="login_tab">Login</button>
                <button class="auth-tab" onclick="switchAuthTab('register')" id="tabRegister" data-t="register_tab">Register</button>
            </div>
            <div class="auth-body">
                <div id="authError" class="auth-error"></div>
                <!-- LOGIN FORM -->
                <div id="loginForm">
                    <div class="auth-field">
                        <label for="loginEmail" data-t="email_label">Email</label>
                        <input type="email" id="loginEmail" placeholder="your@email.com" autocomplete="email">
                    </div>
                    <div class="auth-field">
                        <label for="loginPass" data-t="password_label">Password</label>
                        <input type="password" id="loginPass" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="current-password" onkeypress="if(event.key==='Enter')doLogin()">
                    </div>
                    <div class="auth-forgot"><a href="javascript:void(0)" onclick="showForgotPassword()" data-t="forgot_pw">Forgot your password?</a></div>
                    <button class="auth-submit" onclick="doLogin()" id="loginBtn" data-t="login">LOGIN</button>
                    <div class="auth-divider" data-t="or_divider">or</div>
                    <button class="google-btn" onclick="doGoogleLogin()">
                        <svg viewBox="0 0 24 24"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92a5.06 5.06 0 0 1-2.2 3.32v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.1z" fill="#4285F4"/><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"/><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/></svg>
                        Continue with Google
                    </button>
                </div>
                <!-- FORGOT PASSWORD FORM -->
                <div id="forgotForm" style="display:none;">
                    <p style="color:#666; font-size:0.85rem; margin-bottom:20px;" data-t="forgot_desc">Enter your email address and we'll send you a link to reset your password.</p>
                    <div class="auth-field">
                        <label for="forgotEmail" data-t="email_label">Email</label>
                        <input type="email" id="forgotEmail" placeholder="your@email.com" autocomplete="email" onkeypress="if(event.key==='Enter')doForgotPassword()">
                    </div>
                    <button class="auth-submit" onclick="doForgotPassword()" id="forgotBtn" data-t="send_reset">SEND RESET LINK</button>
                    <div class="auth-forgot" style="text-align:center; margin-top:15px;"><a href="javascript:void(0)" onclick="hideForgotPassword()" data-t="back_to_login">‚Üê Back to Login</a></div>
                </div>
                <!-- REGISTER FORM -->
                <div id="registerForm" style="display:none;">
                    <div class="auth-field">
                        <label for="regName" data-t="company_label">Company / Name</label>
                        <input type="text" id="regName" placeholder="Your company or full name" data-tp="company_ph" autocomplete="name">
                    </div>
                    <div class="auth-field">
                        <label for="regEmail" data-t="email_label">Email</label>
                        <input type="email" id="regEmail" placeholder="your@email.com" autocomplete="email">
                    </div>
                    <div class="auth-field">
                        <label for="regPass" data-t="password_label">Password</label>
                        <input type="password" id="regPass" placeholder="Min. 6 characters" data-tp="min6_ph" autocomplete="new-password">
                    </div>
                    <div class="auth-field">
                        <label for="regPass2" data-t="confirm_pw">Confirm Password</label>
                        <input type="password" id="regPass2" placeholder="Repeat password" data-tp="repeat_ph" autocomplete="new-password" onkeypress="if(event.key==='Enter')doRegister()">
                    </div>
                    <button class="auth-submit" onclick="doRegister()" id="regBtn" data-t="create_account">CREATE ACCOUNT</button>
                    <div class="auth-divider" data-t="or_divider">or</div>
                    <button class="google-btn" onclick="doGoogleLogin()">
                        <svg viewBox="0 0 24 24"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92a5.06 5.06 0 0 1-2.2 3.32v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.1z" fill="#4285F4"/><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"/><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/></svg>
                        Continue with Google
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- COOKIE BANNER -->
    <div class="cookie-banner" id="cookieBanner">
        <p data-t="cookie_text">We use essential cookies and local storage to improve your experience. By continuing, you accept our <a href="privacy.html">Privacy Policy</a>.</p>
        <button class="cookie-accept" onclick="acceptCookies()" data-t="accept_btn">ACCEPT</button>
    </div>
    <div id="pModal" class="modal" role="dialog" aria-modal="true" aria-label="Product detail">
        <span class="close" onclick="closeModal()" role="button" aria-label="Close modal" tabindex="0">&#215;</span>
        <div class="modal-content">
            <div class="slider" id="sliderArea">
                <button class="arrow prev" onclick="move(-1)" aria-label="Previous image">&#10094;</button>
                <img id="mImg" class="main-img" src="" alt="Product Detail" onclick="openFullscreen(this.src)" style="cursor:zoom-in">
                <button class="arrow next" onclick="move(1)" aria-label="Next image">&#10095;</button>
                <div class="img-counter" id="imgCount">1/4</div>
            </div>
            <div class="side-info">
                <span style="color:var(--color-gold); font-weight:700; font-size:0.8rem; letter-spacing:2px;" data-t="wholesale_mfr">WHOLESALE MANUFACTURER</span>
                <h2 id="mCode" style="font-family:var(--font-display); font-size:2.5rem; margin:15px 0 10px;">CODE</h2>
                <div id="modalPriceArea" style="margin-bottom:15px;"></div>
                <div class="badges"><div class="badge-item"><span class="badge-icon">üßµ</span data-t="badge_fabric">Premium Fabric</div><div class="badge-item"><span class="badge-icon">üáπüá∑</span data-t="badge_turkey">Made in Turkey</div><div class="badge-item"><span class="badge-icon">üì¶</span data-t="badge_wholesale">Wholesale Only</div></div>
                <p style="color:#555; margin-bottom:40px; font-size:1rem;" data-t="modal_desc">Premium quality fabric available for bulk orders.</p>
                <a id="wp" href="#" target="_blank" style="background:var(--color-gold); color:#fff; padding:18px; text-align:center; font-weight:700; letter-spacing:1px; border-radius:4px; box-shadow: 0 10px 20px rgba(201,169,98,0.3); text-decoration:none;" data-t="ask_wa">ASK PRICE VIA WHATSAPP</a>
            </div>
        </div>
    </div>
    <!-- FIX #9: Fullscreen lightbox - separated background click layer from image -->
    <div id="fullscreenOverlay" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,0.97);z-index:99999;justify-content:center;align-items:center;">
        <div id="fullscreenBg" onclick="closeFullscreen()" style="position:absolute;inset:0;cursor:zoom-out;"></div>
        <button onclick="event.stopPropagation();moveFullscreen(-1)" aria-label="Previous image" style="position:absolute;left:20px;top:50%;transform:translateY(-50%);background:rgba(255,255,255,0.1);border:none;color:#fff;font-size:2rem;width:50px;height:50px;border-radius:50%;cursor:pointer;z-index:2;">&#8249;</button>
        <img id="fullscreenImg" src="" alt="Product detail fullscreen" style="max-width:90vw;max-height:90vh;object-fit:contain;border-radius:4px;position:relative;z-index:1;">
        <button onclick="event.stopPropagation();moveFullscreen(1)" aria-label="Next image" style="position:absolute;right:20px;top:50%;transform:translateY(-50%);background:rgba(255,255,255,0.1);border:none;color:#fff;font-size:2rem;width:50px;height:50px;border-radius:50%;cursor:pointer;z-index:2;">&#8250;</button>
        <button onclick="closeFullscreen()" aria-label="Close fullscreen" style="position:absolute;top:20px;right:20px;background:rgba(255,255,255,0.1);border:none;color:#fff;font-size:2rem;width:50px;height:50px;border-radius:50%;cursor:pointer;z-index:2;">&times;</button>
        <div id="fullscreenCounter" style="position:absolute;bottom:20px;left:50%;transform:translateX(-50%);color:#888;font-size:0.9rem;z-index:2;">1/4</div>
    </div>
    <!-- FIX #14: Replaced document.write with span + JS textContent -->
    <footer class="footer"><div class="footer-grid">
        <div>
            <h4 data-t="ft_why">Why Pagus</h4>
            <p data-t="ft_why_text"><strong style="color:#ccc;">15+</strong> years of excellence in premium menswear manufacturing. From wedding suits to formal business attire, we deliver European-quality craftsmanship at competitive wholesale prices. Trusted by retailers across Italy, Germany, France, and beyond.</p>
        </div>
        <div>
            <h4 data-t="ft_contact">B2B Contact</h4>
            <ul>
                <li><strong>WhatsApp:</strong> <span id="footerWa"></span></li>
                <li><strong data-t="ft_location">Location:</strong> ƒ∞zmir, Turkey</li>
                <li><strong>Email:</strong> info@pagusmenswear.com</li>
            </ul>
            <ul class="footer-service-list" style="margin-top:15px;">
                <li data-t="ft_moq">Minimum order: 50 pieces</li>
                <li data-t="ft_pl">Private label &amp; custom branding</li>
                <li data-t="ft_price">Direct factory pricing</li>
                <li data-t="ft_ship">Worldwide shipping &amp; export docs</li>
                <li data-t="ft_mgr">Dedicated account manager</li>
            </ul>
        </div>
        <div>
            <h4 data-t="ft_links">Quick Links</h4>
            <div class="footer-links">
                <a href="javascript:void(0)" onclick="openTerms()"><svg viewBox="0 0 24 24"><path d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm-1 1.5L18.5 9H13V3.5zM6 20V4h5v7h7v9H6z"/></svg><span data-t="ft_tc">Terms &amp; Conditions</span></a>
                <a href="javascript:void(0)" onclick="openTerms()"><svg viewBox="0 0 24 24"><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.89 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1v2z"/></svg><span data-t="ft_privacy">Privacy &amp; GDPR</span></a>
                <a href="payment.html"><svg viewBox="0 0 24 24"><path d="M20 4H4c-1.11 0-2 .89-2 2v12c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z"/></svg><span data-t="ft_payment">Secure Payment &amp; Bank Accounts</span></a>
            </div>
        </div>
    </div><div class="footer-bottom">&copy; <span id="footerYear"></span> Pagus Menswear. <span data-t="ft_rights">All Rights Reserved.</span> &nbsp;|&nbsp; <a href="javascript:void(0)" onclick="openTerms()" style="color:#666;" data-t="ft_tc">Terms &amp; Conditions</a></div></footer>

    <!-- ADVANCED SEARCH PANEL -->
    <div class="adv-panel-overlay" id="advPanelOverlay" onclick="if(event.target===this)closeAdvancedSearch()">
        <div class="adv-panel">
            <div class="adv-panel-header">
                <h3 data-t="adv_search">Advanced Search</h3>
                <button class="adv-panel-close" onclick="closeAdvancedSearch()" aria-label="Close">&times;</button>
            </div>
            <div class="adv-panel-body">
                <div class="adv-section">
                    <div class="adv-section-title"><svg viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg><span data-t="adv_keyword">Keyword</span></div>
                    <input type="text" id="advKeyword" class="adv-keyword" data-tp="search_placeholder" placeholder="Search products..." onkeypress="if(event.key==='Enter')runAdvancedSearch()">
                </div>
                <div class="adv-section">
                    <div class="adv-section-title"><svg viewBox="0 0 24 24"><path d="M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"/></svg><span data-t="adv_category">Category</span></div>
                    <div class="adv-checks" id="advCategoryChecks"></div>
                </div>
                <div class="adv-section" id="advSubSection" style="display:none;">
                    <div class="adv-section-title"><svg viewBox="0 0 24 24"><path d="M3 18h6v-2H3v2zM3 6v2h18V6H3zm0 7h12v-2H3v2z"/></svg><span data-t="adv_subcat">Subcategory</span></div>
                    <div class="adv-checks adv-sub-checks" id="advSubChecks"></div>
                </div>
            </div>
            <div class="adv-panel-footer">
                <button class="adv-clear-btn" onclick="clearAdvancedSearch()" data-t="adv_clear">Clear</button>
                <button class="adv-search-submit" onclick="runAdvancedSearch()" data-t="adv_search_btn">SEARCH</button>
            </div>
        </div>
    </div>

    <!-- T&C OVERLAY -->
    <div class="tc-overlay" id="tcOverlay" onclick="if(event.target===this)closeTerms()">
        <button class="tc-close" onclick="closeTerms()" aria-label="Close">&times;</button>
        <div class="tc-container" id="tcContent"></div>
    </div>
    <script src="inventory.js?v=1771500808"></script>
    <!-- Firebase SDK (Compat for single-file usage) -->
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
    <script>
    // ================================================================
    //  üî• FIREBASE CONFIG ‚Äî Kendi project bilgilerini buraya yaz
    // ================================================================
    //  Firebase Console > Project Settings > General > Your Apps > Web App
    //  "firebaseConfig" objesini kopyalayƒ±p a≈üaƒüƒ±ya yapƒ±≈ütƒ±r.
    // ================================================================
    var firebaseConfig = {
        apiKey: "AIzaSyAWiTFG-XRg7u_dY7G_jftrL5uIwq4vvWM",
        authDomain: "pagus-website.firebaseapp.com",
        projectId: "pagus-website",
        storageBucket: "pagus-website.firebasestorage.app",
        messagingSenderId: "181201607827",
        appId: "1:181201607827:web:7872bded476390a6754166"
    };

    var _firebaseReady = false;
    var _currentUser = null;
    var _userRole = 'standard';
    var _priceCache = {};  // productId -> {standard, premium, vip, currency}

    try {
        firebase.initializeApp(firebaseConfig);
        _firebaseReady = true;
    } catch(e) {
        console.warn('Firebase init failed:', e.message);
    }

    var db = _firebaseReady ? firebase.firestore() : null;
    var auth = _firebaseReady ? firebase.auth() : null;

    // ===================== AUTH STATE =====================

    if(auth){
        auth.onAuthStateChanged(function(user){
            _currentUser = user;
            updateAuthUI();
            if(user){
                loadUserRole(user.uid);
                syncFavoritesFromFirestore(user.uid);
                loadAllPrices();
            } else {
                _userRole = 'standard';
                _priceCache = {};
                refreshPriceDisplays();
            }
        });
    }

    function updateAuthUI(){
        var area = document.getElementById('authArea');
        if(!area) return;
        if(_currentUser){
            var name = _currentUser.displayName || _currentUser.email.split('@')[0];
            area.innerHTML = '<div class="user-menu">'
                + '<span class="user-greeting">' + escapeHTML(name) + '</span>'
                + '<button class="logout-btn" onclick="doLogout()">Logout</button>'
                + '</div>';
        } else {
            area.innerHTML = '<button class="auth-btn" onclick="openAuthModal(\'login\')">LOGIN</button>';
        }
    }

    function loadUserRole(uid){
        if(!db) return;
        db.collection('users').doc(uid).get().then(function(doc){
            if(doc.exists){
                _userRole = doc.data().role || 'standard';
            }
            refreshPriceDisplays();
        }).catch(function(e){ console.warn('Role load error:', e); });
    }

    // ===================== AUTH MODAL =====================

    function openAuthModal(tab){
        document.getElementById('authOverlay').classList.add('visible');
        document.getElementById('authError').style.display = 'none';
        switchAuthTab(tab || 'login');
    }

    function closeAuthModal(){
        document.getElementById('authOverlay').classList.remove('visible');
        document.getElementById('authError').style.display = 'none';
    }

    function switchAuthTab(tab){
        document.getElementById('tabLogin').classList.toggle('active', tab === 'login');
        document.getElementById('tabRegister').classList.toggle('active', tab === 'register');
        document.getElementById('loginForm').style.display = tab === 'login' ? 'block' : 'none';
        document.getElementById('registerForm').style.display = tab === 'register' ? 'block' : 'none';
        document.getElementById('forgotForm').style.display = 'none';
        document.querySelector('.auth-tabs').style.display = 'flex';
        document.getElementById('authError').style.display = 'none';
    }

    function showAuthError(msg){
        var el = document.getElementById('authError');
        el.textContent = msg;
        el.style.display = 'block';
    }

    function doLogin(){
        if(!auth){ showAuthError('Firebase not configured.'); return; }
        var email = document.getElementById('loginEmail').value.trim();
        var pass = document.getElementById('loginPass').value;
        if(!email || !pass){ showAuthError('Please fill in all fields.'); return; }

        var btn = document.getElementById('loginBtn');
        btn.disabled = true; btn.textContent = 'LOGGING IN...';

        auth.signInWithEmailAndPassword(email, pass)
            .then(function(){
                closeAuthModal();
                showToast('Welcome back!');
            })
            .catch(function(e){
                var msg = 'Login failed.';
                if(e.code === 'auth/user-not-found' || e.code === 'auth/wrong-password' || e.code === 'auth/invalid-credential') msg = 'Invalid email or password.';
                if(e.code === 'auth/too-many-requests') msg = 'Too many attempts. Try again later.';
                showAuthError(msg);
            })
            .finally(function(){ btn.disabled = false; btn.textContent = t('login'); });
    }

    function showForgotPassword(){
        document.getElementById('loginForm').style.display='none';
        document.getElementById('forgotForm').style.display='block';
        document.getElementById('authError').style.display='none';
        document.querySelector('.auth-tabs').style.display='none';
        document.getElementById('forgotEmail').value=document.getElementById('loginEmail').value||'';
        document.getElementById('forgotEmail').focus();
    }

    function hideForgotPassword(){
        document.getElementById('forgotForm').style.display='none';
        document.getElementById('loginForm').style.display='block';
        document.querySelector('.auth-tabs').style.display='flex';
        document.getElementById('authError').style.display='none';
    }

    function doForgotPassword(){
        if(!auth){ showAuthError('Firebase not configured.'); return; }
        var email=document.getElementById('forgotEmail').value.trim();
        if(!email){ showAuthError(t('forgot_empty')); return; }

        var btn=document.getElementById('forgotBtn');
        btn.disabled=true; btn.textContent=t('sending');

        auth.sendPasswordResetEmail(email)
            .then(function(){
                document.getElementById('authError').style.display='none';
                showToast(t('reset_sent'));
                setTimeout(function(){ hideForgotPassword(); },1500);
            })
            .catch(function(e){
                var msg=t('reset_error');
                if(e.code==='auth/user-not-found') msg=t('reset_not_found');
                if(e.code==='auth/invalid-email') msg=t('reset_invalid');
                if(e.code==='auth/too-many-requests') msg=t('reset_too_many');
                showAuthError(msg);
            })
            .finally(function(){ btn.disabled=false; btn.textContent=t('send_reset'); });
    }

    function doRegister(){
        if(!auth){ showAuthError('Firebase not configured.'); return; }
        var name = document.getElementById('regName').value.trim();
        var email = document.getElementById('regEmail').value.trim();
        var pass = document.getElementById('regPass').value;
        var pass2 = document.getElementById('regPass2').value;

        if(!name || !email || !pass){ showAuthError('Please fill in all fields.'); return; }
        if(pass.length < 6){ showAuthError('Password must be at least 6 characters.'); return; }
        if(pass !== pass2){ showAuthError('Passwords do not match.'); return; }

        var btn = document.getElementById('regBtn');
        btn.disabled = true; btn.textContent = 'CREATING...';

        auth.createUserWithEmailAndPassword(email, pass)
            .then(function(cred){
                // Set display name
                return cred.user.updateProfile({ displayName: name }).then(function(){
                    // Create Firestore user doc
                    if(db){
                        return db.collection('users').doc(cred.user.uid).set({
                            displayName: name,
                            email: email,
                            role: 'standard',
                            createdAt: firebase.firestore.FieldValue.serverTimestamp()
                        });
                    }
                });
            })
            .then(function(){
                closeAuthModal();
                updateAuthUI();
                showToast('Account created! Welcome, ' + name);
            })
            .catch(function(e){
                var msg = 'Registration failed.';
                if(e.code === 'auth/email-already-in-use') msg = 'Email already registered. Try logging in.';
                if(e.code === 'auth/weak-password') msg = 'Password is too weak.';
                if(e.code === 'auth/invalid-email') msg = 'Invalid email address.';
                showAuthError(msg);
            })
            .finally(function(){ btn.disabled = false; btn.textContent = 'CREATE ACCOUNT'; });
    }

    function doLogout(){
        if(!auth) return;
        auth.signOut().then(function(){
            showToast('Logged out.');
            updateAuthUI();
            refreshPriceDisplays();
        });
    }

    function doGoogleLogin(){
        if(!auth){ showAuthError('Firebase not configured.'); return; }
        var provider = new firebase.auth.GoogleAuthProvider();
        auth.signInWithPopup(provider)
            .then(function(result){
                var user = result.user;
                var isNew = result.additionalUserInfo && result.additionalUserInfo.isNewUser;
                if(isNew && db){
                    db.collection('users').doc(user.uid).set({
                        displayName: user.displayName || user.email.split('@')[0],
                        email: user.email,
                        role: 'standard',
                        createdAt: firebase.firestore.FieldValue.serverTimestamp()
                    });
                }
                closeAuthModal();
                showToast('Welcome, ' + (user.displayName || 'there') + '!');
            })
            .catch(function(e){
                if(e.code === 'auth/popup-closed-by-user') return;
                if(e.code === 'auth/popup-blocked'){
                    showAuthError('Popup blocked. Please allow popups for this site.');
                    return;
                }
                showAuthError('Google login failed: ' + e.message);
            });
    }

    // ===================== PRICING =====================

    function loadAllPrices(){
        if(!db || !_currentUser) return;
        db.collection('pricing').get().then(function(snap){
            _priceCache = {};
            snap.forEach(function(doc){
                _priceCache[doc.id] = doc.data();
            });
            refreshPriceDisplays();
        }).catch(function(e){ console.warn('Price load error:', e); });
    }

    function getPrice(productId){
        var p = _priceCache[productId];
        if(!p) return null;
        var val = p[_userRole] || p['standard'] || null;
        if(val === null || val === undefined) return null;
        var currency = p.currency || 'EUR';
        return { value: val, currency: currency };
    }

    function formatPrice(price){
        if(!price) return '';
        return '‚Ç¨' + Number(price.value).toFixed(2);
    }

    function refreshPriceDisplays(){
        // Update price tags on product cards
        document.querySelectorAll('[data-price-id]').forEach(function(el){
            var pid = el.dataset.priceId;
            if(_currentUser){
                var price = getPrice(pid);
                if(price){
                    el.innerHTML = '<span class="price-tag">' + formatPrice(price) + '</span>'
                        + '<span class="price-tier">' + escapeHTML(_userRole) + ' price</span>';
                } else {
                    el.innerHTML = '<span class="price-tag" style="font-size:0.85rem;color:#999;">Price on request</span>';
                }
            } else {
                el.innerHTML = '<span class="price-login-hint" onclick="event.stopPropagation();openAuthModal(\'login\')">Login to see prices</span>';
            }
        });

        // Update modal price if open
        var modalPrice = document.getElementById('modalPriceArea');
        if(modalPrice && activeCode){
            if(_currentUser){
                var mp = getPrice(activeCode);
                if(mp){
                    modalPrice.innerHTML = '<div class="modal-price">' + formatPrice(mp) + '</div>'
                        + '<span class="price-tier">' + escapeHTML(_userRole) + ' price</span>';
                } else {
                    modalPrice.innerHTML = '<div class="modal-price" style="font-size:1.2rem;color:#999;">Price on request</div>';
                }
            } else {
                modalPrice.innerHTML = '<span class="modal-price-hint" onclick="openAuthModal(\'login\')">Login to see wholesale prices ‚Üí</span>';
            }
        }
    }

    // ===================== FAVORITES SYNC =====================

    function syncFavoritesFromFirestore(uid){
        if(!db) return;
        db.collection('users').doc(uid).collection('favorites').get().then(function(snap){
            var firestoreFavs = [];
            snap.forEach(function(doc){ firestoreFavs.push(doc.id); });

            // Merge: localStorage + Firestore (union)
            var merged = [...new Set([...cart, ...firestoreFavs])];
            cart = merged;
            if(lsAvailable) localStorage.setItem('pagusCart', JSON.stringify(cart));
            updateCartUI();

            // Save merged back to Firestore
            var batch = db.batch();
            merged.forEach(function(code){
                batch.set(db.collection('users').doc(uid).collection('favorites').doc(code), {
                    addedAt: firebase.firestore.FieldValue.serverTimestamp()
                });
            });
            batch.commit().catch(function(e){ console.warn('Fav sync error:', e); });
        }).catch(function(e){ console.warn('Fav load error:', e); });
    }

    function saveFavToFirestore(code, add){
        if(!db || !_currentUser) return;
        var ref = db.collection('users').doc(_currentUser.uid).collection('favorites').doc(code);
        if(add){
            ref.set({ addedAt: firebase.firestore.FieldValue.serverTimestamp() }).catch(function(){});
        } else {
            ref.delete().catch(function(){});
        }
    }

    // ===================== COOKIE BANNER =====================

    function initCookieBanner(){
        try {
            if(!localStorage.getItem('pagus_cookie_consent')){
                document.getElementById('cookieBanner').classList.add('visible');
            }
        } catch(e){
            // No localStorage ‚Äî don't show banner
        }
    }

    function acceptCookies(){
        try { localStorage.setItem('pagus_cookie_consent', '1'); } catch(e){}
        document.getElementById('cookieBanner').classList.remove('visible');
    }

    initCookieBanner();
    </script>
    <script>
        // ============================================================
        // PAGUS MENSWEAR - FIXED VERSION
        // All 14 issues resolved (see FIX comments throughout)
        // ============================================================

        var FEATURES={carousel:false,hero:true,search:true,favorites:true,whatsappFloat:true,privateLabel:true,showcase:true};
        var WHATSAPP_NUMBER='905511748907';
        var CAT_DISPLAY_NAMES={"√áƒ±kma Yaka":"Detachable Collar"};

        // i18n helper ‚Äî single source of truth for language detection & texts
        // ===================== i18n SYSTEM =====================
        var SUPPORTED_LANGS=['en','it','fr','de','es'];
        function detectLang(){
            var saved=localStorage.getItem('pagusLang');
            if(saved&&SUPPORTED_LANGS.indexOf(saved)!==-1) return saved;
            var bl=navigator.language||navigator.userLanguage||'en';
            var short=bl.substring(0,2).toLowerCase();
            return SUPPORTED_LANGS.indexOf(short)!==-1?short:'en';
        }
        var LANG=detectLang();

        var I18N={
            // NAV
            nav_wedding:{en:'Wedding Suits',it:'Abiti da Sposo',fr:'Costumes de Mariage',de:'Hochzeitsanz√ºge',es:'Trajes de Novio'},
            nav_formal:{en:'Formal Suits',it:'Abiti Formali',fr:'Costumes Formels',de:'Formelle Anz√ºge',es:'Trajes Formales'},
            nav_jackets:{en:'Jackets',it:'Giacche',fr:'Vestes',de:'Jacken',es:'Chaquetas'},
            nav_shirts:{en:'Shirts',it:'Camicie',fr:'Chemises',de:'Hemden',es:'Camisas'},
            nav_shoes:{en:'Shoes',it:'Scarpe',fr:'Chaussures',de:'Schuhe',es:'Zapatos'},
            nav_accessories:{en:'Accessories',it:'Accessori',fr:'Accessoires',de:'Accessoires',es:'Accesorios'},
            nav_children:{en:'Children',it:'Bambini',fr:'Enfants',de:'Kinder',es:'Ni√±os'},
            login:{en:'LOGIN',it:'ACCEDI',fr:'CONNEXION',de:'ANMELDEN',es:'INICIAR SESI√ìN'},
            // SEARCH
            search_placeholder:{en:'Search products...',it:'Cerca prodotti...',fr:'Rechercher...',de:'Produkte suchen...',es:'Buscar productos...'},
            // HERO
            hero_tagline:{en:'B2B Wholesale Menswear',it:'Abbigliamento Uomo B2B all\'Ingrosso',fr:'Mode Homme B2B en Gros',de:'B2B Herrenmode Gro√ühandel',es:'Moda Masculina B2B al por Mayor'},
            hero_title:{en:'Premium Suits & Formal Wear',it:'Abiti Premium & Cerimonia',fr:'Costumes Premium & Tenue de C√©r√©monie',de:'Premium-Anz√ºge & Festliche Kleidung',es:'Trajes Premium & Ropa de Ceremonia'},
            hero_desc:{en:'Direct from manufacturer in ƒ∞zmir, Turkey. We offer high-quality men\'s suits, tuxedos, and formal wear for retailers and wholesalers worldwide. Minimum order: 50 pieces.',it:'Direttamente dal produttore a ƒ∞zmir, Turchia. Offriamo abiti da uomo, smoking e abbigliamento formale di alta qualit√† per rivenditori e grossisti in tutto il mondo. Ordine minimo: 50 pezzi.',fr:'Directement du fabricant √† ƒ∞zmir, Turquie. Nous proposons des costumes, smokings et v√™tements de c√©r√©monie de haute qualit√© pour d√©taillants et grossistes du monde entier. Commande minimum : 50 pi√®ces.',de:'Direkt vom Hersteller in ƒ∞zmir, T√ºrkei. Wir bieten hochwertige Herrenanz√ºge, Smokings und festliche Kleidung f√ºr Einzelh√§ndler und Gro√üh√§ndler weltweit. Mindestbestellung: 50 St√ºck.',es:'Directamente del fabricante en ƒ∞zmir, Turqu√≠a. Ofrecemos trajes, esm√≥quines y ropa formal de alta calidad para minoristas y mayoristas en todo el mundo. Pedido m√≠nimo: 50 piezas.'},
            stat_years:{en:'Years Experience',it:'Anni di Esperienza',fr:'Ans d\'Exp√©rience',de:'Jahre Erfahrung',es:'A√±os de Experiencia'},
            stat_countries:{en:'Countries',it:'Paesi',fr:'Pays',de:'L√§nder',es:'Pa√≠ses'},
            stat_partners:{en:'Active Partners',it:'Partner Attivi',fr:'Partenaires Actifs',de:'Aktive Partner',es:'Socios Activos'},
            // PAGE
            back_btn:{en:'BACK',it:'INDIETRO',fr:'RETOUR',de:'ZUR√úCK',es:'ATR√ÅS'},
            collection:{en:'COLLECTION',it:'COLLEZIONE',fr:'COLLECTION',de:'KOLLEKTION',es:'COLECCI√ìN'},
            guide_tap:{en:'Tap heart to create list.',it:'Tocca il cuore per creare la lista.',fr:'Appuyez sur le c≈ìur pour cr√©er votre liste.',de:'Tippen Sie auf das Herz, um eine Liste zu erstellen.',es:'Toca el coraz√≥n para crear tu lista.'},
            loading:{en:'Loading Collection...',it:'Caricamento Collezione...',fr:'Chargement de la Collection...',de:'Kollektion wird geladen...',es:'Cargando Colecci√≥n...'},
            // PRIVATE LABEL
            pl_title:{en:'YOUR BRAND, OUR PRODUCTION',it:'IL VOSTRO MARCHIO, LA NOSTRA PRODUZIONE',fr:'VOTRE MARQUE, NOTRE PRODUCTION',de:'IHRE MARKE, UNSERE PRODUKTION',es:'SU MARCA, NUESTRA PRODUCCI√ìN'},
            pl_desc:{en:'Looking for a manufacturing partner? Pagus offers specialized Private Label services.',it:'Cercate un partner produttivo? Pagus offre servizi specializzati di Private Label.',fr:'Vous cherchez un partenaire de fabrication ? Pagus propose des services de marque priv√©e sp√©cialis√©s.',de:'Suchen Sie einen Produktionspartner? Pagus bietet spezialisierte Private-Label-Services.',es:'¬øBusca un socio de fabricaci√≥n? Pagus ofrece servicios especializados de Marca Blanca.'},
            pl_btn:{en:'START PRODUCTION',it:'AVVIA PRODUZIONE',fr:'LANCER LA PRODUCTION',de:'PRODUKTION STARTEN',es:'INICIAR PRODUCCI√ìN'},
            // FLOAT CART
            send_text:{en:'SEND',it:'INVIA',fr:'ENVOYER',de:'SENDEN',es:'ENVIAR'},
            // MODAL
            wholesale_mfr:{en:'WHOLESALE MANUFACTURER',it:'PRODUTTORE ALL\'INGROSSO',fr:'FABRICANT EN GROS',de:'GROSSHANDEL-HERSTELLER',es:'FABRICANTE MAYORISTA'},
            badge_fabric:{en:'Premium Fabric',it:'Tessuto Premium',fr:'Tissu Premium',de:'Premium-Stoff',es:'Tela Premium'},
            badge_turkey:{en:'Made in Turkey',it:'Prodotto in Turchia',fr:'Fabriqu√© en Turquie',de:'Hergestellt in der T√ºrkei',es:'Hecho en Turqu√≠a'},
            badge_wholesale:{en:'Wholesale Only',it:'Solo Ingrosso',fr:'Grossiste Uniquement',de:'Nur Gro√ühandel',es:'Solo Mayorista'},
            modal_desc:{en:'Premium quality fabric available for bulk orders.',it:'Tessuto di qualit√† premium disponibile per ordini all\'ingrosso.',fr:'Tissu de qualit√© premium disponible pour commandes en gros.',de:'Premium-Qualit√§tsstoff f√ºr Gro√übestellungen verf√ºgbar.',es:'Tela de calidad premium disponible para pedidos al por mayor.'},
            ask_wa:{en:'ASK PRICE VIA WHATSAPP',it:'CHIEDI IL PREZZO SU WHATSAPP',fr:'DEMANDER LE PRIX VIA WHATSAPP',de:'PREIS √úBER WHATSAPP ANFRAGEN',es:'PEDIR PRECIO POR WHATSAPP'},
            // AUTH
            auth_subtitle:{en:'B2B Wholesale Portal',it:'Portale B2B Ingrosso',fr:'Portail B2B Grossiste',de:'B2B Gro√ühandel-Portal',es:'Portal B2B Mayorista'},
            login_tab:{en:'Login',it:'Accedi',fr:'Connexion',de:'Anmelden',es:'Iniciar Sesi√≥n'},
            register_tab:{en:'Register',it:'Registrati',fr:'S\'inscrire',de:'Registrieren',es:'Registrarse'},
            email_label:{en:'Email',it:'Email',fr:'Email',de:'E-Mail',es:'Correo electr√≥nico'},
            password_label:{en:'Password',it:'Password',fr:'Mot de passe',de:'Passwort',es:'Contrase√±a'},
            or_divider:{en:'or',it:'oppure',fr:'ou',de:'oder',es:'o'},
            google_btn:{en:'Continue with Google',it:'Continua con Google',fr:'Continuer avec Google',de:'Mit Google fortfahren',es:'Continuar con Google'},
            company_label:{en:'Company / Name',it:'Azienda / Nome',fr:'Entreprise / Nom',de:'Firma / Name',es:'Empresa / Nombre'},
            company_ph:{en:'Your company or full name',it:'Nome della vostra azienda',fr:'Nom de votre entreprise',de:'Ihr Firmenname',es:'Nombre de su empresa'},
            min6_ph:{en:'Min. 6 characters',it:'Min. 6 caratteri',fr:'Min. 6 caract√®res',de:'Min. 6 Zeichen',es:'M√≠n. 6 caracteres'},
            confirm_pw:{en:'Confirm Password',it:'Conferma Password',fr:'Confirmer le mot de passe',de:'Passwort best√§tigen',es:'Confirmar contrase√±a'},
            repeat_ph:{en:'Repeat password',it:'Ripeti la password',fr:'R√©p√©ter le mot de passe',de:'Passwort wiederholen',es:'Contrase√±a de nuevo'},
            create_account:{en:'CREATE ACCOUNT',it:'CREA ACCOUNT',fr:'CR√âER UN COMPTE',de:'KONTO ERSTELLEN',es:'CREAR CUENTA'},
            // FORGOT PASSWORD
            forgot_pw:{en:'Forgot your password?',it:'Password dimenticata?',fr:'Mot de passe oubli√© ?',de:'Passwort vergessen?',es:'¬øOlvidaste tu contrase√±a?'},
            forgot_desc:{en:'Enter your email address and we\'ll send you a link to reset your password.',it:'Inserisci il tuo indirizzo email e ti invieremo un link per reimpostare la password.',fr:'Entrez votre adresse email et nous vous enverrons un lien pour r√©initialiser votre mot de passe.',de:'Geben Sie Ihre E-Mail-Adresse ein und wir senden Ihnen einen Link zum Zur√ºcksetzen Ihres Passworts.',es:'Ingrese su correo electr√≥nico y le enviaremos un enlace para restablecer su contrase√±a.'},
            send_reset:{en:'SEND RESET LINK',it:'INVIA LINK DI RESET',fr:'ENVOYER LE LIEN',de:'LINK SENDEN',es:'ENVIAR ENLACE'},
            back_to_login:{en:'‚Üê Back to Login',it:'‚Üê Torna al Login',fr:'‚Üê Retour √† la Connexion',de:'‚Üê Zur√ºck zur Anmeldung',es:'‚Üê Volver al Inicio de Sesi√≥n'},
            sending:{en:'SENDING...',it:'INVIO...',fr:'ENVOI...',de:'WIRD GESENDET...',es:'ENVIANDO...'},
            reset_sent:{en:'Reset link sent! Check your email inbox.',it:'Link di reset inviato! Controlla la tua casella email.',fr:'Lien envoy√© ! V√©rifiez votre bo√Æte mail.',de:'Link gesendet! √úberpr√ºfen Sie Ihr E-Mail-Postfach.',es:'¬°Enlace enviado! Revise su bandeja de entrada.'},
            reset_error:{en:'Could not send reset email. Please try again.',it:'Impossibile inviare l\'email di reset. Riprova.',fr:'Impossible d\'envoyer l\'email. Veuillez r√©essayer.',de:'E-Mail konnte nicht gesendet werden. Bitte versuchen Sie es erneut.',es:'No se pudo enviar el correo. Int√©ntelo de nuevo.'},
            reset_not_found:{en:'No account found with this email address.',it:'Nessun account trovato con questa email.',fr:'Aucun compte trouv√© avec cette adresse email.',de:'Kein Konto mit dieser E-Mail-Adresse gefunden.',es:'No se encontr√≥ ninguna cuenta con este correo.'},
            reset_invalid:{en:'Please enter a valid email address.',it:'Inserisci un indirizzo email valido.',fr:'Veuillez entrer une adresse email valide.',de:'Bitte geben Sie eine g√ºltige E-Mail-Adresse ein.',es:'Ingrese una direcci√≥n de correo v√°lida.'},
            reset_too_many:{en:'Too many attempts. Please try again later.',it:'Troppi tentativi. Riprova pi√π tardi.',fr:'Trop de tentatives. R√©essayez plus tard.',de:'Zu viele Versuche. Bitte versuchen Sie es sp√§ter erneut.',es:'Demasiados intentos. Int√©ntelo m√°s tarde.'},
            forgot_empty:{en:'Please enter your email address.',it:'Inserisci il tuo indirizzo email.',fr:'Veuillez entrer votre adresse email.',de:'Bitte geben Sie Ihre E-Mail-Adresse ein.',es:'Ingrese su direcci√≥n de correo.'},
            // COOKIE
            cookie_text:{en:'We use essential cookies and local storage to improve your experience. By continuing, you accept our <a href="privacy.html">Privacy Policy</a>.',it:'Utilizziamo cookie essenziali e archiviazione locale per migliorare la tua esperienza. Continuando, accetti la nostra <a href="privacy.html">Informativa sulla Privacy</a>.',fr:'Nous utilisons des cookies essentiels et le stockage local pour am√©liorer votre exp√©rience. En continuant, vous acceptez notre <a href="privacy.html">Politique de Confidentialit√©</a>.',de:'Wir verwenden essentielle Cookies und lokalen Speicher, um Ihr Erlebnis zu verbessern. Durch die weitere Nutzung akzeptieren Sie unsere <a href="privacy.html">Datenschutzrichtlinie</a>.',es:'Utilizamos cookies esenciales y almacenamiento local para mejorar su experiencia. Al continuar, acepta nuestra <a href="privacy.html">Pol√≠tica de Privacidad</a>.'},
            accept_btn:{en:'ACCEPT',it:'ACCETTO',fr:'ACCEPTER',de:'AKZEPTIEREN',es:'ACEPTAR'},
            // FOOTER
            ft_why:{en:'Why Pagus',it:'Perch√© Pagus',fr:'Pourquoi Pagus',de:'Warum Pagus',es:'¬øPor Qu√© Pagus?'},
            ft_why_text:{en:'<strong style="color:#ccc;">15+</strong> years of excellence in premium menswear manufacturing. From wedding suits to formal business attire, we deliver European-quality craftsmanship at competitive wholesale prices. Trusted by retailers across Italy, Germany, France, and beyond.',it:'<strong style="color:#ccc;">15+</strong> anni di eccellenza nella produzione di abbigliamento maschile premium. Dagli abiti da sposo ai completi formali, offriamo artigianalit√† di qualit√† europea a prezzi competitivi. Affidabili per rivenditori in Italia, Germania, Francia e oltre.',fr:'<strong style="color:#ccc;">15+</strong> ans d\'excellence dans la fabrication de mode masculine premium. Des costumes de mariage aux tenues formelles, nous offrons un savoir-faire de qualit√© europ√©enne √† des prix de gros comp√©titifs. Approuv√© par des d√©taillants en Italie, Allemagne, France et au-del√†.',de:'<strong style="color:#ccc;">15+</strong> Jahre Exzellenz in der Premium-Herrenmode-Fertigung. Von Hochzeitsanz√ºgen bis zu formeller Gesch√§ftskleidung liefern wir europ√§ische Handwerksqualit√§t zu wettbewerbsf√§higen Gro√ühandelspreisen. Vertraut von Einzelh√§ndlern in Italien, Deutschland, Frankreich und dar√ºber hinaus.',es:'<strong style="color:#ccc;">15+</strong> a√±os de excelencia en la fabricaci√≥n de moda masculina premium. Desde trajes de novio hasta vestimenta formal, ofrecemos artesan√≠a de calidad europea a precios mayoristas competitivos. Confianza de minoristas en Italia, Alemania, Francia y m√°s.'},
            ft_contact:{en:'B2B Contact',it:'Contatto B2B',fr:'Contact B2B',de:'B2B Kontakt',es:'Contacto B2B'},
            ft_location:{en:'Location:',it:'Sede:',fr:'Si√®ge :',de:'Standort:',es:'Ubicaci√≥n:'},
            ft_moq:{en:'Minimum order: 50 pieces',it:'Ordine minimo: 50 pezzi',fr:'Commande minimum : 50 pi√®ces',de:'Mindestbestellung: 50 St√ºck',es:'Pedido m√≠nimo: 50 piezas'},
            ft_pl:{en:'Private label & custom branding',it:'Private label & personalizzazione del marchio',fr:'Marque priv√©e & personnalisation',de:'Private Label & individuelle Markengestaltung',es:'Marca blanca & personalizaci√≥n'},
            ft_price:{en:'Direct factory pricing',it:'Prezzi diretti di fabbrica',fr:'Prix usine direct',de:'Direkte Fabrikpreise',es:'Precios directos de f√°brica'},
            ft_ship:{en:'Worldwide shipping & export docs',it:'Spedizione mondiale & documentazione export',fr:'Exp√©dition mondiale & documents d\'exportation',de:'Weltweiter Versand & Exportdokumente',es:'Env√≠o mundial & documentaci√≥n de exportaci√≥n'},
            ft_mgr:{en:'Dedicated account manager',it:'Account manager dedicato',fr:'Gestionnaire de compte d√©di√©',de:'Dedizierter Kundenbetreuer',es:'Gestor de cuenta dedicado'},
            ft_links:{en:'Quick Links',it:'Link Utili',fr:'Liens Rapides',de:'Schnelllinks',es:'Enlaces R√°pidos'},
            ft_tc:{en:'Terms & Conditions',it:'Termini e Condizioni',fr:'Conditions G√©n√©rales',de:'Allgemeine Gesch√§ftsbedingungen',es:'T√©rminos y Condiciones'},
            ft_privacy:{en:'Privacy & GDPR',it:'Privacy & GDPR',fr:'Confidentialit√© & RGPD',de:'Datenschutz & DSGVO',es:'Privacidad & RGPD'},
            ft_payment:{en:'Secure Payment & Bank Accounts',it:'Pagamento Sicuro & Conti Bancari',fr:'Paiement S√©curis√© & Comptes Bancaires',de:'Sichere Zahlung & Bankkonten',es:'Pago Seguro & Cuentas Bancarias'},
            ft_rights:{en:'All Rights Reserved.',it:'Tutti i Diritti Riservati.',fr:'Tous Droits R√©serv√©s.',de:'Alle Rechte vorbehalten.',es:'Todos los Derechos Reservados.'},
            // EXISTING TEXTS
            search_min:{en:'Please enter at least 2 characters',it:'Inserisci almeno 2 caratteri',fr:'Veuillez entrer au moins 2 caract√®res',de:'Bitte mindestens 2 Zeichen eingeben',es:'Ingrese al menos 2 caracteres'},
            wa_list_header:{en:'Hi Pagus, I am interested in the prices for these models:',it:'Salve Pagus, sono interessato ai prezzi di questi modelli:',fr:'Bonjour Pagus, je suis int√©ress√© par les prix de ces mod√®les :',de:'Hallo Pagus, ich interessiere mich f√ºr die Preise dieser Modelle:',es:'Hola Pagus, estoy interesado en los precios de estos modelos:'},
            wa_list_footer:{en:'Thanks.',it:'Grazie.',fr:'Merci.',de:'Danke.',es:'Gracias.'},
            wa_inquiry:{en:'Hi, inquiring about: ',it:'Salve, vorrei ricevere informazioni sul modello: ',fr:'Bonjour, je souhaite me renseigner sur : ',de:'Hallo, Anfrage zu: ',es:'Hola, consulta sobre: '},
            popup_blocked:{en:'Popup blocked. Please allow popups for WhatsApp.',it:'Popup bloccato. Consenti i popup per WhatsApp.',fr:'Popup bloqu√©. Veuillez autoriser les popups pour WhatsApp.',de:'Popup blockiert. Bitte erlauben Sie Popups f√ºr WhatsApp.',es:'Popup bloqueado. Permita los popups para WhatsApp.'},
            // ADV SEARCH
            adv_search:{en:'Advanced Search',it:'Ricerca Avanzata',fr:'Recherche Avanc√©e',de:'Erweiterte Suche',es:'B√∫squeda Avanzada'},
            adv_keyword:{en:'Keyword',it:'Parola Chiave',fr:'Mot-cl√©',de:'Stichwort',es:'Palabra Clave'},
            adv_category:{en:'Category',it:'Categoria',fr:'Cat√©gorie',de:'Kategorie',es:'Categor√≠a'},
            adv_subcat:{en:'Subcategory',it:'Sottocategoria',fr:'Sous-cat√©gorie',de:'Unterkategorie',es:'Subcategor√≠a'},
            adv_all_cats:{en:'All Categories',it:'Tutte le Categorie',fr:'Toutes les Cat√©gories',de:'Alle Kategorien',es:'Todas las Categor√≠as'},
            adv_all_subcats:{en:'All Subcategories',it:'Tutte le Sottocategorie',fr:'Toutes les Sous-cat√©gories',de:'Alle Unterkategorien',es:'Todas las Subcategor√≠as'},
            adv_search_btn:{en:'SEARCH',it:'CERCA',fr:'RECHERCHER',de:'SUCHEN',es:'BUSCAR'},
            adv_clear:{en:'Clear',it:'Cancella',fr:'Effacer',de:'L√∂schen',es:'Borrar'},
            adv_no_results:{en:'No results found',it:'Nessun risultato',fr:'Aucun r√©sultat',de:'Keine Ergebnisse',es:'Sin resultados'},
            adv_results:{en:'results for',it:'risultati per',fr:'r√©sultats pour',de:'Ergebnisse f√ºr',es:'resultados para'}
        };

        // Compat: old t() function
        var TEXTS=I18N;
        function t(key){return(I18N[key]&&I18N[key][LANG])||((I18N[key]&&I18N[key]['en'])||key);}

        // ===================== T&C TRANSLATIONS =====================
        var TC={
            en:{
                h1:'Terms and Conditions',
                sub:'Wholesale Terms and Conditions of Sale',
                upd:'Last updated: February 2026',
                s:[
                    {t:'1. Definitions',c:'<ul><li><strong>"Seller"</strong> refers to PAGUS Menswear, located in ƒ∞zmir, Turkey.</li><li><strong>"Buyer"</strong> refers to any business entity placing a wholesale order.</li><li><strong>"Goods"</strong> refers to all menswear products offered for sale.</li><li><strong>"Order"</strong> refers to any purchase order submitted by the Buyer.</li><li><strong>"Website"</strong> refers to pagusmenswear.com and all its subdomains.</li></ul>'},
                    {t:'2. Scope and Application',c:'<p>2.1. These Terms and Conditions ("T&Cs") apply to all wholesale orders placed with PAGUS Menswear through the Website, email, WhatsApp, or any other channel.</p><p>2.2. By placing an order, the Buyer agrees to be bound by these T&Cs. Any conflicting terms proposed by the Buyer shall not apply unless expressly agreed in writing.</p><p>2.3. These T&Cs are intended for business-to-business (B2B) transactions only. PAGUS Menswear does not sell directly to consumers.</p>'},
                    {t:'3. Orders and Minimum Quantities',c:'<p>3.1. The minimum order quantity (MOQ) is 50 pieces per order, unless otherwise agreed in writing.</p><p>3.2. Orders may be placed via the Website inquiry form, email, or WhatsApp. An order is confirmed only upon written acknowledgement by PAGUS Menswear.</p><p>3.3. PAGUS Menswear reserves the right to refuse any order at its sole discretion.</p><p>3.4. Product availability is subject to stock levels at the time of order confirmation. Colours and fabric compositions may vary slightly between production batches.</p>'},
                    {t:'4. Prices and Payment',c:'<p>4.1. All prices are quoted in Euros (EUR) or US Dollars (USD) and are exclusive of shipping, insurance, customs duties, and applicable taxes.</p><p>4.2. Prices are valid for 30 days from the date of quotation.</p><p>4.3. Standard payment terms:</p><ul><li>50% deposit upon order confirmation</li><li>50% balance before shipment</li></ul><p>4.4. Payment by bank transfer (SWIFT/IBAN). All bank charges are borne by the Buyer.</p><p>4.5. PAGUS Menswear reserves the right to suspend or cancel orders in case of late or incomplete payment.</p>'},
                    {t:'5. Shipping and Delivery',c:'<p>5.1. Delivery terms specified using Incoterms¬Æ 2020 (e.g., EXW, FOB, CIF).</p><p>5.2. Estimated delivery times are indicative and not binding.</p><p>5.3. Risk of loss passes to the Buyer per the agreed Incoterm.</p><p>5.4. The Buyer is responsible for all import duties, customs clearance, and local taxes.</p>'},
                    {t:'6. Quality and Inspection',c:'<p>6.1. All Goods are manufactured to professional quality standards.</p><p>6.2. The Buyer must inspect Goods upon delivery and notify of any defects within 7 business days.</p><p>6.3. Failure to notify constitutes acceptance.</p><p>6.4. Minor variations in colour, texture, or measurements within industry tolerances are not defects.</p>'},
                    {t:'7. Returns and Claims',c:'<p>7.1. Returns accepted only for manufacturing defects or incorrect items, with prior written approval.</p><p>7.2. Approved returns shipped back in original packaging within 14 days.</p><p>7.3. PAGUS Menswear may replace defective Goods or issue a credit note.</p><p>7.4. Altered, washed, worn, or damaged Goods are not eligible for return.</p>'},
                    {t:'8. Private Label and Customisation',c:'<p>8.1. Private label and custom branding services available under separate agreements.</p><p>8.2. Custom orders are non-cancellable once production has commenced.</p><p>8.3. The Buyer warrants provided designs do not infringe third-party IP rights.</p>'},
                    {t:'9. Intellectual Property',c:'<p>9.1. All designs, photographs, and content are the exclusive property of PAGUS Menswear.</p><p>9.2. Product images may be used solely for reselling purchased Goods.</p>'},
                    {t:'10. Data Protection (GDPR)',c:'<p>10.1. PAGUS Menswear collects personal data solely for:</p><ul><li>Processing and fulfilling orders</li><li>Communicating regarding orders and inquiries</li><li>Customer support</li><li>B2B marketing communications (with consent or legitimate interest)</li></ul><p>10.2. Under GDPR and Turkish KVKK, the Buyer has the right to access, rectify, erase, restrict, port data, and withdraw consent.</p><p>10.3. Data not shared with third parties except for order fulfilment.</p><p>10.4. Contact: info@pagusmenswear.com</p>'},
                    {t:'11. Cookies',c:'<p>11.1. The Website uses cookies to enhance user experience and analyse traffic.</p><p>11.2. Cookies can be managed through browser settings.</p><p>11.3. Essential cookies cannot be disabled without impacting functionality.</p>'},
                    {t:'12. Limitation of Liability',c:'<p>12.1. Total liability shall not exceed the value of the specific order.</p><p>12.2. No liability for indirect, incidental, or consequential damages.</p><p>12.3. Nothing limits liability for fraud or wilful misconduct.</p>'},
                    {t:'13. Force Majeure',c:'<p>13.1. No liability for failures due to events beyond reasonable control including natural disasters, pandemics, war, trade embargoes, or supply chain disruptions.</p>'},
                    {t:'14. Governing Law',c:'<p>14.1. Governed by the laws of the Republic of Turkey.</p><p>14.2. Disputes submitted to ƒ∞zmir Courts and Enforcement Offices.</p><p>14.3. EU Buyers may assert mandatory protection rights under their local laws.</p>'},
                    {t:'15. Modifications',c:'<p>15.1. PAGUS Menswear may modify these T&Cs at any time.</p><p>15.2. Continued use constitutes acceptance of modified T&Cs.</p>'},
                    {t:'16. Contact',c:'<div class="tc-contact"><strong>PAGUS Menswear</strong><br>ƒ∞zmir, Turkey<br>Email: info@pagusmenswear.com<br>WhatsApp: Available on the Website</div>'}
                ]
            },
            it:{
                h1:'Termini e Condizioni',
                sub:'Condizioni Generali di Vendita all\'Ingrosso',
                upd:'Ultimo aggiornamento: Febbraio 2026',
                s:[
                    {t:'1. Definizioni',c:'<ul><li><strong>"Venditore"</strong> si riferisce a PAGUS Menswear, con sede a ƒ∞zmir, Turchia.</li><li><strong>"Acquirente"</strong> si riferisce a qualsiasi entit√† commerciale che effettua un ordine all\'ingrosso.</li><li><strong>"Merci"</strong> si riferisce a tutti i prodotti di abbigliamento maschile in vendita.</li><li><strong>"Ordine"</strong> si riferisce a qualsiasi ordine di acquisto inviato dall\'Acquirente.</li><li><strong>"Sito Web"</strong> si riferisce a pagusmenswear.com e tutti i suoi sottodomini.</li></ul>'},
                    {t:'2. Ambito di Applicazione',c:'<p>2.1. Le presenti Condizioni Generali si applicano a tutti gli ordini all\'ingrosso effettuati con PAGUS Menswear tramite Sito Web, email, WhatsApp o qualsiasi altro canale.</p><p>2.2. Effettuando un ordine, l\'Acquirente accetta le presenti Condizioni. Condizioni contrastanti proposte dall\'Acquirente non si applicano salvo accordo scritto.</p><p>2.3. Le presenti Condizioni sono destinate esclusivamente a transazioni B2B. PAGUS Menswear non vende direttamente ai consumatori.</p>'},
                    {t:'3. Ordini e Quantit√† Minime',c:'<p>3.1. La quantit√† minima d\'ordine (MOQ) √® di 50 pezzi per ordine, salvo diverso accordo scritto.</p><p>3.2. Gli ordini possono essere effettuati tramite modulo di richiesta, email o WhatsApp. Un ordine √® confermato solo previa conferma scritta di PAGUS Menswear.</p><p>3.3. PAGUS Menswear si riserva il diritto di rifiutare qualsiasi ordine a sua esclusiva discrezione.</p><p>3.4. La disponibilit√† dei prodotti √® soggetta ai livelli di stock al momento della conferma. Colori e composizioni dei tessuti possono variare leggermente tra i lotti di produzione.</p>'},
                    {t:'4. Prezzi e Pagamento',c:'<p>4.1. Tutti i prezzi sono indicati in Euro (EUR) o Dollari USA (USD), escluse spedizione, assicurazione, dazi doganali e tasse.</p><p>4.2. I prezzi sono validi per 30 giorni dalla data del preventivo.</p><p>4.3. Condizioni standard di pagamento:</p><ul><li>50% di anticipo alla conferma dell\'ordine</li><li>50% di saldo prima della spedizione</li></ul><p>4.4. Pagamento tramite bonifico bancario (SWIFT/IBAN). Tutte le spese bancarie sono a carico dell\'Acquirente.</p><p>4.5. PAGUS Menswear si riserva il diritto di sospendere o annullare ordini in caso di pagamento tardivo o incompleto.</p>'},
                    {t:'5. Spedizione e Consegna',c:'<p>5.1. Le condizioni di consegna sono specificate secondo gli Incoterms¬Æ 2020 (es. EXW, FOB, CIF).</p><p>5.2. I tempi di consegna stimati sono indicativi e non vincolanti.</p><p>5.3. Il rischio di perdita o danno passa all\'Acquirente secondo l\'Incoterm concordato.</p><p>5.4. L\'Acquirente √® responsabile di tutti i dazi all\'importazione, sdoganamento e tasse locali.</p>'},
                    {t:'6. Qualit√† e Ispezione',c:'<p>6.1. Tutte le Merci sono fabbricate secondo standard professionali di qualit√†.</p><p>6.2. L\'Acquirente deve ispezionare le Merci alla consegna e notificare eventuali difetti entro 7 giorni lavorativi.</p><p>6.3. La mancata notifica entro tale periodo costituisce accettazione.</p><p>6.4. Variazioni minime di colore, consistenza o misure entro le tolleranze industriali non costituiscono difetto.</p>'},
                    {t:'7. Resi e Reclami',c:'<p>7.1. I resi sono accettati solo per difetti di fabbricazione o articoli errati, previa approvazione scritta.</p><p>7.2. I resi approvati devono essere spediti nella confezione originale entro 14 giorni.</p><p>7.3. PAGUS Menswear pu√≤ sostituire le Merci difettose o emettere una nota di credito.</p><p>7.4. Merci alterate, lavate, indossate o danneggiate non sono idonee al reso.</p>'},
                    {t:'8. Private Label e Personalizzazione',c:'<p>8.1. Servizi di private label e personalizzazione disponibili con accordi separati.</p><p>8.2. Gli ordini personalizzati non sono cancellabili una volta avviata la produzione.</p><p>8.3. L\'Acquirente garantisce che i design forniti non violano diritti di propriet√† intellettuale di terzi.</p>'},
                    {t:'9. Propriet√† Intellettuale',c:'<p>9.1. Tutti i design, le fotografie e i contenuti sono di propriet√† esclusiva di PAGUS Menswear.</p><p>9.2. Le immagini dei prodotti possono essere utilizzate esclusivamente per la rivendita delle Merci acquistate.</p>'},
                    {t:'10. Protezione dei Dati (GDPR)',c:'<p>10.1. PAGUS Menswear raccoglie dati personali esclusivamente per:</p><ul><li>Elaborazione ed evasione degli ordini</li><li>Comunicazioni relative a ordini e richieste</li><li>Assistenza clienti</li><li>Comunicazioni marketing B2B (con consenso o legittimo interesse)</li></ul><p>10.2. Ai sensi del GDPR e del KVKK turco, l\'Acquirente ha diritto di accesso, rettifica, cancellazione, limitazione, portabilit√† e revoca del consenso.</p><p>10.3. I dati non sono condivisi con terzi, salvo necessit√† per l\'evasione dell\'ordine.</p><p>10.4. Contatto: info@pagusmenswear.com</p>'},
                    {t:'11. Cookie',c:'<p>11.1. Il Sito Web utilizza cookie per migliorare l\'esperienza utente e analizzare il traffico.</p><p>11.2. I cookie possono essere gestiti tramite le impostazioni del browser.</p><p>11.3. I cookie essenziali non possono essere disabilitati senza compromettere la funzionalit√†.</p>'},
                    {t:'12. Limitazione di Responsabilit√†',c:'<p>12.1. La responsabilit√† totale non supera il valore dell\'ordine specifico.</p><p>12.2. Nessuna responsabilit√† per danni indiretti, incidentali o consequenziali.</p><p>12.3. Nulla limita la responsabilit√† per frode o dolo.</p>'},
                    {t:'13. Forza Maggiore',c:'<p>13.1. Nessuna responsabilit√† per inadempimenti dovuti a eventi al di fuori del ragionevole controllo, inclusi disastri naturali, pandemie, guerre, embarghi commerciali o interruzioni della catena di approvvigionamento.</p>'},
                    {t:'14. Legge Applicabile',c:'<p>14.1. Regolato dalle leggi della Repubblica di Turchia.</p><p>14.2. Le controversie sono di competenza dei Tribunali di ƒ∞zmir.</p><p>14.3. Gli Acquirenti UE possono far valere i diritti di protezione obbligatori previsti dalle leggi del proprio paese.</p>'},
                    {t:'15. Modifiche',c:'<p>15.1. PAGUS Menswear pu√≤ modificare le presenti Condizioni in qualsiasi momento.</p><p>15.2. L\'uso continuato costituisce accettazione delle Condizioni modificate.</p>'},
                    {t:'16. Contatti',c:'<div class="tc-contact"><strong>PAGUS Menswear</strong><br>ƒ∞zmir, Turchia<br>Email: info@pagusmenswear.com<br>WhatsApp: Disponibile sul Sito Web</div>'}
                ]
            },
            fr:{
                h1:'Conditions G√©n√©rales',
                sub:'Conditions G√©n√©rales de Vente en Gros',
                upd:'Derni√®re mise √† jour : F√©vrier 2026',
                s:[
                    {t:'1. D√©finitions',c:'<ul><li><strong>¬´ Vendeur ¬ª</strong> d√©signe PAGUS Menswear, situ√© √† ƒ∞zmir, Turquie.</li><li><strong>¬´ Acheteur ¬ª</strong> d√©signe toute entit√© commerciale passant une commande en gros.</li><li><strong>¬´ Marchandises ¬ª</strong> d√©signe tous les produits de mode masculine propos√©s √† la vente.</li><li><strong>¬´ Commande ¬ª</strong> d√©signe tout bon de commande soumis par l\'Acheteur.</li><li><strong>¬´ Site Web ¬ª</strong> d√©signe pagusmenswear.com et tous ses sous-domaines.</li></ul>'},
                    {t:'2. Port√©e et Application',c:'<p>2.1. Les pr√©sentes CGV s\'appliquent √† toutes les commandes en gros pass√©es aupr√®s de PAGUS Menswear via le Site Web, email, WhatsApp ou tout autre canal.</p><p>2.2. En passant commande, l\'Acheteur accepte les pr√©sentes CGV. Toute condition contraire ne s\'applique pas sauf accord √©crit expr√®s.</p><p>2.3. Les pr√©sentes CGV sont destin√©es exclusivement aux transactions B2B. PAGUS Menswear ne vend pas directement aux consommateurs.</p>'},
                    {t:'3. Commandes et Quantit√©s Minimales',c:'<p>3.1. La quantit√© minimale de commande (MOQ) est de 50 pi√®ces, sauf accord √©crit contraire.</p><p>3.2. Les commandes peuvent √™tre pass√©es via le formulaire du Site Web, email ou WhatsApp. Une commande n\'est confirm√©e qu\'apr√®s accus√© de r√©ception √©crit de PAGUS Menswear.</p><p>3.3. PAGUS Menswear se r√©serve le droit de refuser toute commande √† sa seule discr√©tion.</p><p>3.4. La disponibilit√© est soumise aux niveaux de stock. Les couleurs et compositions peuvent varier l√©g√®rement entre les lots.</p>'},
                    {t:'4. Prix et Paiement',c:'<p>4.1. Tous les prix sont indiqu√©s en Euros (EUR) ou Dollars US (USD), hors frais de port, assurance, droits de douane et taxes.</p><p>4.2. Les prix sont valables 30 jours √† compter du devis.</p><p>4.3. Conditions standard de paiement :</p><ul><li>50% d\'acompte √† la confirmation</li><li>50% de solde avant exp√©dition</li></ul><p>4.4. Paiement par virement bancaire (SWIFT/IBAN). Tous les frais bancaires sont √† la charge de l\'Acheteur.</p><p>4.5. PAGUS Menswear se r√©serve le droit de suspendre ou annuler les commandes en cas de retard ou d√©faut de paiement.</p>'},
                    {t:'5. Exp√©dition et Livraison',c:'<p>5.1. Les conditions de livraison sont sp√©cifi√©es selon les Incoterms¬Æ 2020 (ex. EXW, FOB, CIF).</p><p>5.2. Les d√©lais de livraison sont indicatifs et non contraignants.</p><p>5.3. Le risque de perte passe √† l\'Acheteur selon l\'Incoterm convenu.</p><p>5.4. L\'Acheteur est responsable de tous les droits d\'importation, d√©douanement et taxes locales.</p>'},
                    {t:'6. Qualit√© et Inspection',c:'<p>6.1. Toutes les Marchandises sont fabriqu√©es selon des normes de qualit√© professionnelles.</p><p>6.2. L\'Acheteur doit inspecter les Marchandises √† la livraison et signaler tout d√©faut dans les 7 jours ouvrables.</p><p>6.3. L\'absence de notification constitue une acceptation.</p><p>6.4. Les variations mineures de couleur, texture ou mesures dans les tol√©rances industrielles ne constituent pas un d√©faut.</p>'},
                    {t:'7. Retours et R√©clamations',c:'<p>7.1. Les retours sont accept√©s uniquement pour d√©fauts de fabrication ou articles incorrects, avec approbation √©crite pr√©alable.</p><p>7.2. Les retours approuv√©s doivent √™tre exp√©di√©s dans l\'emballage d\'origine sous 14 jours.</p><p>7.3. PAGUS Menswear peut remplacer les Marchandises d√©fectueuses ou √©mettre un avoir.</p><p>7.4. Les Marchandises modifi√©es, lav√©es, port√©es ou endommag√©es ne sont pas √©ligibles au retour.</p>'},
                    {t:'8. Marque Priv√©e et Personnalisation',c:'<p>8.1. Services de marque priv√©e et personnalisation disponibles sous accords s√©par√©s.</p><p>8.2. Les commandes personnalis√©es ne sont ni annulables ni remboursables une fois la production lanc√©e.</p><p>8.3. L\'Acheteur garantit que les designs fournis ne portent pas atteinte aux droits de propri√©t√© intellectuelle de tiers.</p>'},
                    {t:'9. Propri√©t√© Intellectuelle',c:'<p>9.1. Tous les designs, photographies et contenus sont la propri√©t√© exclusive de PAGUS Menswear.</p><p>9.2. Les images produits peuvent √™tre utilis√©es uniquement pour la revente des Marchandises achet√©es.</p>'},
                    {t:'10. Protection des Donn√©es (RGPD)',c:'<p>10.1. PAGUS Menswear collecte des donn√©es personnelles uniquement pour :</p><ul><li>Le traitement et l\'ex√©cution des commandes</li><li>Les communications relatives aux commandes</li><li>Le service client</li><li>Les communications marketing B2B (avec consentement ou int√©r√™t l√©gitime)</li></ul><p>10.2. Conform√©ment au RGPD et au KVKK turc, l\'Acheteur dispose des droits d\'acc√®s, rectification, effacement, limitation, portabilit√© et retrait du consentement.</p><p>10.3. Les donn√©es ne sont pas partag√©es avec des tiers sauf n√©cessit√© pour l\'ex√©cution de la commande.</p><p>10.4. Contact : info@pagusmenswear.com</p>'},
                    {t:'11. Cookies',c:'<p>11.1. Le Site Web utilise des cookies pour am√©liorer l\'exp√©rience utilisateur et analyser le trafic.</p><p>11.2. Les cookies peuvent √™tre g√©r√©s via les param√®tres du navigateur.</p><p>11.3. Les cookies essentiels ne peuvent pas √™tre d√©sactiv√©s sans impact sur la fonctionnalit√©.</p>'},
                    {t:'12. Limitation de Responsabilit√©',c:'<p>12.1. La responsabilit√© totale ne d√©passe pas la valeur de la commande sp√©cifique.</p><p>12.2. Aucune responsabilit√© pour dommages indirects, accessoires ou cons√©cutifs.</p><p>12.3. Rien ne limite la responsabilit√© pour fraude ou faute intentionnelle.</p>'},
                    {t:'13. Force Majeure',c:'<p>13.1. Aucune responsabilit√© en cas d\'inex√©cution due √† des √©v√©nements hors contr√¥le raisonnable, y compris catastrophes naturelles, pand√©mies, guerres, embargos ou perturbations de la cha√Æne d\'approvisionnement.</p>'},
                    {t:'14. Droit Applicable',c:'<p>14.1. R√©gi par les lois de la R√©publique de Turquie.</p><p>14.2. Les litiges sont soumis √† la comp√©tence exclusive des Tribunaux d\'ƒ∞zmir.</p><p>14.3. Les Acheteurs de l\'UE peuvent faire valoir les droits de protection obligatoires de leur pays de r√©sidence.</p>'},
                    {t:'15. Modifications',c:'<p>15.1. PAGUS Menswear peut modifier les pr√©sentes CGV √† tout moment.</p><p>15.2. L\'utilisation continue constitue une acceptation des CGV modifi√©es.</p>'},
                    {t:'16. Contact',c:'<div class="tc-contact"><strong>PAGUS Menswear</strong><br>ƒ∞zmir, Turquie<br>Email : info@pagusmenswear.com<br>WhatsApp : Disponible sur le Site Web</div>'}
                ]
            },
            de:{
                h1:'Allgemeine Gesch√§ftsbedingungen',
                sub:'Allgemeine Gesch√§ftsbedingungen f√ºr den Gro√ühandelsverkauf',
                upd:'Letzte Aktualisierung: Februar 2026',
                s:[
                    {t:'1. Definitionen',c:'<ul><li><strong>‚ÄûVerk√§ufer"</strong> bezieht sich auf PAGUS Menswear mit Sitz in ƒ∞zmir, T√ºrkei.</li><li><strong>‚ÄûK√§ufer"</strong> bezieht sich auf jede Gesch√§ftseinheit, die eine Gro√ühandelsbestellung aufgibt.</li><li><strong>‚ÄûWaren"</strong> bezieht sich auf alle zum Verkauf angebotenen Herrenbekleidungsprodukte.</li><li><strong>‚ÄûBestellung"</strong> bezieht sich auf jeden vom K√§ufer eingereichten Kaufauftrag.</li><li><strong>‚ÄûWebsite"</strong> bezieht sich auf pagusmenswear.com und alle Subdomains.</li></ul>'},
                    {t:'2. Geltungsbereich',c:'<p>2.1. Diese AGB gelten f√ºr alle Gro√ühandelsbestellungen bei PAGUS Menswear √ºber die Website, E-Mail, WhatsApp oder jeden anderen Kanal.</p><p>2.2. Mit der Bestellung akzeptiert der K√§ufer diese AGB. Abweichende Bedingungen des K√§ufers gelten nicht, sofern nicht ausdr√ºcklich schriftlich vereinbart.</p><p>2.3. Diese AGB gelten ausschlie√ülich f√ºr B2B-Transaktionen. PAGUS Menswear verkauft nicht direkt an Verbraucher.</p>'},
                    {t:'3. Bestellungen und Mindestmengen',c:'<p>3.1. Die Mindestbestellmenge (MOQ) betr√§gt 50 St√ºck pro Bestellung, sofern nicht schriftlich anders vereinbart.</p><p>3.2. Bestellungen k√∂nnen √ºber das Anfrageformular, E-Mail oder WhatsApp aufgegeben werden. Eine Bestellung gilt erst nach schriftlicher Best√§tigung durch PAGUS Menswear als best√§tigt.</p><p>3.3. PAGUS Menswear beh√§lt sich das Recht vor, Bestellungen nach eigenem Ermessen abzulehnen.</p><p>3.4. Die Produktverf√ºgbarkeit unterliegt den Lagerbest√§nden. Farben und Stoffzusammensetzungen k√∂nnen zwischen Produktionschargen leicht variieren.</p>'},
                    {t:'4. Preise und Zahlung',c:'<p>4.1. Alle Preise verstehen sich in Euro (EUR) oder US-Dollar (USD), zuz√ºglich Versand, Versicherung, Z√∂lle und Steuern.</p><p>4.2. Preise gelten 30 Tage ab Angebotsdatum.</p><p>4.3. Standard-Zahlungsbedingungen:</p><ul><li>50% Anzahlung bei Auftragsbest√§tigung</li><li>50% Restbetrag vor Versand</li></ul><p>4.4. Zahlung per Bank√ºberweisung (SWIFT/IBAN). Alle Bankgeb√ºhren tr√§gt der K√§ufer.</p><p>4.5. PAGUS Menswear beh√§lt sich das Recht vor, Bestellungen bei versp√§teter oder unvollst√§ndiger Zahlung auszusetzen oder zu stornieren.</p>'},
                    {t:'5. Versand und Lieferung',c:'<p>5.1. Lieferbedingungen werden gem√§√ü Incoterms¬Æ 2020 spezifiziert (z.B. EXW, FOB, CIF).</p><p>5.2. Gesch√§tzte Lieferzeiten sind unverbindlich.</p><p>5.3. Das Verlustrisiko geht gem√§√ü vereinbartem Incoterm auf den K√§ufer √ºber.</p><p>5.4. Der K√§ufer ist f√ºr alle Einfuhrz√∂lle, Zollabfertigung und lokale Steuern verantwortlich.</p>'},
                    {t:'6. Qualit√§t und Pr√ºfung',c:'<p>6.1. Alle Waren werden nach professionellen Qualit√§tsstandards hergestellt.</p><p>6.2. Der K√§ufer muss die Waren bei Lieferung pr√ºfen und M√§ngel innerhalb von 7 Werktagen melden.</p><p>6.3. Unterlassene Meldung gilt als Annahme.</p><p>6.4. Geringf√ºgige Abweichungen bei Farbe, Textur oder Ma√üen innerhalb branchen√ºblicher Toleranzen gelten nicht als Mangel.</p>'},
                    {t:'7. Retouren und Reklamationen',c:'<p>7.1. Retouren nur bei Herstellungsfehlern oder falschen Artikeln nach vorheriger schriftlicher Genehmigung.</p><p>7.2. Genehmigte Retouren m√ºssen in Originalverpackung innerhalb von 14 Tagen zur√ºckgesandt werden.</p><p>7.3. PAGUS Menswear kann mangelhafte Waren ersetzen oder eine Gutschrift ausstellen.</p><p>7.4. Ver√§nderte, gewaschene, getragene oder besch√§digte Waren sind nicht retournierbar.</p>'},
                    {t:'8. Private Label und Individualisierung',c:'<p>8.1. Private-Label- und individuelle Branding-Services sind unter separaten Vereinbarungen verf√ºgbar.</p><p>8.2. Individuelle Bestellungen sind nach Produktionsbeginn nicht stornierbar.</p><p>8.3. Der K√§ufer garantiert, dass bereitgestellte Designs keine IP-Rechte Dritter verletzen.</p>'},
                    {t:'9. Geistiges Eigentum',c:'<p>9.1. Alle Designs, Fotografien und Inhalte sind ausschlie√üliches Eigentum von PAGUS Menswear.</p><p>9.2. Produktbilder d√ºrfen ausschlie√ülich zum Weiterverkauf der gekauften Waren verwendet werden.</p>'},
                    {t:'10. Datenschutz (DSGVO)',c:'<p>10.1. PAGUS Menswear erhebt personenbezogene Daten ausschlie√ülich f√ºr:</p><ul><li>Bestellabwicklung und -erf√ºllung</li><li>Kommunikation bez√ºglich Bestellungen und Anfragen</li><li>Kundenservice</li><li>B2B-Marketingkommunikation (mit Einwilligung oder berechtigtem Interesse)</li></ul><p>10.2. Gem√§√ü DSGVO und t√ºrkischem KVKK hat der K√§ufer das Recht auf Auskunft, Berichtigung, L√∂schung, Einschr√§nkung, Datenportabilit√§t und Widerruf der Einwilligung.</p><p>10.3. Daten werden nicht an Dritte weitergegeben, au√üer zur Auftragsabwicklung.</p><p>10.4. Kontakt: info@pagusmenswear.com</p>'},
                    {t:'11. Cookies',c:'<p>11.1. Die Website verwendet Cookies zur Verbesserung der Benutzererfahrung und Analyse des Datenverkehrs.</p><p>11.2. Cookies k√∂nnen √ºber Browsereinstellungen verwaltet werden.</p><p>11.3. Essentielle Cookies k√∂nnen nicht ohne Funktionseinschr√§nkung deaktiviert werden.</p>'},
                    {t:'12. Haftungsbeschr√§nkung',c:'<p>12.1. Die Gesamthaftung √ºbersteigt nicht den Wert der jeweiligen Bestellung.</p><p>12.2. Keine Haftung f√ºr indirekte, beil√§ufige oder Folgesch√§den.</p><p>12.3. Nichts beschr√§nkt die Haftung bei Betrug oder vors√§tzlichem Fehlverhalten.</p>'},
                    {t:'13. H√∂here Gewalt',c:'<p>13.1. Keine Haftung bei Nichterf√ºllung aufgrund von Ereignissen au√üerhalb zumutbarer Kontrolle, einschlie√ülich Naturkatastrophen, Pandemien, Krieg, Handelsembargos oder Lieferkettenunterbrechungen.</p>'},
                    {t:'14. Anwendbares Recht',c:'<p>14.1. Es gilt das Recht der Republik T√ºrkei.</p><p>14.2. Streitigkeiten unterliegen der ausschlie√ülichen Zust√§ndigkeit der Gerichte in ƒ∞zmir.</p><p>14.3. EU-K√§ufer k√∂nnen zwingende Schutzrechte ihres Wohnsitzlandes geltend machen.</p>'},
                    {t:'15. √Ñnderungen',c:'<p>15.1. PAGUS Menswear kann diese AGB jederzeit √§ndern.</p><p>15.2. Die fortgesetzte Nutzung gilt als Akzeptanz der ge√§nderten AGB.</p>'},
                    {t:'16. Kontakt',c:'<div class="tc-contact"><strong>PAGUS Menswear</strong><br>ƒ∞zmir, T√ºrkei<br>E-Mail: info@pagusmenswear.com<br>WhatsApp: Auf der Website verf√ºgbar</div>'}
                ]
            },
            es:{
                h1:'T√©rminos y Condiciones',
                sub:'Condiciones Generales de Venta al por Mayor',
                upd:'√öltima actualizaci√≥n: Febrero 2026',
                s:[
                    {t:'1. Definiciones',c:'<ul><li><strong>"Vendedor"</strong> se refiere a PAGUS Menswear, ubicado en ƒ∞zmir, Turqu√≠a.</li><li><strong>"Comprador"</strong> se refiere a cualquier entidad comercial que realice un pedido mayorista.</li><li><strong>"Mercanc√≠as"</strong> se refiere a todos los productos de moda masculina ofrecidos.</li><li><strong>"Pedido"</strong> se refiere a cualquier orden de compra enviada por el Comprador.</li><li><strong>"Sitio Web"</strong> se refiere a pagusmenswear.com y todos sus subdominios.</li></ul>'},
                    {t:'2. Alcance y Aplicaci√≥n',c:'<p>2.1. Estos T&C se aplican a todos los pedidos mayoristas realizados con PAGUS Menswear a trav√©s del Sitio Web, email, WhatsApp o cualquier otro canal.</p><p>2.2. Al realizar un pedido, el Comprador acepta estos T&C. Las condiciones contradictorias del Comprador no se aplican salvo acuerdo escrito expreso.</p><p>2.3. Estos T&C est√°n destinados exclusivamente a transacciones B2B. PAGUS Menswear no vende directamente a consumidores.</p>'},
                    {t:'3. Pedidos y Cantidades M√≠nimas',c:'<p>3.1. La cantidad m√≠nima de pedido (MOQ) es de 50 piezas, salvo acuerdo escrito diferente.</p><p>3.2. Los pedidos pueden realizarse mediante el formulario del Sitio Web, email o WhatsApp. Un pedido se confirma solo tras acuse de recibo escrito de PAGUS Menswear.</p><p>3.3. PAGUS Menswear se reserva el derecho de rechazar cualquier pedido a su entera discreci√≥n.</p><p>3.4. La disponibilidad est√° sujeta a niveles de stock. Colores y composiciones pueden variar ligeramente entre lotes.</p>'},
                    {t:'4. Precios y Pago',c:'<p>4.1. Todos los precios se indican en Euros (EUR) o D√≥lares US (USD), sin incluir env√≠o, seguro, aranceles e impuestos.</p><p>4.2. Los precios son v√°lidos durante 30 d√≠as desde la cotizaci√≥n.</p><p>4.3. Condiciones est√°ndar de pago:</p><ul><li>50% de anticipo a la confirmaci√≥n del pedido</li><li>50% de saldo antes del env√≠o</li></ul><p>4.4. Pago por transferencia bancaria (SWIFT/IBAN). Todos los cargos bancarios corren por cuenta del Comprador.</p><p>4.5. PAGUS Menswear se reserva el derecho de suspender o cancelar pedidos por pago tard√≠o o incompleto.</p>'},
                    {t:'5. Env√≠o y Entrega',c:'<p>5.1. Las condiciones de entrega se especifican seg√∫n Incoterms¬Æ 2020 (ej. EXW, FOB, CIF).</p><p>5.2. Los plazos de entrega son orientativos y no vinculantes.</p><p>5.3. El riesgo de p√©rdida pasa al Comprador seg√∫n el Incoterm acordado.</p><p>5.4. El Comprador es responsable de todos los aranceles de importaci√≥n, despacho de aduanas e impuestos locales.</p>'},
                    {t:'6. Calidad e Inspecci√≥n',c:'<p>6.1. Todas las Mercanc√≠as se fabrican seg√∫n est√°ndares profesionales de calidad.</p><p>6.2. El Comprador debe inspeccionar las Mercanc√≠as a la entrega y notificar defectos en un plazo de 7 d√≠as h√°biles.</p><p>6.3. La falta de notificaci√≥n constituye aceptaci√≥n.</p><p>6.4. Variaciones menores de color, textura o medidas dentro de tolerancias industriales no constituyen defecto.</p>'},
                    {t:'7. Devoluciones y Reclamaciones',c:'<p>7.1. Las devoluciones se aceptan solo por defectos de fabricaci√≥n o art√≠culos incorrectos, con aprobaci√≥n escrita previa.</p><p>7.2. Las devoluciones aprobadas deben enviarse en embalaje original en un plazo de 14 d√≠as.</p><p>7.3. PAGUS Menswear puede reemplazar las Mercanc√≠as defectuosas o emitir una nota de cr√©dito.</p><p>7.4. Las Mercanc√≠as alteradas, lavadas, usadas o da√±adas no son elegibles para devoluci√≥n.</p>'},
                    {t:'8. Marca Blanca y Personalizaci√≥n',c:'<p>8.1. Servicios de marca blanca y personalizaci√≥n disponibles bajo acuerdos separados.</p><p>8.2. Los pedidos personalizados no son cancelables una vez iniciada la producci√≥n.</p><p>8.3. El Comprador garantiza que los dise√±os proporcionados no infringen derechos de propiedad intelectual de terceros.</p>'},
                    {t:'9. Propiedad Intelectual',c:'<p>9.1. Todos los dise√±os, fotograf√≠as y contenidos son propiedad exclusiva de PAGUS Menswear.</p><p>9.2. Las im√°genes de productos pueden utilizarse √∫nicamente para la reventa de las Mercanc√≠as adquiridas.</p>'},
                    {t:'10. Protecci√≥n de Datos (RGPD)',c:'<p>10.1. PAGUS Menswear recopila datos personales √∫nicamente para:</p><ul><li>Procesamiento y cumplimiento de pedidos</li><li>Comunicaciones sobre pedidos y consultas</li><li>Atenci√≥n al cliente</li><li>Comunicaciones de marketing B2B (con consentimiento o inter√©s leg√≠timo)</li></ul><p>10.2. Seg√∫n el RGPD y la KVKK turca, el Comprador tiene derecho de acceso, rectificaci√≥n, supresi√≥n, limitaci√≥n, portabilidad y retirada del consentimiento.</p><p>10.3. Los datos no se comparten con terceros excepto para el cumplimiento del pedido.</p><p>10.4. Contacto: info@pagusmenswear.com</p>'},
                    {t:'11. Cookies',c:'<p>11.1. El Sitio Web utiliza cookies para mejorar la experiencia del usuario y analizar el tr√°fico.</p><p>11.2. Las cookies se pueden gestionar a trav√©s de la configuraci√≥n del navegador.</p><p>11.3. Las cookies esenciales no se pueden desactivar sin afectar la funcionalidad.</p>'},
                    {t:'12. Limitaci√≥n de Responsabilidad',c:'<p>12.1. La responsabilidad total no excede el valor del pedido espec√≠fico.</p><p>12.2. Sin responsabilidad por da√±os indirectos, incidentales o consecuentes.</p><p>12.3. Nada limita la responsabilidad por fraude o conducta dolosa.</p>'},
                    {t:'13. Fuerza Mayor',c:'<p>13.1. Sin responsabilidad por incumplimiento debido a eventos fuera del control razonable, incluyendo desastres naturales, pandemias, guerras, embargos comerciales o interrupciones en la cadena de suministro.</p>'},
                    {t:'14. Ley Aplicable',c:'<p>14.1. Regido por las leyes de la Rep√∫blica de Turqu√≠a.</p><p>14.2. Los litigios se someten a la jurisdicci√≥n exclusiva de los Tribunales de ƒ∞zmir.</p><p>14.3. Los Compradores de la UE pueden hacer valer los derechos de protecci√≥n obligatorios de su pa√≠s de residencia.</p>'},
                    {t:'15. Modificaciones',c:'<p>15.1. PAGUS Menswear puede modificar estos T&C en cualquier momento.</p><p>15.2. El uso continuado constituye aceptaci√≥n de los T&C modificados.</p>'},
                    {t:'16. Contacto',c:'<div class="tc-contact"><strong>PAGUS Menswear</strong><br>ƒ∞zmir, Turqu√≠a<br>Email: info@pagusmenswear.com<br>WhatsApp: Disponible en el Sitio Web</div>'}
                ]
            }
        };

        // ===================== APPLY LANGUAGE =====================
        function applyLanguage(){
            // Text content
            document.querySelectorAll('[data-t]').forEach(function(el){
                var key=el.getAttribute('data-t');
                if(I18N[key]&&I18N[key][LANG]){
                    if(key==='cookie_text'||key==='ft_why_text') el.innerHTML=I18N[key][LANG];
                    else el.textContent=I18N[key][LANG];
                }
            });
            // Placeholders
            document.querySelectorAll('[data-tp]').forEach(function(el){
                var key=el.getAttribute('data-tp');
                if(I18N[key]&&I18N[key][LANG]) el.placeholder=I18N[key][LANG];
            });
            // Flag active state
            SUPPORTED_LANGS.forEach(function(l){
                var b=document.getElementById('langBtn_'+l);
                if(b) b.classList.toggle('active',l===LANG);
            });
            // Render T&C
            renderTC();
        }

        function renderTC(){
            var d=TC[LANG]||TC['en'];
            var h='<h1>'+d.h1+'</h1><div class="tc-subtitle">'+d.sub+'</div><div class="tc-updated">'+d.upd+'</div>';
            d.s.forEach(function(sec){ h+='<h2>'+sec.t+'</h2>'+sec.c; });
            h+='<p style="margin-top:20px;color:#999;font-size:0.8rem;font-style:italic;">'+d.upd+'</p>';
            var el=document.getElementById('tcContent');
            if(el) el.innerHTML=h;
        }

        function setLang(lang){
            LANG=lang;
            localStorage.setItem('pagusLang',lang);
            applyLanguage();
        }

        function openTerms(){
            document.getElementById('tcOverlay').classList.add('visible');
            document.body.style.overflow='hidden';
        }
        function closeTerms(){
            document.getElementById('tcOverlay').classList.remove('visible');
            document.body.style.overflow='';
        }
        document.addEventListener('keydown',function(e){
            if(e.key==='Escape'&&document.getElementById('tcOverlay').classList.contains('visible')) closeTerms();
        });
        var urlParams=new URLSearchParams(window.location.search);
        var curCat=urlParams.get('category')||"Wedding Suits";
        var curSub=urlParams.get('subcategory');

        var cart=[];
        var lsAvailable=true;
        try{localStorage.setItem('_test','1');localStorage.removeItem('_test');cart=JSON.parse(localStorage.getItem('pagusCart'))||[];}catch(e){lsAvailable=false;cart=[];}

        // FIX #14: Footer year without document.write
        document.getElementById('footerYear').textContent=new Date().getFullYear();

        // ===================== UTILITY FUNCTIONS =====================

        function escapeHTML(s){
            if(!s)return '';
            return String(s).replace(/[&<>'"]/g,function(t){
                return{'&':'&amp;','<':'&lt;','>':'&gt;',"'":'&#39;','"':'&quot;'}[t];
            });
        }

        // FIX #6: Removed dead escapeJS function (was defined but never called)

        function escapeAttr(s){
            if(!s)return '';
            return String(s).replace(/[&<>"'`=\/]/g,function(t){
                return'&#'+t.charCodeAt(0)+';';
            });
        }

        // FIX #5: Strict focal-y sanitizer ‚Äî only allows integer 0-100, prevents XSS via inline style
        function safeFocalY(val){
            var n=parseInt(val,10);
            if(isNaN(n)||n<0||n>100) return 20;
            return n;
        }

        // FIX #11: Styled toast notification instead of native alert()
        function showToast(msg,duration){
            duration=duration||3000;
            var t=document.getElementById('toastNotification');
            t.textContent=msg;
            t.classList.add('visible');
            clearTimeout(window._toastTimer);
            window._toastTimer=setTimeout(function(){t.classList.remove('visible');},duration);
        }

        function setLanguage(){
            applyLanguage();
        }

        // ===================== PRODUCT DATA INIT =====================

        if(typeof productsDB==='undefined'){
            document.getElementById('pGrid').innerHTML="<div style='text-align:center;width:100%;padding:50px;color:red;'>Error: inventory.js not found.</div>";
        }else{
            productsDB.forEach(function(p){
                if(p.category&&p.category.includes(' > ')){
                    var a=p.category.split(' > ');
                    p.mainCat=a[0].trim();
                    p.subCat=a[1].trim();
                }else{
                    p.mainCat=p.category;
                    p.subCat="General";
                }
                p.code=p.id;
                p.realCode=p.id;
                p.folderPath=p.path;
                p.focalY=p.focal_y||20;
            });
            setLanguage();
            init();
            updateCartUI();
        }

        // ===================== SHOWCASE =====================
        // FIX #13: tabindex + keyboard Enter/Space for accessibility

        function renderShowcase(){
            var grid=document.getElementById('showcaseGrid');
            if(!grid)return;
            if(typeof productsDB==='undefined'||!productsDB||productsDB.length===0){grid.innerHTML='';return;}

            var catProducts={};
            for(var i=0;i<productsDB.length;i++){
                var p=productsDB[i];
                var mainCat=p.category.indexOf(' > ')>-1?p.category.split(' > ')[0]:p.category;
                if(!catProducts[mainCat])catProducts[mainCat]=[];
                catProducts[mainCat].push(p);
            }

            var items=[];
            var cats=Object.keys(catProducts);
            for(var c=0;c<cats.length&&items.length<4;c++){
                var catName=cats[c];
                var prods=catProducts[catName];
                for(var j=0;j<prods.length&&items.length<4;j++){
                    if(items.length<4){items.push({cat:catName,path:prods[j].path});}
                    if(cats.length<4&&items.length<4&&j<prods.length-1){items.push({cat:catName,path:prods[j+1].path});break;}
                }
            }

            var html='';
            for(var k=0;k<items.length;k++){
                var it=items[k];
                // FIX #13: Added tabindex="0", role="link", and onkeydown for keyboard nav
                html+='<div class="showcase-item" tabindex="0" role="link" data-cat="'+escapeAttr(it.cat)+'"'
                    +' onclick="window.location.href=\'?category=\'+encodeURIComponent(this.dataset.cat)"'
                    +' onkeydown="if(event.key===\'Enter\'||event.key===\' \'){event.preventDefault();window.location.href=\'?category=\'+encodeURIComponent(this.dataset.cat);}">';
                html+='<img src="'+escapeAttr(it.path)+'/1.webp" alt="'+escapeAttr(it.cat)+'" onerror="this.parentElement.style.display=\'none\'">';
                html+='<div class="showcase-overlay"><span>'+escapeHTML(CAT_DISPLAY_NAMES[it.cat]||it.cat).toUpperCase()+'</span></div></div>';
            }
            grid.innerHTML=html;
        }

        // ===================== MAIN INIT =====================
        // FIX #2: Null-safe element access throughout

        function init(){
            var waUrl='https://wa.me/'+WHATSAPP_NUMBER;
            var wl=document.getElementById('waLink');
            if(wl)wl.href=waUrl;
            var pl=document.getElementById('plWaLink');
            if(pl)pl.href=waUrl;
            var fw=document.getElementById('footerWa');
            if(fw)fw.textContent='+'+WHATSAPP_NUMBER;

            var hero=document.getElementById('heroSection');
            var showcase=document.getElementById('showcaseSection');
            var carousel=document.getElementById('carouselSection');
            var pta=document.getElementById('pageTitleArea');
            var sr=document.getElementById('searchResults');
            var floatCartBtn=document.getElementById('floatCart');
            var privLabel=document.getElementById('privateLabelSection');
            var searchBox=document.querySelector('.search-area');

            // FIX #2: Every element access guarded with null check
            if(!FEATURES.hero&&hero)hero.style.display='none';
            if(!FEATURES.showcase&&showcase)showcase.style.display='none';
            if(!FEATURES.carousel&&carousel)carousel.style.display='none';
            if(!FEATURES.whatsappFloat&&floatCartBtn)floatCartBtn.style.display='none';
            if(!FEATURES.privateLabel&&privLabel)privLabel.style.display='none';
            if(!FEATURES.search&&searchBox)searchBox.style.display='none';
            if(!FEATURES.favorites){
                document.querySelectorAll('.heart-btn').forEach(function(b){b.style.display='none';});
                document.querySelectorAll('.fab').forEach(function(b){b.style.display='none';});
            }

            if(urlParams.get('search')){
                if(hero)hero.style.display='none';
                if(showcase)showcase.style.display='none';
                if(carousel)carousel.style.display='none';
                if(pta)pta.style.display='none';
                if(sr)sr.style.display='block';
                document.getElementById('pGrid').style.display='none';
                doSearchDisplay(urlParams.get('search'));
            }else if(urlParams.get('category')||urlParams.get('subcategory')){
                if(hero)hero.style.display='none';
                if(showcase)showcase.style.display='none';
                if(carousel)carousel.style.display='none';
                if(sr)sr.style.display='none';
                if(pta)pta.style.display='block';
                if(curSub) showProducts(); else showSubs();
            }else{
                if(FEATURES.hero&&hero)hero.style.display='block';
                if(FEATURES.showcase&&showcase){showcase.style.display='block';renderShowcase();}
                // FIX #1: Carousel init with proper HTML
                if(FEATURES.carousel&&carousel){carousel.style.display='block';startCarousel();}
                if(pta)pta.style.display='none';
                if(sr)sr.style.display='none';
                document.getElementById('pGrid').style.display='none';
            }
        }

        // ===================== SEARCH =====================
        // FIX #11: Toast instead of alert, with i18n
        // FIX #5: safeFocalY in search results

        // ===================== SEARCH =====================

        function toggleSearchBar(){
            var exp=document.getElementById('searchExpand');
            exp.classList.toggle('open');
            if(exp.classList.contains('open')){
                setTimeout(function(){ document.getElementById('siteSearch').focus(); },350);
            }
        }
        document.addEventListener('click',function(e){
            var area=document.querySelector('.search-area');
            if(area&&!area.contains(e.target)){
                document.getElementById('searchExpand').classList.remove('open');
            }
        });

        function doSiteSearch(){
            var q=document.getElementById('siteSearch').value.trim();
            if(q.length<2){
                showToast(t('search_min'));
                return;
            }
            window.location.href='?search='+encodeURIComponent(q);
        }

        function openSearchResult(resultIdx){
            if(!window._searchResults||!window._searchResults[resultIdx])return;
            var r=window._searchResults[resultIdx];
            openModal(r.id,r.id,r.path);
        }

        // --- Advanced Search ---
        function buildAdvancedSearchUI(){
            if(typeof productsDB==='undefined')return;
            var cats={}, subs={};
            productsDB.forEach(function(p){
                var mc=p.mainCat||(p.category.indexOf(' > ')>-1?p.category.split(' > ')[0]:p.category);
                if(!cats[mc])cats[mc]=0; cats[mc]++;
                var sc=p.subCat||(p.category.indexOf(' > ')>-1?p.category.split(' > ')[1]:'General');
                if(sc&&sc!=='General'){ if(!subs[sc])subs[sc]={count:0,parent:mc}; subs[sc].count++; }
            });
            var html='';
            Object.keys(cats).forEach(function(cat,i){
                html+='<div class="adv-check"><input type="checkbox" id="advCat'+i+'" value="'+escapeAttr(cat)+'" onchange="onAdvCatChange()">'
                    +'<label for="advCat'+i+'">'+escapeHTML(cat)+' <span style="opacity:0.5;font-size:0.7rem">('+cats[cat]+')</span></label></div>';
            });
            document.getElementById('advCategoryChecks').innerHTML=html;
            var subKeys=Object.keys(subs);
            if(subKeys.length>0){
                var shtml='';
                subKeys.forEach(function(sub,i){
                    shtml+='<div class="adv-check" data-parent="'+escapeAttr(subs[sub].parent)+'"><input type="checkbox" id="advSub'+i+'" value="'+escapeAttr(sub)+'">'
                        +'<label for="advSub'+i+'">'+escapeHTML(sub)+' <span style="opacity:0.5;font-size:0.7rem">('+subs[sub].count+')</span></label></div>';
                });
                document.getElementById('advSubChecks').innerHTML=shtml;
                document.getElementById('advSubSection').style.display='block';
            }else{ document.getElementById('advSubSection').style.display='none'; }
        }
        function onAdvCatChange(){
            var selectedCats=[];
            document.querySelectorAll('#advCategoryChecks input:checked').forEach(function(cb){ selectedCats.push(cb.value); });
            document.querySelectorAll('#advSubChecks .adv-check').forEach(function(el){
                var parent=el.getAttribute('data-parent');
                if(selectedCats.length===0||selectedCats.indexOf(parent)>-1){ el.style.display=''; }
                else{ el.style.display='none'; el.querySelector('input').checked=false; }
            });
        }
        function openAdvancedSearch(){
            buildAdvancedSearchUI();
            document.getElementById('advPanelOverlay').classList.add('visible');
            document.body.style.overflow='hidden';
            setTimeout(function(){ var kw=document.getElementById('advKeyword'); if(kw)kw.focus(); },300);
        }
        function closeAdvancedSearch(){
            document.getElementById('advPanelOverlay').classList.remove('visible');
            document.body.style.overflow='';
        }
        function clearAdvancedSearch(){
            document.getElementById('advKeyword').value='';
            document.querySelectorAll('#advCategoryChecks input, #advSubChecks input').forEach(function(cb){cb.checked=false;});
            onAdvCatChange();
        }
        function runAdvancedSearch(){
            var keyword=(document.getElementById('advKeyword').value||'').trim().toLowerCase();
            var selectedCats=[];
            document.querySelectorAll('#advCategoryChecks input:checked').forEach(function(cb){ selectedCats.push(cb.value.toLowerCase()); });
            var selectedSubs=[];
            document.querySelectorAll('#advSubChecks input:checked').forEach(function(cb){ selectedSubs.push(cb.value.toLowerCase()); });
            closeAdvancedSearch();
            var params=[];
            if(keyword) params.push('search='+encodeURIComponent(keyword));
            if(selectedCats.length) params.push('adv_cats='+encodeURIComponent(selectedCats.join('|')));
            if(selectedSubs.length) params.push('adv_subs='+encodeURIComponent(selectedSubs.join('|')));
            if(params.length===0){ showToast(t('search_min')); return; }
            window.location.href='?'+params.join('&');
        }
        document.addEventListener('keydown',function(e){
            if(e.key==='Escape'&&document.getElementById('advPanelOverlay').classList.contains('visible')) closeAdvancedSearch();
        });

        function doSearchDisplay(q){
            var urlP=new URLSearchParams(window.location.search);
            var advCats=(urlP.get('adv_cats')||'').toLowerCase().split('|').filter(Boolean);
            var advSubs=(urlP.get('adv_subs')||'').toLowerCase().split('|').filter(Boolean);
            var qLower=(q||'').toLowerCase();
            var isAdvanced=advCats.length>0||advSubs.length>0;
            var results=[];
            for(var i=0;i<productsDB.length;i++){
                var p=productsDB[i];
                var pMainCat=(p.mainCat||(p.category.indexOf(' > ')>-1?p.category.split(' > ')[0]:p.category)).toLowerCase();
                var pSubCat=(p.subCat||(p.category.indexOf(' > ')>-1?p.category.split(' > ')[1]:'General')).toLowerCase();
                var matchKw=!qLower||p.id.toLowerCase().indexOf(qLower)>-1||p.category.toLowerCase().indexOf(qLower)>-1;
                var matchCat=true;
                if(advSubs.length>0){ matchCat=advSubs.indexOf(pSubCat)>-1; }
                else if(advCats.length>0){ matchCat=advCats.indexOf(pMainCat)>-1; }
                if(matchKw&&matchCat) results.push(p);
            }
            var groups={}, groupOrder=[];
            for(var j=0;j<results.length;j++){
                var r=results[j];
                var groupName=r.subCat||r.mainCat||r.category;
                if(!groups[groupName]){groups[groupName]=[];groupOrder.push(groupName);}
                groups[groupName].push({item:r,globalIdx:j});
            }
            var container=document.getElementById('searchResults');
            var safeQ=escapeHTML(q||'');
            var titleText=results.length+' result'+(results.length!==1?'s':'')+' found';
            if(safeQ) titleText+=' for "'+safeQ+'"';
            if(isAdvanced) titleText+=' (filtered)';
            var html='<div class="search-results-section"><h2 class="search-results-title">'+titleText+'</h2>';
            if(results.length===0){
                html+='<p style="text-align:center;color:#999;padding:50px;">'+t('adv_no_results')+'</p>';
            }else{
                for(var g=0;g<groupOrder.length;g++){
                    var gName=groupOrder[g]; var items=groups[gName];
                    html+='<div class="search-group"><h3 class="search-group-title">'+escapeHTML(gName)+'<span class="search-group-count">('+items.length+')</span></h3>';
                    html+='<div class="search-results-grid">';
                    for(var k=0;k<items.length;k++){
                        var ri=items[k].item; var gi=items[k].globalIdx;
                        var fy=safeFocalY(ri.focalY||ri.focal_y);
                        html+='<div class="search-result-card" onclick="openSearchResult('+gi+')">';
                        html+='<img src="'+escapeAttr(ri.path)+'/1.webp" style="object-position:center '+fy+'%;" alt="'+escapeAttr(ri.id)+'" loading="lazy">';
                        html+='<div class="info"><h4>'+escapeHTML(ri.id)+'</h4><span>'+escapeHTML(gName)+'</span>'
                            +'<div data-price-id="'+escapeAttr(ri.id)+'" style="margin-top:5px;"></div></div></div>';
                    }
                    html+='</div></div>';
                }
            }
            html+='</div>';
            container.innerHTML=html;
            window._searchResults=results;
            if(typeof refreshPriceDisplays==='function') refreshPriceDisplays();
        }

        // ===================== SUBCATEGORY & PRODUCT VIEWS =====================
        // FIX #5: safeFocalY everywhere
        // FIX #12: Formatted for readability (was single-line minified)
        // FIX #13: aria-labels on heart buttons

        function showSubs(){
            document.getElementById('pGrid').style.display='grid';
            var cd=productsDB.find(function(p){return p.mainCat.toLowerCase()===curCat.toLowerCase();});
            var dc=cd?cd.mainCat:curCat;
            document.getElementById('pTitle').textContent=CAT_DISPLAY_NAMES[dc]||dc;
            document.getElementById('back').style.display="none";
            document.getElementById('infoGuide').style.display="none";

            var ss=[...new Set(productsDB.filter(function(p){
                return p.mainCat.toLowerCase()===curCat.toLowerCase();
            }).map(function(p){return p.subCat;}))];

            if(ss.length===0){
                document.getElementById('pGrid').innerHTML='<div style="grid-column:1/-1;text-align:center;color:#999;padding:50px;">Collection is being updated...</div>';
                return;
            }

            document.getElementById('pGrid').innerHTML=ss.map(function(s){
                var cv=productsDB.find(function(p){return p.subCat===s;});
                var ss2=escapeHTML(s);
                var ip=escapeAttr(cv.folderPath)+'/1.webp';
                var fy=safeFocalY(cv.focalY);
                return '<div class="card" data-cat="'+escapeAttr(curCat)+'" data-sub="'+escapeAttr(s)+'"'
                    +' onclick="window.location.href=\'?category=\'+encodeURIComponent(this.dataset.cat)+\'&subcategory=\'+encodeURIComponent(this.dataset.sub)">'
                    +'<div class="img-box"><img src="'+ip+'" style="object-position:center '+fy+'%;" loading="lazy" onerror="this.parentElement.style.background=\'#ddd\';" alt="'+escapeAttr(s)+'"></div>'
                    +'<div class="info-box"><h3 class="info-title">'+ss2+'</h3>'
                    +'<span style="color:var(--color-gold);font-size:0.7rem;font-weight:700;">VIEW COLLECTION</span></div></div>';
            }).join('');
        }

        function showProducts(){
            document.getElementById('pGrid').style.display='grid';
            document.getElementById('pTitle').textContent=curSub;
            document.getElementById('back').style.display="inline-block";
            document.getElementById('infoGuide').style.display="flex";

            var ps=productsDB.filter(function(p){
                return p.mainCat.toLowerCase()===curCat.toLowerCase()&&p.subCat===curSub;
            });

            if(ps.length===0){
                document.getElementById('pGrid').innerHTML='<div style="text-align:center;width:100%;">No products found.</div>';
                return;
            }

            window._currentProducts=ps;

            document.getElementById('pGrid').innerHTML=ps.map(function(p,i){
                var ip=escapeAttr(p.folderPath)+'/1.webp';
                var fy=safeFocalY(p.focalY);
                var f=cart.includes(p.realCode)?'active':'';
                var h=f?'\u2665':'\u2661';
                // FIX #13: aria-label on heart buttons
                var ariaLabel=f?'Remove '+escapeAttr(p.realCode)+' from list':'Add '+escapeAttr(p.realCode)+' to list';
                return '<div class="card" data-pidx="'+i+'" onclick="openProductByIdx('+i+')">'
                    +'<button class="heart-btn '+f+'" data-code="'+escapeAttr(p.realCode)+'" onclick="toggleCartSafe(event,this)" aria-label="'+ariaLabel+'">'+h+'</button>'
                    +'<div class="img-box"><img src="'+ip+'" style="object-position:center '+fy+'%;" loading="lazy" onerror="this.parentElement.style.background=\'#ddd\';" alt="'+escapeAttr(p.realCode)+'"></div>'
                    +'<h3 class="info-title">'+escapeHTML(p.realCode)+'</h3>'
                    +'<div data-price-id="'+escapeAttr(p.realCode)+'"></div></div>';
            }).join('');
            if(typeof refreshPriceDisplays==='function') refreshPriceDisplays();
        }

        function openProductByIdx(i){
            if(!window._currentProducts||!window._currentProducts[i])return;
            var p=window._currentProducts[i];
            openModal(p.code,p.realCode,p.folderPath);
        }

        // FIX #13: Update aria-label when toggling
        function toggleCartSafe(e,btn){
            e.stopPropagation();
            var c=btn.dataset.code;
            if(cart.includes(c)){
                cart=cart.filter(function(i){return i!==c;});
                btn.innerText='\u2661';
                btn.classList.remove('active');
                btn.setAttribute('aria-label','Add '+c+' to list');
            }else{
                cart.push(c);
                btn.innerText='\u2665';
                btn.classList.add('active');
                btn.setAttribute('aria-label','Remove '+c+' from list');
            }
            if(lsAvailable)localStorage.setItem('pagusCart',JSON.stringify(cart));
            if(typeof saveFavToFirestore==='function') saveFavToFirestore(c, cart.includes(c));
            updateCartUI();
        }

        function goBack(){window.location.href='?category='+encodeURIComponent(curCat);}

        function updateCartUI(){
            var b=document.getElementById('floatCart');
            var c=document.getElementById('cartCount');
            c.innerText=cart.length;
            b.style.display=cart.length>0?"flex":"none";
        }

        // ===================== WHATSAPP CART =====================
        // FIX #7: Only clear cart after confirmed WhatsApp window opened
        // Uses visibilitychange instead of blind setTimeout

        function sendListToWhatsapp(){
            if(cart.length===0)return;
            var c=cart.join(", ");
            var m=t('wa_list_header')+"\n\n"+c+"\n\n"+t('wa_list_footer');

            var waWindow=window.open('https://wa.me/'+WHATSAPP_NUMBER+'?text='+encodeURIComponent(m),'_blank');

            if(waWindow){
                // FIX #7: Clear cart when user returns from WhatsApp tab
                var clearOnReturn=function(){
                    if(document.visibilityState==='visible'){
                        document.removeEventListener('visibilitychange',clearOnReturn);
                        cart=[];
                        if(lsAvailable)localStorage.removeItem('pagusCart');
                        updateCartUI();
                        document.querySelectorAll('.heart-btn').forEach(function(b){
                            b.innerText='\u2661';
                            b.classList.remove('active');
                            b.setAttribute('aria-label','Add '+b.dataset.code+' to list');
                        });
                    }
                };
                document.addEventListener('visibilitychange',clearOnReturn);
            }else{
                // FIX #7: Popup was blocked ‚Äî notify user, don't clear cart
                showToast(t('popup_blocked'));
            }
        }

        // ===================== MODAL =====================
        // FIX #3: popstate race condition ‚Äî proper state tracking
        // FIX #4: probeImageCount race condition ‚Äî session tracking
        // FIX #13: Focus trap for accessibility

        var activeCode="",activePath="";
        var idx=1,maxIdx=1;
        var _probeSession=0;  // FIX #4: Track probe sessions
        var _modalOpen=false;  // FIX #3: Track modal state

        // FIX #4: Probe with session tracking to prevent stale callbacks
        function probeImageCount(basePath,cb){
            _probeSession++;
            var session=_probeSession;
            var count=1;
            function check(n){
                if(n>20){cb(count);return;}
                if(session!==_probeSession)return; // FIX #4: Abort stale probe
                var img=new Image();
                img.onload=function(){
                    if(session!==_probeSession)return;
                    count=n;
                    check(n+1);
                };
                img.onerror=function(){
                    if(session!==_probeSession)return;
                    cb(count);
                };
                img.src=basePath+'/'+n+'.webp';
            }
            check(2);
        }

        function openModal(c,r,f){
            activeCode=c;
            activePath=f;
            idx=1;

            // FIX #15: Use imageCount from inventory.js if available, probe as fallback
            var knownCount=0;
            if(typeof productsDB!=='undefined'){
                for(var i=0;i<productsDB.length;i++){
                    if(productsDB[i].path===f&&productsDB[i].imageCount){
                        knownCount=productsDB[i].imageCount;
                        break;
                    }
                }
            }

            if(knownCount>0){
                maxIdx=knownCount;
                document.getElementById('imgCount').textContent='1/'+maxIdx;
            }else{
                maxIdx=1;
                document.getElementById('imgCount').textContent='1/...';
                // Fallback: probe if imageCount not in inventory.js
                probeImageCount(f,function(n){
                    maxIdx=n;
                    if(idx>maxIdx) idx=maxIdx;
                    document.getElementById('imgCount').textContent=idx+'/'+maxIdx;
                });
            }

            // FIX #3: Only push state if modal isn't already open
            if(!_modalOpen){
                history.pushState({modal:true},null,"");
            }
            _modalOpen=true;

            var m=document.getElementById('pModal');
            m.style.display="block";
            document.getElementById('mCode').textContent=r;

            var msg=t('wa_inquiry')+r;
            document.getElementById('wp').href='https://wa.me/'+WHATSAPP_NUMBER+'?text='+encodeURIComponent(msg);

            update();

            // FIX #13: Setup focus trap
            m.setAttribute('tabindex','-1');
            m.focus();
            setupFocusTrap(m);
            if(typeof refreshPriceDisplays==='function') refreshPriceDisplays();
        }

        // FIX #3: Clean closeModal with proper state reset
        function closeModal(){
            var m=document.getElementById('pModal');
            if(m.style.display==="none")return;
            m.style.display="none";
            _probeSession++; // FIX #4: Invalidate running probe

            if(_modalOpen){
                _modalOpen=false;
                if(history.state&&history.state.modal){
                    history.back();
                }
            }
            removeFocusTrap(); // FIX #13
        }

        // FIX #13: Focus trap for modal accessibility
        var _focusTrapHandler=null;
        function setupFocusTrap(modal){
            removeFocusTrap();
            _focusTrapHandler=function(e){
                if(e.key!=='Tab')return;
                var focusable=modal.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
                if(focusable.length===0)return;
                var first=focusable[0];
                var last=focusable[focusable.length-1];
                if(e.shiftKey){
                    if(document.activeElement===first){e.preventDefault();last.focus();}
                }else{
                    if(document.activeElement===last){e.preventDefault();first.focus();}
                }
            };
            document.addEventListener('keydown',_focusTrapHandler);
        }
        function removeFocusTrap(){
            if(_focusTrapHandler){
                document.removeEventListener('keydown',_focusTrapHandler);
                _focusTrapHandler=null;
            }
        }

        // ===================== FULLSCREEN =====================
        // FIX #9: Clean event propagation ‚Äî background layer handles close

        var fsIdx=1;

        function openFullscreen(src){
            var o=document.getElementById('fullscreenOverlay');
            document.getElementById('fullscreenImg').src=src;
            fsIdx=idx;
            updateFsCounter();
            o.style.display='flex';
        }

        function closeFullscreen(){
            document.getElementById('fullscreenOverlay').style.display='none';
        }

        function moveFullscreen(d){
            fsIdx+=d;
            if(fsIdx<1)fsIdx=maxIdx;
            if(fsIdx>maxIdx)fsIdx=1;
            var img=document.getElementById('fullscreenImg');
            img.src=activePath+'/'+fsIdx+'.webp';
            img.onerror=function(){fsIdx=1;img.src=activePath+'/1.webp';updateFsCounter();};
            updateFsCounter();
        }

        function updateFsCounter(){
            document.getElementById('fullscreenCounter').textContent=fsIdx+'/'+maxIdx;
        }

        // ===================== KEYBOARD EVENTS =====================

        document.addEventListener('keydown',function(e){
            if(e.key==='Tab')return; // Let focus trap handle Tab
            var o=document.getElementById('fullscreenOverlay');
            if(o.style.display==='flex'){
                if(e.key==='Escape')closeFullscreen();
                if(e.key==='ArrowLeft')moveFullscreen(-1);
                if(e.key==='ArrowRight')moveFullscreen(1);
                return;
            }
            if(document.getElementById('pModal').style.display==="block"){
                if(e.key==="Escape")closeModal();
                if(e.key==="ArrowLeft")move(-1);
                if(e.key==="ArrowRight")move(1);
            }
        });

        // ===================== TOUCH EVENTS =====================

        var touchStartX=0;
        document.getElementById('fullscreenOverlay').addEventListener('touchstart',function(e){
            touchStartX=e.changedTouches[0].screenX;
        },{passive:true});
        document.getElementById('fullscreenOverlay').addEventListener('touchend',function(e){
            var diff=e.changedTouches[0].screenX-touchStartX;
            if(Math.abs(diff)>50){
                if(diff>0)moveFullscreen(-1);else moveFullscreen(1);
            }
        },{passive:true});

        window.addEventListener('click',function(e){
            if(e.target==document.getElementById('pModal'))closeModal();
        });

        // FIX #3: Proper popstate handler ‚Äî full state cleanup
        window.onpopstate=function(){
            if(_modalOpen){
                var m=document.getElementById('pModal');
                m.style.display="none";
                _modalOpen=false;
                _probeSession++; // FIX #4: Invalidate probe
                removeFocusTrap(); // FIX #13
            }
        };

        var tsx=0,tex=0;
        var sl=document.getElementById('sliderArea');
        sl.addEventListener('touchstart',function(e){tsx=e.changedTouches[0].screenX;},{passive:true});
        sl.addEventListener('touchend',function(e){tex=e.changedTouches[0].screenX;hs();},{passive:true});

        function hs(){if(tex<tsx-50)move(1);if(tex>tsx+50)move(-1);}

        // FIX #4: move() clamps to maxIdx safely
        function move(d){
            idx+=d;
            if(idx<1)idx=maxIdx;
            if(idx>maxIdx)idx=1;
            document.getElementById('imgCount').textContent=idx+'/'+maxIdx;
            update();
        }

        function update(){
            var img=document.getElementById('mImg');
            img.style.opacity=0;
            img.src=activePath+'/'+idx+'.webp';
            img.onload=function(){img.style.opacity=1;};
            img.onerror=function(){
                if(idx>1){idx=1;update();}
                else{img.style.opacity=1;img.parentElement.style.background='#333';}
            };
        }

        // ===================== CAROUSEL =====================
        // FIX #1: Now has matching HTML elements with null-safety

        function startCarousel(){
            var track=document.getElementById('slideshowTrack');
            var counter=document.getElementById('slideshowDots');
            // FIX #1: Null check ‚Äî exit gracefully if elements missing
            if(!track||!counter)return;
            if(!productsDB||productsDB.length===0)return;

            var slides=[];
            for(var i=0;i<productsDB.length;i++){
                var p=productsDB[i];
                var sub=p.category.indexOf(' > ')>-1?p.category.split(' > ')[1]:p.category;
                var cat=p.category.indexOf(' > ')>-1?p.category.split(' > ')[0]:p.category;
                slides.push({img:p.path+'/1.webp',title:p.id,sub:sub,cat:cat,path:p.path});
            }

            // Shuffle
            for(var j=slides.length-1;j>0;j--){
                var k=Math.floor(Math.random()*(j+1));
                var t=slides[j];slides[j]=slides[k];slides[k]=t;
            }

            window._carouselSlides=slides;
            var html='';
            for(var m=0;m<slides.length;m++){
                var s=slides[m];
                var cls=m===0?'ss-slide active':'ss-slide';
                html+='<div class="'+cls+'" data-slidx="'+m+'" onclick="openFromCarouselSafe('+m+')">';
                html+='<img src="'+escapeAttr(s.img)+'" alt="'+escapeAttr(s.title)+'" onerror="this.parentElement.classList.add(\'ss-broken\')">';
                html+='<div class="ss-slide-info"><h4>'+escapeHTML(s.title)+'</h4><span>'+escapeHTML(s.sub)+'</span></div></div>';
            }
            track.innerHTML=html;

            var validSlides=document.querySelectorAll('.ss-slide:not(.ss-broken)');
            counter.innerHTML='<span class="ss-counter">1 / '+validSlides.length+'</span>';
            window.CAROUSEL_INDEX=0;
            window.CAROUSEL_TOTAL=document.querySelectorAll('.ss-slide').length;

            if(window.CAROUSEL_TIMER)clearInterval(window.CAROUSEL_TIMER);
            window.CAROUSEL_TIMER=setInterval(carouselNext,5000);
        }

        function openFromCarouselSafe(carIdx){
            if(!window._carouselSlides||!window._carouselSlides[carIdx])return;
            var s=window._carouselSlides[carIdx];
            openModal(s.title,s.title,s.path);
        }

        function carouselNext(){
            var all=document.querySelectorAll('.ss-slide');
            if(!all||all.length===0)return;
            var attempts=0;
            do{
                window.CAROUSEL_INDEX++;
                if(window.CAROUSEL_INDEX>=window.CAROUSEL_TOTAL)window.CAROUSEL_INDEX=0;
                attempts++;
            }while(all[window.CAROUSEL_INDEX]&&all[window.CAROUSEL_INDEX].classList.contains('ss-broken')&&attempts<window.CAROUSEL_TOTAL);
            carouselShow();
        }

        function carouselShow(){
            var all=document.querySelectorAll('.ss-slide');
            if(!all||all.length===0)return;
            for(var i=0;i<all.length;i++){
                all[i].className=all[i].classList.contains('ss-broken')?'ss-slide ss-broken':'ss-slide';
            }
            if(all[window.CAROUSEL_INDEX]){
                all[window.CAROUSEL_INDEX].className=all[window.CAROUSEL_INDEX].classList.contains('ss-broken')?'ss-slide ss-broken':'ss-slide active';
            }
            var valid=document.querySelectorAll('.ss-slide:not(.ss-broken)').length;
            var current=0;
            for(var j=0;j<=window.CAROUSEL_INDEX;j++){
                if(all[j]&&!all[j].classList.contains('ss-broken'))current++;
            }
            var c=document.querySelector('.ss-counter');
            if(c)c.innerText=current+' / '+valid;
        }

        function ssMove(dir){
            var all=document.querySelectorAll('.ss-slide');
            if(!all||all.length===0)return;
            var attempts=0;
            do{
                window.CAROUSEL_INDEX+=dir;
                if(window.CAROUSEL_INDEX>=window.CAROUSEL_TOTAL)window.CAROUSEL_INDEX=0;
                if(window.CAROUSEL_INDEX<0)window.CAROUSEL_INDEX=window.CAROUSEL_TOTAL-1;
                attempts++;
            }while(all[window.CAROUSEL_INDEX]&&all[window.CAROUSEL_INDEX].classList.contains('ss-broken')&&attempts<window.CAROUSEL_TOTAL);
            carouselShow();
        }
    </script>
</body>
</html>
