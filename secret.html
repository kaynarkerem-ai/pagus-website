<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Wholesale Menswear Collection | Pagus Menswear Turkey</title>
    <meta name="description" content="Premium wholesale menswear collection from Turkey. Suits, Tuxedos, and more.">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://fonts.gstatic.com https://wa.me;">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Montserrat:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root { --color-black: #1a1a1a; --color-gold: #c9a962; --color-noble: #2c3e50; --font-display: 'Playfair Display', serif; --font-body: 'Montserrat', sans-serif; --site-max-width: 1400px; }
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { font-family: var(--font-body); color: var(--color-black); background: #fff; overflow-x: hidden; }

        /* HEADER */
        .header { position: sticky; top: 0; width: 100%; z-index: 900; background: var(--color-noble); padding: 15px 0; box-shadow: 0 4px 20px rgba(0,0,0,0.1); }
        .header-inner { max-width: var(--site-max-width); margin: 0 auto; padding: 0 40px; }
        .logo-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .logo { font-family: var(--font-display); font-size: 1.6rem; color: #fff; font-weight: 700; text-transform: uppercase; letter-spacing: 2px; text-decoration: none;}
        .soc-icons { display: flex; gap: 15px; }
        .soc-icons svg { width: 20px; height: 20px; stroke: #fff; fill: none; transition: 0.3s; }
        
        .nav-list { display: flex; gap: 25px; list-style: none; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 12px; width: 100%; justify-content: center; flex-wrap: wrap; }
        .nav-list a { color: #fff; font-size: 0.75rem; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; transition: 0.3s; text-decoration: none; white-space: nowrap; }
        .nav-list a:hover { color: var(--color-gold); }

        /* CONTENT */
        .page-title-area { background: #f9f9f9; padding: 40px 0 20px; text-align: center; border-bottom: 1px solid #eee; }
        .cat-title { font-family: var(--font-display); font-size: 2.5rem; text-transform: uppercase; color: var(--color-noble); margin-bottom: 20px; }
        .back-btn { display: inline-block; color: var(--color-gold); font-weight: 700; margin-bottom: 15px; cursor: pointer; border: 1px solid var(--color-gold); padding: 6px 18px; font-size: 0.8rem; transition: 0.3s; }
        
        .info-guide { background: #fff3cd; border: 1px solid #ffeeba; color: #856404; max-width: 600px; margin: 0 auto 20px; padding: 15px; border-radius: 8px; font-size: 0.9rem; display: flex; align-items: center; justify-content: center; gap: 10px; width: 90%; }
        
        /* GRID */
        .grid { max-width: var(--site-max-width); margin: 0 auto; padding: 40px; display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 40px; min-height: 400px; }
        .card { cursor: pointer; text-align: center; position: relative; }
        .img-box { aspect-ratio: 3/4; overflow: hidden; background: #eee; margin-bottom: 15px; position: relative; }
        .img-box img { width: 100%; height: 100%; object-fit: cover; transition: 0.5s; opacity: 0; animation: fadeIn 0.5s forwards; }
        @keyframes fadeIn { to { opacity: 1; } }
        .card:hover img { transform: scale(1.05); }
        .info-title { font-family: var(--font-display); font-size: 1.3rem; margin-bottom: 5px; color: var(--color-noble); }
        
        .heart-btn { position: absolute; top: 10px; right: 10px; width: 35px; height: 35px; background: rgba(255,255,255,0.9); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.3rem; color: #ccc; cursor: pointer; z-index: 10; border: none; }
        .heart-btn.active { color: #e74c3c; }

        /* MODAL */
        .modal { display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); backdrop-filter: blur(5px); }
        .modal-content { height: 100vh; display: grid; grid-template-columns: 3fr 1fr; }
        .slider { position: relative; background: #000; display: flex; align-items: center; justify-content: center; height: 100%; user-select: none; }
        .main-img { max-height: 90vh; max-width: 95%; object-fit: contain; }
        
        .arrow { position: absolute; top: 50%; transform: translateY(-50%); color: #fff; font-size: 4rem; cursor: pointer; padding: 20px; opacity: 0.7; z-index: 2010; text-shadow: 0 0 10px rgba(0,0,0,0.5); background: transparent; border: none; }
        .arrow:hover { opacity: 1; color: var(--color-gold); }
        .prev { left: 0; } .next { right: 0; }
        
        .img-counter { position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.6); color: #fff; padding: 5px 15px; border-radius: 20px; font-size: 0.9rem; font-weight: 700; pointer-events: none; }
        
        .side-info { background: #fff; padding: 60px; display: flex; flex-direction: column; justify-content: center; position: relative; overflow-y: auto; }
        .close { position: absolute; top: 25px; right: 35px; font-size: 45px; color: #fff; cursor: pointer; line-height: 1; z-index: 2020; }

        .private-label { background: var(--color-noble); padding: 80px 40px; text-align: center; color: #fff; margin-top: 60px; }
        .pl-title { font-family: var(--font-display); font-size: 2.5rem; color: var(--color-gold); margin-bottom: 20px; }
        .pl-btn { display: inline-block; background: var(--color-gold); color: #000; padding: 15px 40px; text-decoration: none; font-weight: 700; border-radius: 4px; }
        
        .footer { background: #000; color: #999; padding: 70px 40px; border-top: 1px solid #333; }
        .footer-grid { max-width: var(--site-max-width); margin: 0 auto; display: grid; grid-template-columns: 2fr 1fr; gap: 6rem; }
        
        .float-cart { position: fixed; bottom: 20px; right: 20px; z-index: 999; background: #25D366; color: #fff; padding: 12px 20px; border-radius: 50px; font-weight: 700; display: none; align-items: center; gap: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.3); border: none; cursor: pointer; font-family: var(--font-body); font-size: 1rem; }
        .float-cart:hover { background: #1da851; transform: scale(1.05); }

        .badges { display: flex; gap: 15px; margin-bottom: 30px; border-bottom: 1px solid #eee; padding-bottom: 20px; }
        .badge-item { display: flex; flex-direction: column; align-items: center; text-align: center; gap: 5px; font-size: 0.7rem; color: #666; font-weight: 600; text-transform: uppercase; }
        .badge-icon { font-size: 1.5rem; color: var(--color-noble); }

        @media (max-width: 768px) {
            .header-inner { padding: 0 15px; }
            .nav-list { gap: 10px; justify-content: center; } .nav-list a { font-size: 0.65rem; padding: 5px; }
            .grid { padding: 20px 10px; gap: 15px; grid-template-columns: 1fr 1fr; }
            .modal-content { display: flex; flex-direction: column; height: 100%; overflow-y: scroll; }
            .slider { height: 50vh; min-height: 300px; background: #000; flex-shrink: 0; }
            .side-info { padding: 30px 20px; height: auto; display: block !important; } 
            .arrow { font-size: 3rem; padding: 15px; background: rgba(0,0,0,0.3); border-radius: 50%; width: 50px; height: 50px; display: flex; align-items: center; justify-content: center; }
            .prev { left: 10px; } .next { right: 10px; }
            .footer-grid { grid-template-columns: 1fr; gap: 30px; }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-inner">
            <div class="logo-row">
                <a href="index.html" class="logo">PAGUS</a>
                <div class="soc-icons">
                    <a href="https://www.instagram.com/pagus_menswear/" target="_blank" aria-label="Instagram"><svg viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><rect x="2" y="2" width="20" height="20" rx="5"/><circle cx="12" cy="12" r="4"/><circle cx="18" cy="6" r="1"/></svg></a>
                    <a href="https://wa.me/905511748907" target="_blank" aria-label="WhatsApp"><svg viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"/></svg></a>
                </div>
            </div>
            <nav><ul class="nav-list">
                <li><a href="?category=Wedding Suits">Wedding Suits</a></li>
                <li><a href="?category=Formal Suits">Formal Suits</a></li>
                <li><a href="?category=Shirts">Shirts</a></li>
                <li><a href="?category=Shoes">Shoes</a></li>
                <li><a href="?category=Accessories">Accessories</a></li>
                <li><a href="?category=Children">Children</a></li>
            </ul></nav>
        </div>
    </header>

    <section class="page-title-area">
        <div id="back" class="back-btn" onclick="goBack()" style="display:none;">‚Üê BACK</div>
        <h1 class="cat-title" id="pTitle">COLLECTION</h1>
        <div class="info-guide" id="infoGuide"><span>üí°</span><b id="guideText">Tap ‚ù§Ô∏è to create list.</b></div>
    </section>

    <div class="grid" id="pGrid"><div style="grid-column:1/-1; text-align:center; padding:50px; color:#999;">Loading Pagus Collection...</div></div>

    <section class="private-label">
        <div class="pl-content">
            <h2 class="pl-title">YOUR BRAND, OUR PRODUCTION</h2>
            <p style="color:#ddd; margin-bottom:35px;">Looking for a manufacturing partner? Pagus offers specialized Private Label services.</p>
            <a href="https://wa.me/905511748907?text=Hi,%20I'm%20interested%20in%20Private%20Label%20manufacturing" target="_blank" class="pl-btn">START PRODUCTION</a>
        </div>
    </section>

    <button id="floatCart" class="float-cart" onclick="sendListToWhatsapp()" aria-label="Send favorites list via WhatsApp">
        <svg style="width:20px;height:20px;fill:white;" viewBox="0 0 24 24"><path d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.893 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 3.891 1.746 5.634l-.999 3.648 3.742-.981zm11.387-5.464c-.074-.124-.272-.198-.57-.347-.297-.149-1.758-.868-2.031-.967-.272-.099-.47-.149-.669.149-.198.297-.768.967-.941 1.165-.173.198-.347.223-.644.074-.297-.149-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.521.151-.172.2-.296.3-.495.099-.198.05-.372-.025-.521-.075-.148-.669-1.611-.916-2.206-.242-.579-.487-.501-.669-.51l-.57-.01c-.198 0-.52.074-.792.372s-1.04 1.016-1.04 2.479 1.065 2.876 1.213 3.074c.149.198 2.095 3.2 5.076 4.487.709.306 1.263.489 1.694.626.712.226 1.36.194 1.872.118.571-.085 1.758-.719 2.006-1.413.248-.695.248-1.29.173-1.414z"/></svg>
        SEND <span id="cartCount">0</span>
    </button>

    <div id="pModal" class="modal" role="dialog" aria-modal="true">
        <span class="close" onclick="closeModal()" aria-label="Close">&times;</span>
        <div class="modal-content">
            <div class="slider" id="sliderArea">
                <button class="arrow prev" onclick="move(-1)" aria-label="Previous Image">&#10094;</button>
                <img id="mImg" class="main-img" src="" alt="Product Detail">
                <button class="arrow next" onclick="move(1)" aria-label="Next Image">&#10095;</button>
                <div class="img-counter" id="imgCount">1/4</div>
            </div>
            <div class="side-info">
                <span style="color:var(--color-gold); font-weight:700; font-size:0.8rem; letter-spacing:2px;">WHOLESALE MANUFACTURER</span>
                <h2 id="mCode" style="font-family:var(--font-display); font-size:2.5rem; margin:15px 0 25px;">CODE</h2>
                <div class="badges"><div class="badge-item"><span class="badge-icon">üßµ</span>Premium<br>Fabric</div><div class="badge-item"><span class="badge-icon">üáπüá∑</span>Made in<br>Turkey</div><div class="badge-item"><span class="badge-icon">üì¶</span>Wholesale<br>Only</div></div>
                <p style="color:#555; margin-bottom:40px; font-size:1rem;">Premium quality fabric available for bulk orders.</p>
                <a id="wp" href="#" target="_blank" style="background:var(--color-gold); color:#fff; padding:18px; text-align:center; font-weight:700; letter-spacing:1px; border-radius:4px; box-shadow: 0 10px 20px rgba(201,169,98,0.3); text-decoration:none;">ASK PRICE VIA WHATSAPP</a>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="footer-grid">
            <div><h4>ABOUT PAGUS MENSWEAR</h4><p>PAGUS Menswear is established with a single mission: to provide world-class textile solutions.</p></div>
            <div><h4>B2B CONTACT</h4><ul><li><strong>WhatsApp:</strong> +90 551 174 89 07</li><li><strong>Location:</strong> ƒ∞zmir, Turkey</li><li><a href="payment.html" style="color:#999; text-decoration:none;">Secure Payment & Bank Accounts</a></li></ul></div>
        </div>
        <div style="text-align:center; margin-top:50px; font-size:0.8rem; color:#444;">¬© 2026 Pagus Menswear. All Rights Reserved.</div>
    </footer>

   <script src="inventory.js?v=2026"></script>
    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const curCat = urlParams.get('category') || "Wedding Suits";
        const curSub = urlParams.get('subcategory');
        
        // üõ°Ô∏è SECURITY: LocalStorage Protection
        let cart = [];
        try {
            cart = JSON.parse(localStorage.getItem('pagusCart')) || [];
        } catch (e) {
            localStorage.removeItem('pagusCart');
        }

        // üõ°Ô∏è SECURITY: Simple HTML Sanitizer for XSS Prevention
        function escapeHTML(str) {
            return str.replace(/[&<>'"]/g, 
                tag => ({'&': '&amp;', '<': '&lt;', '>': '&gt;', "'": '&#39;', '"': '&quot;'}[tag]));
        }

        function setLanguage() {
            let userLang = navigator.language || navigator.userLanguage; 
            const guideText = document.getElementById('guideText');
            if (userLang && userLang.startsWith("it")) { guideText.innerText = "Tocca l'icona del cuore ‚ù§Ô∏è per creare la tua lista."; } 
            else { guideText.innerText = "Tap ‚ù§Ô∏è to create list."; }
        }

        if (typeof productsDB === 'undefined') { 
            document.getElementById('pGrid').innerHTML = "<div style='text-align:center; width:100%; padding:50px; color:red;'>Error: 'inventory.js' not found.</div>"; 
        } else { 
            // --- Jƒ∞LET Gƒ∞Bƒ∞ VERƒ∞ D√ñN√ú≈ûT√úR√úC√ú ---
            if (typeof productsDB !== 'undefined') {
                productsDB.forEach(p => {
                    // 1. Kategorileri Ayƒ±r
                    if (p.category && p.category.includes(' > ')) {
                        let parts = p.category.split(' > ');
                        p.mainCat = parts[0].trim();
                        p.subCat = parts[1].trim();
                    } else {
                        p.mainCat = p.category;
                        p.subCat = "General";
                    }
                    // 2. ƒ∞simleri E≈üle
                    p.code = p.id;
                    p.realCode = p.id;
                    // 3. Resim Yolunu Ayarla (images/ klas√∂r√ºnden dƒ±≈üarƒ± √ßƒ±kartƒ±yoruz)
                    p.folderPath = "../" + p.path;
                });
            }
            // ------------------------------------

            setLanguage(); init(); updateCartUI();
        }

        function init() { if (curSub) showProducts(); else showSubs(); }

        function showSubs() {
            const catData = productsDB.find(p => p.mainCat.toLowerCase() === curCat.toLowerCase());
            const displayCat = catData ? catData.mainCat : curCat;
            document.getElementById('pTitle').textContent = displayCat; // Safe Text
            document.getElementById('back').style.display = "none";
            document.getElementById('infoGuide').style.display = "none";
            
            const subs = [...new Set(productsDB.filter(p => p.mainCat.toLowerCase() === curCat.toLowerCase()).map(p => p.subCat))];
            
            if (subs.length === 0) { 
                document.getElementById('pGrid').innerHTML = `<div style="grid-column:1/-1; text-align:center; color:#999; padding:50px;">Collection is being updated...</div>`; 
                return; 
            }

            // Using escapeHTML to prevent XSS
            document.getElementById('pGrid').innerHTML = subs.map(s => {
                const cover = productsDB.find(p => p.subCat === s);
                const safeS = escapeHTML(s);
                const safeCat = escapeHTML(curCat);
                const imgPath = `images/${cover.folderPath}/${cover.code} (1).webp`; 
                return `
                <div class="card" onclick="window.location.href='?category=${encodeURIComponent(curCat)}&subcategory=${encodeURIComponent(s)}'">
                    <div class="img-box"><img src="${imgPath}" loading="lazy" onerror="this.src='placeholder.jpg'" alt="${safeS}"></div>
                    <div class="info-box"><h3 class="info-title">${safeS}</h3><span class="info-sub" style="color:var(--color-gold); font-size:0.7rem; font-weight:700;">VIEW COLLECTION</span></div>
                </div>`;
            }).join('');
        }

        function showProducts() {
            document.getElementById('pTitle').textContent = curSub; // Safe Text
            document.getElementById('back').style.display = "inline-block";
            document.getElementById('infoGuide').style.display = "flex";
            
            const prods = productsDB.filter(p => p.mainCat.toLowerCase() === curCat.toLowerCase() && p.subCat === curSub);
            
            if (prods.length === 0) { 
                document.getElementById('pGrid').innerHTML = `<div style="text-align:center; width:100%;">No products found.</div>`; 
                return; 
            }

            document.getElementById('pGrid').innerHTML = prods.map(p => {
                const imgPath = `images/${p.folderPath}/${p.code} (1).webp`;
                const isFav = cart.includes(p.realCode) ? 'active' : '';
                const heartChar = isFav ? '‚ô•' : '‚ô°';
                const safeRealCode = escapeHTML(p.realCode);
                const safeCode = escapeHTML(p.code);
                const safePath = escapeHTML(p.folderPath);
                
                return `
                <div class="card" onclick="openModal('${safeCode}', '${safeRealCode}', '${safePath}')">
                    <button class="heart-btn ${isFav}" onclick="toggleCart(event, '${safeRealCode}')" aria-label="Add to favorites">${heartChar}</button>
                    <div class="img-box"><img src="${imgPath}" loading="lazy" alt="${safeRealCode}"></div>
                    <h3 class="info-title">${safeRealCode}</h3>
                </div>`;
            }).join('');
        }

        function goBack() { window.location.href = `?category=${curCat}`; }

        function toggleCart(e, code) {
            e.stopPropagation();
            if (cart.includes(code)) { 
                cart = cart.filter(item => item !== code); 
                e.target.innerText = '‚ô°'; e.target.classList.remove('active'); 
            } else { 
                cart.push(code); 
                e.target.innerText = '‚ô•'; e.target.classList.add('active'); 
            }
            localStorage.setItem('pagusCart', JSON.stringify(cart));
            updateCartUI();
        }

        function updateCartUI() {
            const btn = document.getElementById('floatCart');
            const count = document.getElementById('cartCount');
            count.innerText = cart.length;
            if (cart.length > 0) btn.style.display = "flex"; else btn.style.display = "none";
        }

        function sendListToWhatsapp() {
            if (cart.length === 0) return;
            let userLang = navigator.language || navigator.userLanguage; 
            let message = "", codes = cart.join(", ");
            if (userLang && userLang.startsWith("it")) { message = `Salve Pagus, sono interessato ai prezzi di questi modelli:\n\n${codes}\n\nGrazie.`; } 
            else { message = `Hi Pagus, I am interested in the prices for these models:\n\n${codes}\n\nThanks.`; }
            
            window.open(`https://wa.me/905511748907?text=${encodeURIComponent(message)}`, '_blank');
            
            setTimeout(() => {
                cart = []; localStorage.removeItem('pagusCart'); updateCartUI();
                document.querySelectorAll('.heart-btn').forEach(btn => { btn.innerText = '‚ô°'; btn.classList.remove('active'); });
            }, 1000);
        }

        let activeCode = "", activePath = "", idx = 1;
        
        function openModal(code, realCode, folderPath) {
            activeCode = code; activePath = folderPath; idx = 1;
            
            // Geri tu≈üu manip√ºlasyonu (History State)
            history.pushState({modal: true}, null, "");
            
            const modal = document.getElementById('pModal');
            modal.style.display = "block";
            document.getElementById('mCode').textContent = realCode;
            document.getElementById('imgCount').textContent = `${idx}/4`;
            
            let userLang = navigator.language || navigator.userLanguage; 
            let message = "";
            if (userLang && userLang.startsWith("it")) { message = `Salve, vorrei ricevere informazioni sul modello: ${realCode}`; } 
            else { message = `Hi, inquiring about: ${realCode}`; }
            document.getElementById('wp').href = `https://wa.me/905511748907?text=${encodeURIComponent(message)}`;
            
            update();
            
            modal.setAttribute('tabindex', '-1');
            modal.focus();
        }

        function closeModal() { 
            document.getElementById('pModal').style.display = "none"; 
            
            // Eƒüer geri tu≈üu ile kapanmadƒ±ysa ve URL'de state varsa, tarihi temizle
            if (history.state && history.state.modal) {
                history.back();
            }
        }
        
        window.onclick = function(event) { if (event.target == document.getElementById('pModal')) closeModal(); }
        
        // Geri tu≈üuna basƒ±lƒ±nca yakala
        window.onpopstate = function(event) {
            if (document.getElementById('pModal').style.display === "block") {
                // Modal a√ßƒ±ksa kapat ama history.back() yapma (√ß√ºnk√º zaten browser yaptƒ±)
                document.getElementById('pModal').style.display = "none";
            }
        };

        // ‚å®Ô∏è KEYBOARD SUPPORT
        document.addEventListener('keydown', function(event) {
            if(document.getElementById('pModal').style.display === "block") {
                if (event.key === "Escape") closeModal();
                if (event.key === "ArrowLeft") move(-1);
                if (event.key === "ArrowRight") move(1);
            }
        });

        // üëÜ SWIPE SUPPORT
        let touchStartX = 0;
        let touchEndX = 0;
        const slider = document.getElementById('sliderArea');
        
        slider.addEventListener('touchstart', e => { touchStartX = e.changedTouches[0].screenX; }, {passive: true});
        slider.addEventListener('touchend', e => {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        }, {passive: true});

        function handleSwipe() {
            if (touchEndX < touchStartX - 50) move(1); // Swipe Left -> Next
            if (touchEndX > touchStartX + 50) move(-1); // Swipe Right -> Prev
        }

        function move(d) { 
            idx += d; if(idx<1) idx=4; if(idx>4) idx=1; 
            document.getElementById('imgCount').textContent = `${idx}/4`; 
            update(); 
        }
        
        function update() { 
            const img = document.getElementById('mImg');
            img.style.opacity = 0; 
            img.src = `images/${activePath}/${activeCode} (${idx}).webp`;
            img.onload = () => { img.style.opacity = 1; }
            img.onerror = () => { 
                if(idx > 1) { idx = 1; update(); } 
                else { img.src='placeholder.jpg'; } 
            };
        }
    </script>
</body>
</html>